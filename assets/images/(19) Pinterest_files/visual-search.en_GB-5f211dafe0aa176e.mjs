(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[14865,90907,28452,34713],{542473:e=>{"use strict";e.exports=function(){}},405410:e=>{"use strict";var t,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardAttribution_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[t={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="610a35d46510240eb58e262c1909310c",e.exports=i},327620:e=>{"use strict";var t,i,a,n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardBody_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"lastRepinDate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[a={alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,concreteType:"ParsedIngredientMetadata",kind:"LinkedField",name:"ingredients",plural:!0,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"amt",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null},{args:null,kind:"FragmentSpread",name:"RecipeMetadata_recipe"}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null}],storageKey:null},t,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"repinCount",storageKey:null},a,{args:null,kind:"FragmentSpread",name:"usePinImageUrls_pin"},{args:null,kind:"FragmentSpread",name:"useNormalizePinData_pin"},{args:null,kind:"FragmentSpread",name:"BestPinCardAttribution_pin"}],type:"Pin",abstractKey:null};n.hash="833cd5d58bc1ac105444aa923e882675",e.exports=n},603239:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CarouselEllipsis_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"CarouselEllipsis_pin2"}],type:"Pin",abstractKey:null};t.hash="a4b0b28d3f9f52a7e3d5874c94bfb63d",e.exports=t},822423:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CarouselEllipsis_pin2",selections:[{args:null,kind:"FragmentSpread",name:"useLogSwipe_pin"},{args:null,kind:"FragmentSpread",name:"usePinCarouselData_pin"}],type:"Pin",abstractKey:null};t.hash="3286ed8ff7f456e30ce44b879fb3e273",e.exports=t},992872:e=>{"use strict";var t,i={argumentDefinitions:[{defaultValue:!1,kind:"LocalArgument",name:"skipUnauthFragment"}],kind:"Fragment",metadata:null,name:"CarouselModule_story",selections:[{alias:null,args:null,concreteType:"StoryAction",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"location",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"contentIds",storageKey:null},{alias:null,args:null,concreteType:"StoryDisplayOptions",kind:"LinkedField",name:"displayOptions",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryContentDisplay",kind:"LinkedField",name:"contentDisplay",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryContentCarouselDisplayOptions",kind:"LinkedField",name:"carouselDisplayOptions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"navigationType",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"carouselScrollingMode",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"componentType",storageKey:null},{alias:null,args:null,concreteType:"StoryContentVisibleItemCount",kind:"LinkedField",name:"contentVisibleItemCount",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"mobile",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"web",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryTilesGridLayout",kind:"LinkedField",name:"gridLayout",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"cols",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"carouselFadeEnds",storageKey:null},{alias:null,args:null,concreteType:"StoryItemViewRepStyle",kind:"LinkedField",name:"itemViewRepStyle",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"exploreArticleRepStyle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"moreIdeasRepStyle",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryHeaderDisplay",kind:"LinkedField",name:"headerDisplay",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"expandedTextAlignment",storageKey:null}],storageKey:null}],storageKey:null},{alias:"storyTitle",args:null,concreteType:"StoryText",kind:"LinkedField",name:"title",plural:!1,selections:[t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"objects",plural:!0,selections:[t,{kind:"InlineFragment",selections:[{args:[{kind:"Variable",name:"skipUnauthFragment",variableName:"skipUnauthFragment"}],kind:"FragmentSpread",name:"ItemRep_pin"},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null}],type:"Pin",abstractKey:null}],storageKey:null},{alias:"storyId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyType",storageKey:null},{args:null,kind:"FragmentSpread",name:"HeaderModule_story"}],type:"Story",abstractKey:null};i.hash="5d69c90881b2a9595cac9a9cb8cc1097",e.exports=i},717246:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CarouselSliders_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{args:null,kind:"FragmentSpread",name:"CarouselSliders_pin2"}],type:"Pin",abstractKey:null};t.hash="3f223f30a28328f76287f1fcf8c84a2a",e.exports=t},671704:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CarouselSliders_pin2",selections:[{args:null,kind:"FragmentSpread",name:"useLogSwipe_pin"},{args:null,kind:"FragmentSpread",name:"usePinCarouselData_pin"},{args:null,kind:"FragmentSpread",name:"CarouselEllipsis_pin"}],type:"Pin",abstractKey:null};t.hash="d0973811f6c08057de3b9f34d83c8a63",e.exports=t},225785:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightCropperContainer_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"FlashlightSpotlightDots_pin"}],type:"Pin",abstractKey:null};t.hash="17b1ebef1c9031212ecd7bd5be0e6151",e.exports=t},490644:e=>{"use strict";var t,i,a,n,r,l,s,o,d,c,u,p,h,m,g,_,y,f,x,v,b,S,w,P=(t=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],i=[{kind:"Variable",name:"pin",variableName:"pinId"}],a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"isEligibleForRelatedProducts",storageKey:null},o={alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"detection",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null},u={alias:"imageOrig",args:d=[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"orig")'},h={alias:"image736x",args:p=[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"736x")'},g={alias:"image564x",args:m=[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"564x")'},y={alias:"image474x",args:_=[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"474x")'},x={alias:"image236x",args:f=[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:c,storageKey:'images(spec:"236x")'},S={alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:b=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:"additionalImageOrig",args:d,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:v=[r,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:c,storageKey:null}],storageKey:'additionalImagesPerSpec(spec:"orig")'},{alias:"additionalImage564x",args:m,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:v,storageKey:'additionalImagesPerSpec(spec:"564x")'},{alias:"additionalImage736x",args:p,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:v,storageKey:'additionalImagesPerSpec(spec:"736x")'},{alias:"additionalImage474x",args:_,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:v,storageKey:'additionalImagesPerSpec(spec:"474x")'},{alias:"additionalImage236x",args:f,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:v,storageKey:'additionalImagesPerSpec(spec:"236x")'},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[{alias:null,args:null,concreteType:"AdditionalImages",kind:"LinkedField",name:"additionalImages",plural:!0,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"canonicalImages",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{fragment:{argumentDefinitions:t,kind:"Fragment",metadata:null,name:"FlashlightPagePinQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[a,{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[n,r,l,s,o,u,h,g,y,x,S,w={alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:b,storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"FlashlightPagePinQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[n,r,l,s,o,u,h,g,y,x,S,w,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"2fbe7c612e0b9e55147a27059ea1cb52fb3420abce761a50d75549302dd620bd",metadata:{},name:"FlashlightPagePinQuery",operationKind:"query",text:null}});P.hash="3e072d3a492316c79a629968e8cd0a07",e.exports=P,function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let t=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[t]=e}}}(P.default||P)},568189:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightPageWithData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetInitialCropArea_pin"},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"FlashlightCropperContainer_pin"},{args:null,kind:"FragmentSpread",name:"FlashlightResultGridContainer_pin"}],type:"Pin",abstractKey:null};t.hash="903db2b432ad0f02adcdca0d6515898d",e.exports=t},378605:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightResultGridContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"RelatedProductsUnifiedFeed_pin"}],type:"Pin",abstractKey:null};t.hash="bcca3e8407135d3e3c7a0a8bacfabeff",e.exports=t},52892:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightSpotlightDots_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};t.hash="3a8409077905af94eb39568e4a5a57fc",e.exports=t},612587:e=>{"use strict";var t,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"HeaderModule_story",selections:[{alias:null,args:null,concreteType:"StoryAction",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"location",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"style",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isVerifiedMerchant",storageKey:null},{alias:null,args:null,concreteType:"VerifiedIdentity",kind:"LinkedField",name:"verifiedIdentity",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"verified",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null}],storageKey:null},{alias:"storyTitle",args:null,concreteType:"StoryText",kind:"LinkedField",name:"title",plural:!1,selections:t=[{alias:null,args:null,kind:"ScalarField",name:"format",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryText",kind:"LinkedField",name:"subtitle",plural:!1,selections:t,storageKey:null},{alias:"storyDescription",args:null,concreteType:"StoryText",kind:"LinkedField",name:"description",plural:!1,selections:t,storageKey:null},{alias:null,args:null,concreteType:"StoryDisplayOptions",kind:"LinkedField",name:"displayOptions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"titleTextColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitleTextColor",storageKey:null},{alias:null,args:null,concreteType:"StoryContentDisplay",kind:"LinkedField",name:"contentDisplay",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"componentType",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryHeaderDisplay",kind:"LinkedField",name:"headerDisplay",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"expandedTextAlignment",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"textAlignment",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitleAlignment",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"headerSize",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"titlePosition",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitleStyle",storageKey:null}],storageKey:null}],storageKey:null}],type:"Story",abstractKey:null};i.hash="4bee3a400f6e868da4c768b56562f0ea",e.exports=i},883597:e=>{"use strict";var t={argumentDefinitions:[{defaultValue:!1,kind:"LocalArgument",name:"skipUnauthFragment"}],kind:"Fragment",metadata:null,name:"ItemRep_pin",selections:[{alias:"pinId",args:null,kind:"ScalarField",name:"id",storageKey:null},{args:[{kind:"Variable",name:"skipUnauthFragment",variableName:"skipUnauthFragment"}],kind:"FragmentSpread",name:"PinRep_pin"}],type:"Pin",abstractKey:null};t.hash="e09face5ac4d794d890ecc87ca1a90a4",e.exports=t},43027:e=>{"use strict";var t,i,a,n,r,l,s,o,d,c,u,p,h,m,g,_,y,f,x,v,b,S,w,P,I=(t=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],i=[{kind:"Variable",name:"pin",variableName:"pinId"}],a={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},o={alias:"imageOrig",args:l=[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"orig")'},c={alias:"image736x",args:d=[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"736x")'},p={alias:"image564x",args:u=[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"564x")'},m={alias:"image474x",args:h=[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"474x")'},_={alias:"image236x",args:g=[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"236x")'},y={alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},f={alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[r,{alias:"imageOrig",args:l,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"orig")'},{alias:"image736x",args:d,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"736x")'},{alias:"image564x",args:u,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"564x")'},{alias:"image474x",args:h,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"474x")'},{alias:"image236x",args:g,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"236x")'}],storageKey:null},b={alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:v=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:"additionalImageOrig",args:l,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:x=[r,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:s,storageKey:null}],storageKey:'additionalImagesPerSpec(spec:"orig")'},{alias:"additionalImage564x",args:u,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:x,storageKey:'additionalImagesPerSpec(spec:"564x")'},{alias:"additionalImage736x",args:d,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:x,storageKey:'additionalImagesPerSpec(spec:"736x")'},{alias:"additionalImage474x",args:h,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:x,storageKey:'additionalImagesPerSpec(spec:"474x")'},{alias:"additionalImage236x",args:g,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:x,storageKey:'additionalImagesPerSpec(spec:"236x")'}],storageKey:null}],storageKey:null},S={alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:v,storageKey:null},w={alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},y,{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"detection",storageKey:null}],storageKey:null},{fragment:{argumentDefinitions:t,kind:"Fragment",metadata:null,name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[a,n,r,o,c,p,m,_,{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[y,f],storageKey:null},b,S,w],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[a,n,r,o,c,p,m,_,{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[y,f,P={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},b,S,w,P],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"67eedd3e1834ee184411ff81c5eeea7cf9dc9ec53a5e099459966ce5369828ee",metadata:{},name:"MobileFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}});I.hash="1647166e8b02809a5f8ccfca2dc5019a",e.exports=I,function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let t=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[t]=e}}}(I.default||I)},781426:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileFlashlightPage_pin",selections:[{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"detection",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"UnifiedPinRep_pin"}],type:"Pin",abstractKey:null};t.hash="97621a830643ac50c2f15e7aa19a3b57",e.exports=t},468852:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsImageContent_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"FlashlightCropperContainer_pin"}],type:"Pin",abstractKey:null};t.hash="63b7c7cb48b269ec7bd096ebb0e37dfb",e.exports=t},482495:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsPageWithData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForRelatedProducts",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetInitialCropArea_pin"},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsImageContent_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsUnifiedFeed_pin"}],type:"Pin",abstractKey:null};t.hash="dcd02fa7b3bcd48f4e3b8376109da44f",e.exports=t},966498:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsUnifiedFeed_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};t.hash="12c4e9ff114eb53a8da6ef7727d72985",e.exports=t},282167:e=>{"use strict";var t={argumentDefinitions:[{defaultValue:!1,kind:"LocalArgument",name:"skipUnauthFragment"}],kind:"Fragment",metadata:null,name:"StructuredFeedStoryModule_story",selections:[{alias:null,args:null,concreteType:"StoryAction",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"location",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"containerType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"contentIds",storageKey:null},{alias:null,args:null,concreteType:"StoryDisplayOptions",kind:"LinkedField",name:"displayOptions",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryContentDisplay",kind:"LinkedField",name:"contentDisplay",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"componentType",storageKey:null}],storageKey:null}],storageKey:null},{alias:"storyId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{args:[{kind:"Variable",name:"skipUnauthFragment",variableName:"skipUnauthFragment"}],kind:"FragmentSpread",name:"CarouselModule_story"},{args:null,kind:"FragmentSpread",name:"HeaderModule_story"}],type:"Story",abstractKey:null};t.hash="058a61f5e0b72dbde337960de273d6a5",e.exports=t},676684:e=>{"use strict";var t,i,a,n,r,l,s,o,d,c,u,p,h,m,g,_,y,f,x,v,b,S,w,P,I,T,k,E,j,A,C,F,R,D,O,L,M,N,Z,K,z,H,U,B,G,$,V,W,Y,q,X,Q,J,ee,et=(t=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],i=[{kind:"Variable",name:"pin",variableName:"pinId"}],a={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"isEligibleForRelatedProducts",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"repinCount",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},y={alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null},{alias:null,args:null,concreteType:"AnnotationsWithLinks",kind:"LinkedField",name:"annotationsWithLinksArray",plural:!0,selections:[g={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],storageKey:null},f={alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null},w=[x={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null}],P=[a,x,v,b,S],I={alias:null,args:null,kind:"ScalarField",name:"imageThumbnailUrl",storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},F={alias:"imageOrig",args:k=[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:C=[E={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},_,j={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null}],storageKey:'images(spec:"orig")'},D={alias:"image564x",args:R=[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:C,storageKey:'images(spec:"564x")'},L={alias:"image736x",args:O=[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:C,storageKey:'images(spec:"736x")'},N={alias:"image474x",args:M=[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:C,storageKey:'images(spec:"474x")'},K={alias:"image236x",args:Z=[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:C,storageKey:'images(spec:"236x")'},z={alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"detection",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null},H={alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"inStock",storageKey:null}],storageKey:null},B={alias:"additionalImageOrig",args:k,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:U=[n,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:[A,_,E],storageKey:null}],storageKey:'additionalImagesPerSpec(spec:"orig")'},Y={alias:null,args:null,kind:"ScalarField",name:"canonicalImages",storageKey:null},q={alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[r,o,{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[g,{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MakeCardTutorialMetadata",kind:"LinkedField",name:"tutorial",plural:!1,selections:[g,j],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[g,H,B,G={alias:"additionalImage564x",args:R,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:U,storageKey:'additionalImagesPerSpec(spec:"564x")'},$={alias:"additionalImage736x",args:O,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:U,storageKey:'additionalImagesPerSpec(spec:"736x")'},V={alias:"additionalImage474x",args:M,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:U,storageKey:'additionalImagesPerSpec(spec:"474x")'},W={alias:"additionalImage236x",args:Z,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:U,storageKey:'additionalImagesPerSpec(spec:"236x")'},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[{alias:null,args:null,concreteType:"AdditionalImages",kind:"LinkedField",name:"additionalImages",plural:!0,selections:[n,Y],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},X={alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[g,H,B,G,$,V,W,{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[{alias:null,args:null,concreteType:"AdditionalImages",kind:"LinkedField",name:"additionalImages",plural:!0,selections:[Y,n],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},J=[x,v,b,S,Q={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],ee=[a,x,v,b,S,Q],{fragment:{argumentDefinitions:t,kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[a,n,r,l,s,o,d,c,u,p,h,m,y,{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[f],storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:w,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:w,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:P,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:P,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:P,storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[a,I,g,T,_],storageKey:null},F,D,L,N,K,z,q,X],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[a,n,r,l,s,o,d,c,u,p,h,m,y,{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[f,Q],storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:J,storageKey:null},Q],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:J,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:ee,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:ee,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:ee,storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[a,I,g,T,_,Q],storageKey:null},F,D,L,N,K,z,q,X,Q],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"5f09d38fcc19ea4defe9a2ced0ea73c23f12ec0bc0e6d4bd4f24974e35d6e8ea",metadata:{},name:"UnauthDesktopFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}});et.hash="41066749b18be6f77425904cd44e3d69",e.exports=et,function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let t=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[t]=e}}}(et.default||et)},875666:e=>{"use strict";var t={argumentDefinitions:[{defaultValue:!1,kind:"LocalArgument",name:"skipUnauthFragment"}],kind:"Fragment",metadata:null,name:"UnifiedPinRep_pin",selections:[{args:[{kind:"Variable",name:"skipUnauthFragment",variableName:"skipUnauthFragment"}],kind:"FragmentSpread",name:"PinRep_pin"}],type:"Pin",abstractKey:null};t.hash="ef57e3f96ab6a0ba7ea79d9d2bb3c326",e.exports=t},161186:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetInitialCropArea_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"}],type:"Pin",abstractKey:null};t.hash="120ad104e33b94ab10be1098dc10d74b",e.exports=t},469656:e=>{"use strict";var t,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetNormalizedPinImage_pin",selections:[{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"236x")'}],type:"Pin",abstractKey:null};i.hash="3d7a6d04f923d00acfb2887f852aea16",e.exports=i},270643:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useLogSwipe_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};t.hash="dbfca9820e0aa1302554a0137a270b16",e.exports=t},47737:e=>{"use strict";var t,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useNormalizePinData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:t=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:t,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null}],type:"Pin",abstractKey:null};i.hash="01a93671cde480baa2cfd8b781589acd",e.exports=i},460863:e=>{"use strict";var t,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinImageUrls_pin",selections:[{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"60x60")'},{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"170x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"236x")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"474x")'},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"736x")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"600x315")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"orig")'}],type:"Pin",abstractKey:null};i.hash="b7ea441f2c20a68b323088ebe3847835",e.exports=i},269458:(e,t,i)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin/[id]/visual-search"]=function(){return i(434788).Z}},361259:(e,t,i)=>{"use strict";i.d(t,{$:()=>c,r:()=>u});var a=i(667294),n=i(425288),r=i(497529),l=i(780280),s=i(829407),o=i(785893);let{Provider:d,useHook:c}=(0,n.Z)("PinRep");function u({children:e}){let{isAuthenticated:t}=(0,l.B)(),[i,n]=(0,a.useState)(!0),[c,u]=(0,a.useState)(!1),p=(0,r.Z)(1000069);(0,s.Z)(()=>{let e=async()=>{if(!t){n(!1);return}let e=await p.fetchAllExperiences();e&&e.payload&&e.payload.experiences?.[1000069]?.experience_id===500417&&e.payload.experiences?.[1000069]?.display_data.hide_footer?p.viewExperience(1000069,500417):n(!1),u(!0)};e()});let h=(0,a.useMemo)(()=>({hasSimplifiedPinGridExpLoaded:c,hidePinRepFooter:i}),[c,i]);return(0,o.jsx)(d,{value:h,children:e})}},187638:(e,t,i)=>{"use strict";function a(e){switch(e){case"flashlight":return"flashlight";case"stela":return"stela";case"stl":return"stl";default:return null}}function n({isShopTheLook:e,showFlashlightButton:t,showShopButton:i,showStelaDots:a}){return t&&!a?"flashlight":i?e?"stl":"stela":null}i.d(t,{W:()=>a,Z:()=>n})},813982:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var a=i(667294),n=i(883119),r=i(890921),l=i(407043),s=i(356997),o=i(898781),d=i(829407),c=i(865607),u=i(143649),p=i(785893);function h({cropSource:e,filterOptions:t,filterType:i,handleFilterChange:h,title:m,viewParameter:g,viewType:_}){let{logContextEvent:y}=(0,l.v)(),f=(0,o.ZP)(),x=(0,r.Z)(),[v]=(0,a.useState)(""),[b,S]=(0,a.useState)(!0),w=x?14325:13469,P=()=>{y({aux_data:{commerce_data:JSON.stringify({source:(0,u.Z)({cropSource:e,viewType:_})}),filter_type:i},component:w,event_type:13,view_parameter:g,view_type:_})};(0,d.Z)(()=>{P()});let I=a=>{let n=t[a];y({aux_data:{commerce_data:JSON.stringify({filter_value:n.string_value??n.numeric_value??n.search_type,select:!n.checked,source:(0,u.Z)({cropSource:e,viewType:_})}),filter_type:i},component:w,event_type:101,view_parameter:g,view_type:_}),h(a)};return(0,p.jsxs)(a.Fragment,{children:[(0,p.jsx)(n.xu,{marginBottom:2,children:(0,p.jsxs)(n.kC,{alignItems:"center",justifyContent:"between",children:[(0,p.jsx)(n.xv,{weight:"bold",children:m||f.bt("Sellers", "Sellers", "ProductFilters.Domains.HeaderText", undefined, true)}),(0,p.jsx)(n.xu,{flex:"none",children:(0,p.jsx)(n.hU,{accessibilityLabel:f.bt("Domain filter", "Domain filter", "accessibility label for the icon button to open or close domain filter", undefined, true),icon:b?"arrow-up":"arrow-down",iconColor:"darkGray",onClick:()=>{S(!b),y({aux_data:{commerce_data:JSON.stringify({filter:b?"collapsed":"expanded"}),filter_type:i},component:w,element:x?13522:11547,event_type:101,view_parameter:g,view_type:_}),b||P()},size:"sm"})})]})}),b?(0,p.jsx)(a.Fragment,{children:t.map((e,t)=>e.label.toLowerCase().includes(v.toLowerCase())&&(0,p.jsx)(n.iP,{onTap:()=>I(t),children:(0,p.jsxs)(n.xu,{alignItems:"center","data-test-id":"multi-select-option",direction:"row",display:"flex",marginBottom:3,children:[(0,p.jsx)(n.xu,{marginEnd:3,children:(0,p.jsx)(s.qE,{name:e.label||"",size:"sm",src:e.image_url})}),(0,p.jsxs)(n.kC,{alignItems:"center",direction:"row",flex:"grow",children:[(0,p.jsx)(n.xv,{children:e.label}),e.is_verified_merchant&&(0,p.jsx)(n.xu,{marginStart:1,children:(0,p.jsx)(c.Z,{isVerifiedMerchant:!0,size:"xs"})})]}),(0,p.jsx)(n.xu,{"data-test-id":e.checked?"option-selected":void 0,margin:-2,marginBottom:-3,marginTop:-3,children:(0,p.jsx)(n.hU,{accessibilityLabel:f.bt("Domain filter option", "Domain Filter Option", "Accessibility label for radio button of domain filter choices", undefined, true),icon:e.checked?"check-circle":"circle-outline",iconColor:"darkGray",onClick:()=>I(t),size:"lg"})})]})},e.label))}):(0,p.jsx)(n.xu,{width:"80%",children:(0,p.jsx)(n.xv,{color:"subtle",size:"200",children:function(e=[],t){let i=e.filter(e=>e.checked),a=i.length,n=0===a?t.bt("All", "All", "text indicates that no domain filter is currently applied for filtering", undefined, true):`(${a}) ${i.map(e=>e.label).join(", ")}`;return n}(t,f)})})]})}},914917:(e,t,i)=>{"use strict";i.d(t,{Z:()=>b});var a=i(667294),n=i(883119),r=i(479216),l=i(529518),s=i(780280),o=i(785893);function d(e,t,i,a){let n=(0,l.c3)((0,l.$X)(e,!!t),i,!!t);return a&&(n=n.slice(0,-3)),n}function c({valueInMicroCurrency:e,requestContext:t,currencyCode:i,disableAutoFormatOnChange:s,hasFractionalCents:c,roundValue:u,onValueParsed:p,autoComplete:h,placeholder:m,errorMessage:g,id:_}){let y=i&&r.XD[i]||"",f="";if("number"==typeof e){let i=d(e,c,t.locale,u);f=`${y}${i}`}let[x,v]=(0,a.useState)(f);(0,a.useEffect)(()=>{if(!s&&null!=e&&""===x){let i=d(e,c,t.locale,u);v(i)}},[x,s,c,t,u,e]);let b=(e,i,a,n)=>{let r="";if(null==e)r="";else{let i=d(e,a,t.locale,n);r=`${y}${i}`}return r},S=()=>{let e;let i=(0,l.qq)(x,t.locale,!!c);e=""===x?null:Number.isNaN(i)?Number.MIN_VALUE:(0,l.y)(i,!!c);let a=b(e,x,!!c,u);v(a),p(e)};return(0,o.jsx)(n.nv,{autoComplete:h,errorMessage:g,id:_,onBlur:()=>{S()},onChange:({value:e})=>v(e),placeholder:m,size:"lg",value:x})}function u(e){return(0,o.jsx)(c,{...e,requestContext:(0,s.B)()})}var p=i(898781);function h({CustomMaxField:e,CustomMinField:t,handleMaxChange:i,handleMinChange:r,maxHeading:l,minHeading:s,max:d,min:c}){let u=(0,p.ZP)();return(0,o.jsxs)(a.Fragment,{children:[(0,o.jsxs)(n.kC,{direction:"row",children:[(0,o.jsx)(n.sg,{span:7,children:(0,o.jsx)(n.xv,{size:"200",children:s??u.bt("Min", "Min", "rangeFilter.min", undefined, true)})}),(0,o.jsx)(n.sg,{span:5,children:(0,o.jsx)(n.xv,{size:"200",children:l??u.bt("Max", "Max", "rangeFilter.max", undefined, true)})})]}),(0,o.jsxs)(n.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"center",marginTop:2,children:[(0,o.jsx)(n.sg,{span:5,children:t?(0,o.jsx)(t,{value:c}):(0,o.jsx)(n.Ki,{autoComplete:"off",id:"min",onChange:({value:e})=>{r&&r(e)},size:"lg",value:c})}),(0,o.jsx)(n.sg,{span:2,children:(0,o.jsx)(n.xv,{align:"center",color:"subtle",size:"200",children:u.bt("to", "to", "Min to Max", undefined, true)})}),(0,o.jsx)(n.sg,{span:5,children:e?(0,o.jsx)(e,{value:d}):(0,o.jsx)(n.Ki,{autoComplete:"off",id:"max",onChange:({value:e})=>{i&&i(e)},size:"lg",value:d})})]})]})}var m=i(890921),g=i(407043),_=i(829407),y=i(652519),f=i(143649);function x({children:e,currencyCode:t,defaultMaxPrice:i,defaultMinPrice:l,filterType:s,logViewEvent:d,maxPrice:c,minPrice:u,title:h,viewParameter:_,viewType:y}){let{logContextEvent:f}=(0,g.v)(),x=(0,p.ZP)(),v=(0,m.Z)(),b=r.XD[t]||"",[S,w]=(0,a.useState)(!0),P=v?14324:13468;return(0,o.jsxs)(a.Fragment,{children:[(0,o.jsxs)(n.kC,{alignItems:"center",justifyContent:"between",children:[(0,o.jsx)(n.xu,{"data-test-id":"price-filter-label",children:(0,o.jsx)(n.xv,{weight:"bold",children:h||x.bt("Price", "Price", "Header of product price filter", undefined, true)})}),(0,o.jsx)(n.xu,{flex:"none",children:(0,o.jsx)(n.hU,{accessibilityLabel:x.bt("Price filter", "Price filter", "accessibility label for the icon button to open or close price filter", undefined, true),icon:S?"arrow-up":"arrow-down",iconColor:"darkGray",onClick:()=>{w(!S),f({event_type:101,component:P,element:v?13522:11547,view_type:y,view_parameter:_,aux_data:{commerce_data:JSON.stringify({filter:S?"collapsed":"expanded"}),filter_type:s}}),S||d()},size:"sm"})})]}),S?e:(0,o.jsx)(n.xv,{color:"subtle",size:"200",children:-1===c&&-1===u?x.bt("All", "All", "text indicates that no price filter is currently applied for filtering", undefined, true):-1===c?`${b}${u} – ${b}${Math.ceil(i)}+`:-1===u?`${b}${Math.floor(l)} – ${b}${c}`:`${b}${u} – ${b}${c}`})]})}function v({cropSource:e,currencyCode:t,defaultMaxPrice:i,defaultMinPrice:a,disableAutoFormatOnChange:l,handleMaxPriceChange:s,handleMinPriceChange:d,instructions:c,maxPrice:m,minPrice:g,onRangeChange:_,uiType:f}){let x=(0,p.ZP)(),v=r.XD[t]||"",b=Math.ceil(i),S=Math.floor(a),w=-1===g&&-1===m;return(0,o.jsxs)(n.xu,{paddingY:4,children:["slider"===f&&(0,o.jsx)(y.Z,{cropSource:e,currencyType:t,handlePriceChange:([e,t])=>{_?.(),e!==g&&d(e),t!==m&&s(t)},instructions:c||"",lowerBound:a,maxPrice:m,minPrice:g,upperBound:i}),"number-boxes"===f&&(0,o.jsx)(h,{CustomMaxField:({value:e})=>(0,o.jsx)(n.xu,{"data-test-id":"max-price-filter",children:(0,o.jsx)(u,{autoComplete:"off",currencyCode:t,disableAutoFormatOnChange:l,id:"max_price",onValueParsed:e=>{s((e||0)/1e6)},placeholder:`${v}${b}`,roundValue:!0,valueInMicroCurrency:w?null:e})}),CustomMinField:({value:e})=>(0,o.jsx)(n.xu,{"data-test-id":"min-price-filter",children:(0,o.jsx)(u,{autoComplete:"off",currencyCode:t,disableAutoFormatOnChange:l,id:"min_price",onValueParsed:e=>{d((e||0)/1e6)},placeholder:`${v}${S}`,roundValue:!0,valueInMicroCurrency:w?null:e})}),max:-1===m?1e6*b:1e6*m,maxHeading:x.bt("Max", "Max", "Maximum Price", undefined, true),min:-1===g?1e6*S:1e6*g,minHeading:x.bt("Min", "Min", "Minimum Price", undefined, true)})]})}function b({cropSource:e,currencyCode:t,defaultMaxPrice:i,defaultMinPrice:n,disableAutoFormatOnChange:r,filterType:l,handleMaxPriceChange:s,handleMinPriceChange:d,instructions:c,isCollapsible:u,maxPrice:p,minPrice:h,onRangeChange:y,title:b,uiType:S,viewParameter:w,viewType:P}){let{logContextEvent:I}=(0,g.v)(),T=(0,m.Z)(),k=()=>{I({event_type:13,component:T?14324:13468,view_type:P,view_parameter:w,aux_data:{commerce_data:JSON.stringify({source:(0,f.Z)({cropSource:e,viewType:P})}),filter_type:l}})};return(0,_.Z)(()=>{k()}),(0,o.jsx)(a.Fragment,{children:u?(0,o.jsx)(x,{currencyCode:t,defaultMaxPrice:i,defaultMinPrice:n,filterType:l,logViewEvent:k,maxPrice:p,minPrice:h,title:b,viewParameter:w,viewType:P,children:(0,o.jsx)(v,{cropSource:e,currencyCode:t,defaultMaxPrice:i,defaultMinPrice:n,disableAutoFormatOnChange:r,handleMaxPriceChange:s,handleMinPriceChange:d,instructions:c,isCollapsible:!0,maxPrice:p,minPrice:h,onRangeChange:y,uiType:S})}):(0,o.jsx)(v,{cropSource:e,currencyCode:t,defaultMaxPrice:i,defaultMinPrice:n,disableAutoFormatOnChange:r,handleMaxPriceChange:s,handleMinPriceChange:d,instructions:c,maxPrice:p,minPrice:h,onRangeChange:y,uiType:S})})}},36022:(e,t,i)=>{"use strict";i.d(t,{$:()=>a,v:()=>n});let a=50,n={APPLIED:"applied",CLEARED:"cleared",MODIFIED:"modified",SUBMITTED:"submitted",FAILED:"failed"}},890921:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var a=i(773285),n=i(19121);function r(){let{isAuth:e,country:t}=(0,n.Z)(),{checkExperiment:i}=(0,a.F)();if(!e)return!1;let{anyEnabled:r}=i("web_search_unified_content_filters_international");return"US"===t||r}},180549:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var a=i(616550),n=i(883119),r=i(407043),l=i(558068),s=i(898781),o=i(785893);function d({arrowType:e,pinId:t,viewParameter:i,viewType:d}){let c=(0,s.ZP)(),u=(0,a.k6)(),{previous:p}=(0,l.Hv)(),{logContextEvent:h}=(0,r.v)();return(0,o.jsx)(n.xu,{"data-test-id":"go-back-button",children:(0,o.jsx)(n.hU,{accessibilityLabel:c.bt("Go back", "Go back", "Accessible icon for close button", undefined, true),icon:e??"directional-arrow-left",iconColor:"darkGray",onClick:()=>{if(h({event_type:101,view_type:d,element:34,view_parameter:i}),0===p.length){u.replace(`/pin/${t}/`);return}u.goBack()}})})}},363957:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var a=i(826067);function n(e){let t=(0,a.mB)(e.search),i=parseInt(t.x,10),n=parseInt(t.y,10),r=parseInt(t.w,10),l=parseInt(t.h,10),s=!function(...e){return e.every(Number.isInteger)}(i,n,r,l)?null:{x:i,y:n,w:r,h:l};return s}},862670:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c});var a,n=i(667294);i(167912);var r=i(485019),l=i(916117),s=i(223008),o=i(483205);let d=void 0!==a?a:a=i(161186);function c({pinKey:e}){let t=(0,l.Z)(d,e),{getNormalizedPinImage:i}=(0,s.Z)({pinKey:t,maxWidth:o.RZ}),{width:a,height:c}=i(),u=(0,n.useCallback)(({initialCropArea:e})=>e||{x:r.S,y:r.S,w:a-2*r.S,h:c-2*r.S},[c,a]);return{getInitialCropArea:u}}},175644:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u});var a=i(667294),n=i(883119),r=i(407043),l=i(444445),s=i(745312),o=i(96939),d=i(8742),c=i(785893);function u({action:e,component:t,dangerouslySetActionUrl:i,element:u,contextLogData:p,id:h,objects:m,pwtTrackImageLoad:g,surface:_,viewType:y,viewParameter:f}){let{logContextEvent:x}=(0,r.v)(),v=e?.url&&e.text?a=>(0,c.jsx)(o.Z,{coverImages:a.images,height:l.yF,onClick:()=>x({event_type:101,view_type:y,view_parameter:f,component:t,element:u,aux_data:{story_id:h,...p}}),text:e.text,url:i??e.url,width:l.yF},"actionBubble"):null,{containerRef:b,itemsToRender:S,actionItem:w}=(0,s.n)({items:m,itemWidth:l.yF,itemGap:l.oX,actionItemType:v?"one":void 0});return(0,a.useEffect)(()=>{S.length>0&&g&&g()},[S,g]),(0,c.jsxs)(s.Z,{containerRef:b,itemGap:l.oX,children:[S.map((e,i)=>(0,c.jsx)(n.xu,{"data-grid-item":"true",flex:"none",width:l.yF,children:(0,c.jsx)(d.ZP,{authDesktopSurface:_??"ShoppingDynamicHeightGrid",auxData:p,componentType:t,duploQueryRef:null,pin:e,pinId:e.id,pinImageCrop:{height:l.yF,width:l.yF},slotIndex:i,viewParameter:f,viewType:y})},e.id)),w&&v?.(w)]})}},175892:(e,t,i)=>{"use strict";i.d(t,{Z:()=>K});var a=i(616550),n=i(883119),r=i(407043),l=i(704115),s=i(829407),o=i(667294),d=i(898781),c=i(390598),u=i(214494),p=i(186656),h=i(121151),m=i(499128),g=i(897243),_=i(349700),y=i(784590),f=i(343341),x=i(19121),v=i(487392),b=i(785352),S=i(833991),w=i(977558),P=i(35066),I=i(970023),T=i(785893);let k=new n.H3([new n.Ry(S.HW),new n.Ry(w.fe)]);function E({onFileUpload:e}){let t=(0,d.ZP)(),[i,a]=(0,o.useState)(!1),r=(0,o.useRef)(null),l=t.bt("Upload from computer", "Upload from computer", "ProductGroupDetailsModal.uploadFromComputer", undefined, true);return(0,T.jsxs)(n.kC,{justifyContent:"center",children:[(0,T.jsx)(n.hU,{ref:r,accessibilityExpanded:i,accessibilityHaspopup:!0,accessibilityLabel:t.bt("Upload product group cover image menu", "Upload product group cover image menu", "ProductGroupDetailsModal.productGroupCoverImageA11y", undefined, true),bgColor:"lightGray",icon:"edit",iconColor:"darkGray",onClick:()=>a(e=>!e),size:"lg"}),i&&(0,T.jsx)(n.Lt,{anchor:r.current,disableMobileUI:!0,id:"product-group-image-dropdown",onDismiss:()=>a(!1),children:(0,T.jsx)(n.Lt.Item,{onSelect:()=>{a(!1),e()},option:{value:l,label:l}})})]})}function j({image:e,onFileUpload:t,onError:i}){let a=(0,d.ZP)(),r=a.bt("Product group cover image", "Product Group Cover Image", "ProductGroupDetailsModal.productGroupCoverImageAlt", undefined, true);return(0,T.jsxs)(n.xu,{position:"relative",children:[(0,T.jsx)(n.xu,{height:316,overflow:"hidden",rounding:5,width:316,children:(0,T.jsx)(n.Ee,{alt:r,color:"#EFEFEF",fit:"cover",naturalHeight:1,naturalWidth:1,onError:i,src:e})}),(0,T.jsx)(n.xu,{padding:4,position:"absolute",right:!0,top:!0,children:(0,T.jsx)(E,{onFileUpload:t})})]})}function A({onDismiss:e,onSubmit:t,productGroup:i}){let{logContextEvent:a}=(0,r.v)(),l=(0,d.ZP)(),s=l.bt("Edit product group display", "Edit product group display", "ProductGroupDetailsModal.heading", undefined, true),c=(0,x.Z)(),S=c.id||"",w=`/v3/business/users/${S}/storefront/product_group_image/`,[E,A]=(0,o.useState)(""),[C,F]=(0,o.useState)(""),[R,D]=(0,o.useState)(),[O,L]=(0,o.useState)(),[M,N]=(0,o.useState)(!1),[Z,K]=(0,o.useState)(0),[z]=(0,o.useState)(new Date().getTime()),H=i.groupType!==I.yh,{merchantId:U,advertiserId:B}=(0,v.Z)(),{showOneToast:G}=(0,f.F9)(),{updateStorefrontLastUpdated:$}=(0,P.S)(),V=(0,b.I)({advertiserId:B,merchantId:U,productGroupsIds:[i.entityId],uniq:z},!1,!0),W=(0,y.Z)({name:"ApiResource",options:{url:w,data:{product_group_ids:[i.entityId]},uniq:z},noCache:!0}),Y=(0,o.useRef)(),q=Number(i.entityId),X=V.data?.find(e=>e.id===q),Q=V.isLoaded&&W.isLoaded,J=X&&(E!==X.name||C!==(X.description||"")||!!R),ee=X&&E!==X.name,et=X&&C!==(X.description||""),ei=Q&&((W.data?.[i.entityId]||{})[0]||{}),ea=ei?(0,I.cB)((0,g.b)(ei)):null,en=i.previewPins?.[0]||{},er=en.imageSignature,el=en.images&&(0,I.cB)(en.images),es=O||[ea,el].filter(e=>!!e)[Z];(0,o.useEffect)(()=>{X&&(A(X.name||""),F(X.description||""))},[X]),(0,o.useEffect)(()=>{a({event_type:9854,component:13998})},[a]);let eo=()=>{e(),a({event_type:9856,component:13998})},ed=l.bt("Save", "Save", "ProductGroupDetailsModal.SaveBtn", undefined, true),ec=l.bt("Cancel", "Cancel", "ProductGroupDetailsModal.CancelBtn", undefined, true);return(0,T.jsx)(n.mh,{zIndex:k,children:(0,T.jsx)(h.ZP,{accessibilityModalLabel:s,align:"center",footer:Q?(0,T.jsxs)(n.kC,{alignItems:"start",children:[(0,T.jsx)(n.xu,{width:"50%",children:(0,T.jsx)(n.xv,{size:"300",children:(0,_.nk)(l.bt("To edit items in this product group, visit {{catalogsLink}}", "To edit items in this product group, visit {{catalogsLink}}", "ProductGroupDetailsModal.coverImage", undefined, true),{catalogsLink:(0,T.jsx)(n.rU,{display:"inlineBlock",href:"/product-catalogs",target:"blank",underline:"hover",children:(0,T.jsx)(n.xv,{inline:!0,weight:"bold",children:l.bt("Pinterest Catalogues", "Pinterest Catalogs", "ProductGroupDetailsModal.catalogsLink", undefined, true)})},"product-catalogs-link")})})}),(0,T.jsx)(n.xu,{width:"50%",children:(0,T.jsxs)(n.kC,{alignItems:"center",gap:{row:2,column:0},justifyContent:"end",children:[(0,T.jsx)(n.zx,{color:"gray",onClick:eo,text:ec}),(0,T.jsx)(n.zx,{color:"red",disabled:!J,onClick:()=>{let n=ea?R:R||er,r=[],s=[];n&&(r.push((0,p.Z)({url:w,method:"PUT",data:{image_signatures:[n],product_group_id:i.entityId}})),s.push("cover_image")),(ee||et)&&(r.push(u.Z.create("ProductGroupsResource",{name:E,description:C,productGroupId:Number(i.entityId),filters:X?.filter_v2}).callUpdate()),ee&&s.push("name"),et&&s.push("description")),a({event_type:9857,component:13998,aux_data:{product_group_modal_changes:s.join(",")}}),e(),Promise.all(r).then(()=>{t(),$(new Date().getTime()),G(({hideToast:e})=>(0,T.jsx)("div",{className:"ProductGroupSavedToast",children:(0,T.jsx)(m.ZP,{duration:I.QE,onHide:e,text:l.bt("Product group saved", "Product group saved", "MerchantStorefront.ProductGroupDetailsModal.pgSaved", undefined, true)})}))})},text:ed})]})})]},"product-group-details-footer"):(0,T.jsx)(o.Fragment,{}),heading:s,onDismiss:eo,size:H?"md":"sm",children:(0,T.jsx)(n.xu,{marginBottom:2,paddingX:8,children:Q?(0,T.jsxs)(n.kC,{justifyContent:"center",children:[(0,T.jsxs)(n.xu,{width:320,children:[(0,T.jsx)(n.xu,{marginBottom:4,children:(0,T.jsx)(n.xv,{size:"300",weight:"bold",children:l.bt("Cover image", "Cover image", "ProductGroupDetailsModal.coverImage", undefined, true)})}),(0,T.jsx)("input",{ref:Y,accept:"image/*","data-test-id":"cover-image",id:"product-group-image-upload",onChange:e=>{if(e.target instanceof HTMLInputElement){let t=e.target.files[0],i=new FileReader;t&&i.readAsDataURL(t),i.addEventListener("load",()=>{N(!0),a({event_type:9855,component:13998}),(0,p.Z)({url:w,method:"POST",data:{image_base64:i.result}}).then(e=>{D(e.resource_response.data?.image_signature),N(!1),"string"==typeof i.result&&L(i.result)})},!1)}},style:{display:"none"},type:"file"}),M&&(0,T.jsx)(n.xu,{color:"secondary",direction:"column",display:"flex",height:316,justifyContent:"center",rounding:5,width:316,children:(0,T.jsx)(n.$j,{accessibilityLabel:l.bt("Uploading product group cover image", "Uploading product group cover image", "ProductGroupDetailsModal.uploadingCoverImage", undefined, true),show:!0})}),!M&&es&&(0,T.jsx)(j,{image:es,onError:()=>K(Z+1),onFileUpload:()=>{Y.current?.click()}})]}),H&&(0,T.jsxs)(n.xu,{marginStart:4,width:320,children:[(0,T.jsx)(n.xu,{marginBottom:4,children:(0,T.jsx)(n.xv,{size:"300",weight:"bold",children:l.bt("Title", "Title", "ProductGroupDetailsModal.name", undefined, true)})}),(0,T.jsx)(n.nv,{id:"name",onChange:({value:e})=>A(e.slice(0,255)),size:"lg",type:"text",value:E}),(0,T.jsxs)(n.xu,{height:30,marginBottom:4,marginTop:2,children:[E&&(0,T.jsx)(n.xv,{color:"subtle",size:"100",children:l.bt("Changing your product group's name in your shop will also change its name in Catalogues", "Changing your product group's name in your shop will also change its name in Catalogs", "ProductGroupDetailsModal.pgName", undefined, true)}),!E&&(0,T.jsx)(n.xv,{color:"error",size:"100",children:l.bt("This field cannot be blank.", "This field can't be blank!", "ProductGroupDetailsModal.nameEmptyError", undefined, true)})]}),(0,T.jsx)(n.xu,{marginBottom:4,children:(0,T.jsx)(n.xv,{size:"300",weight:"bold",children:l.bt("Description", "Description", "ProductGroupDetailsModal.description", undefined, true)})}),(0,T.jsx)(n.xu,{height:178,children:(0,T.jsx)(n.Kx,{id:"description",onChange:({value:e})=>F(e.slice(0,155)),placeholder:l.bt("Tell shoppers on Pinterest more about this product group", "Tell shoppers on Pinterest more about this product group", "ProductGroupDetailsModal.descriptionPlaceholder", undefined, true),rows:7,value:C})})]})]}):(0,T.jsx)(n.$j,{accessibilityLabel:l.bt("Loading product group details", "Loading product group details", "ProductGroupDetailsModal.loadingSpinner", undefined, true),show:!0})})})})}let C=()=>{},F=({url:e,onClick:t,i18n:i})=>(0,T.jsx)(n.ZP,{accessibilityLabel:i.bt("Shop button", "Shop button", "ProductGroupV2.shopButton.accessibilityLabel", undefined, true),color:"white",href:e,onClick:t,size:"lg",text:i.bt("Shop", "Shop", "ProductGroupV2.shopButton.text", undefined, true)}),R=({i18n:e})=>(0,T.jsx)(n.zx,{accessibilityLabel:e.bt("Shop button", "Shop button", "ProductGroupV2.shopButton.accessibilityLabel", undefined, true),color:"white",size:"lg",text:e.bt("Shop", "Shop", "ProductGroupV2.shopButton.text", undefined, true)});function D({onClick:e,productGroup:t,showControls:i,url:a}){let r=(0,d.ZP)(),l=r.bt("Edit product group display", "Edit product group display", "ProductGroupV2.editTooltip", undefined, true),[s,u]=(r.bt("Remove product group from shop", "Remove product group from shop", "ProductGroupV2.removeTooltip", undefined, true),(0,o.useState)(!1)),[p,h]=(0,o.useState)(!1),m=!!(a&&e),{WIDTH:g,HEIGHT:_}=c.PRODUCT_GROUP_COVER_IMAGE_DIMENSIONS,y=g-64;return(0,T.jsxs)(n.xu,{onMouseEnter:()=>{h(!0)},onMouseLeave:()=>{h(!1)},position:"relative",children:[(0,T.jsxs)(n.xu,{position:"relative",children:[(0,T.jsxs)(n.zd,{height:_,rounding:8,width:g,children:[(0,T.jsx)(c.Z,{productGroup:{coverImages:t.coverImages,groupType:t.groupType,previewPins:t.previewPins?.map(e=>({imageSignature:e.imageSignature,images:e.images}))}}),(0,T.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{background:"linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.4) 100%)"}},height:_,position:"absolute",top:!0,width:g})]}),(0,T.jsx)(n.xu,{color:"selected",height:_,opacity:p?.5:0,position:"absolute",rounding:8,top:!0,width:g})]}),i&&p&&(0,T.jsxs)(n.xu,{display:"flex",padding:8,position:"absolute",right:!0,top:!0,children:[(0,T.jsx)(n.xu,{marginEnd:0,children:(0,T.jsx)(n.u,{idealDirection:"down",text:l,children:(0,T.jsx)(n.hU,{accessibilityLabel:l,bgColor:"lightGray",icon:"edit",iconColor:"darkGray",onClick:({event:e})=>{e.stopPropagation(),e.preventDefault(),u(!0)},size:"xl"})})}),!1]}),(0,T.jsxs)(n.xu,{bottom:!0,left:!0,padding:8,position:"absolute",children:[(0,T.jsx)(n.xu,{marginBottom:5,maxWidth:y,children:(0,T.jsx)(n.X6,{color:"inverse",lineClamp:2,size:"600",children:t.name})}),p&&(0,T.jsx)(n.xu,{marginBottom:5,maxWidth:y,children:(0,T.jsx)(n.xv,{color:"inverse",size:"300",children:t.description})}),!m&&(0,T.jsx)(R,{i18n:r}),m&&(0,T.jsx)(F,{i18n:r,onClick:e??C,url:a??""})]}),i&&s&&(0,T.jsx)(A,{onDismiss:()=>u(!1),onSubmit:()=>u(!1),productGroup:{entityId:t.entityId,groupType:t.groupType,previewPins:t.previewPins?.map(e=>({imageSignature:e.imageSignature,images:e.images}))}})]})}var O=i(717615),L=i(231947),M=i(151645),N=i(436395),Z=i(316674);function K({productGroup:e,slotIndex:t}){let{logContextEvent:i}=(0,r.v)(),{data:o}=(0,N.Z)(),{search:d}=(0,a.TH)(),{pin:c}=(0,l.Z)(d),u=c?"pdp":"profile",p=o?.username,h=function(){let{ownProfile:e}=function(){let{data:e}=(0,N.Z)(),t=(0,x.Z)(),i=(0,M.Z)({user:e,viewer:t}),a=(0,O.Z)(),n=(0,L.q6)(t,e?.id,a);return{isORBACProfileManager:n,ownProfile:i}}();return e}();if((0,s.Z)(()=>{Z.Z.StructuredFeed.ProductGroups.viewProductGroup({productGroupId:e.entityId,source:u,groupType:e.groupType??"",componentType:13698},i)}),!p)return null;let m=`/${p}/_shop/${e.entityId}/`;return(0,T.jsx)(n.Tg,{href:m,onTap:()=>{Z.Z.StructuredFeed.ProductGroups.tapProductGroup({productGroupId:e.entityId,source:u,groupType:e.groupType??"",componentType:13698,index:t},i)},children:(0,T.jsx)(D,{productGroup:e,showControls:h})})}},288562:(e,t,i)=>{"use strict";i.d(t,{M:()=>f,Z:()=>x});var a=i(667294),n=i(883119),r=i(180549),l=i(898781),s=i(349700),o=i(773285),d=i(994912),c=i(427806),u=i(785893);function p({title:e,variant:t}){let i=(0,l.ZP)(),{checkExperiment:r}=(0,o.F)(),{anyEnabled:p}=r("web_unified_visual_feed"),h={default:(0,s.nk)(i.bt("Shop for {{ category }}", "Shop {{ category }}", "relatedProducts.stela.header", undefined, true),{category:(e||"").toLowerCase()}).join("").trim(),"unified-feed":(0,s.nk)(i.bt("{{ category }}", "{{ category }}", "unifiedHeader.stela.header", undefined, true),{category:(0,d.Z)(e||"")}).join("").trim(),"closeup-shop":"","unified-feed-no-label":"","closeup-shop-idea-pin":i.bt("Shop for similar items", "Shop similar items", "relatedProducts.header", undefined, true),"related-products":"",flashlight:e,"shop-module":""},m={"closeup-shop":i.bt("Shop for similar items", "Shop similar items", "relatedProducts.header", undefined, true),"unified-feed":"","unified-feed-no-label":"","related-products":i.bt("More to shop for", "More to shop", "relatedProducts.header", undefined, true),"closeup-shop-idea-pin":i.bt("Shop for similar items", "Shop similar items", "relatedProducts.header", undefined, true),flashlight:"","shop-module":i.bt("Shop the Look", "Shop the look", "shopTheLook.header", undefined, true)},g=e?h[["flashlight","unified-feed","closeup-shop-idea-pin","shop-module"].includes(t)?t:"default"]:m[t];return(0,u.jsx)(a.Fragment,{children:g?(0,u.jsx)(n.X6,{accessibilityLevel:1,size:p&&"flashlight"!==t?"500":"400",children:g}):(0,u.jsx)(c.Z,{text:i.bt("Related products page", "Related products page", "relatedProducts.unifiedFeed.accessibilityhiddenheading", undefined, true)})})}var h=i(407043),m=i(124580),g=i(780280),_=i(167234);function y({buttonText:e,handleDrawerClose:t,isDrawerOpen:i,onClick:a,largeSize:r=!1,reversed:s=!1,invertWhenDrawerIsOpen:o=!1,hasProductFiltersApplied:d=!1}){let c=(0,l.ZP)(),p=o&&i,h=(0,u.jsx)(n.JO,{accessibilityLabel:"",color:p?"light":"dark",icon:"filter"},"filterIcon"),m=e&&(0,u.jsx)(n.xv,{align:"center",color:p?"inverse":"default",weight:"bold",children:e},e);return(0,u.jsx)(n.iP,{accessibilityLabel:c.bt("Filter", "Filter", "productsFilterButton", undefined, true),onTap:()=>{i?t():a()},rounding:"pill",children:(0,u.jsxs)(n.xu,{position:"relative",children:[(0,u.jsx)(n.xu,{alignContent:"center",color:p?"dark":"secondary",dangerouslySetInlineStyle:r?{__style:{padding:"18px"}}:void 0,display:"flex",justifyContent:"center",minHeight:40,paddingX:4,rounding:"pill",children:(0,u.jsx)(n.kC,{alignItems:"center",gap:{row:2,column:0},children:s?[m,h]:[h,m]})}),d&&(0,u.jsx)(n.xu,{alignItems:"center",color:"selected",dangerouslySetInlineStyle:{__style:{border:"2px solid white"}},display:"flex",height:14,justifyContent:"center",minWidth:14,position:"absolute",right:!0,rounding:"pill",top:!0})]})})}let f=60;function x({filtersText:e,handleDrawerClose:t,handleDrawerOpen:i,isDrawerOpen:l,isProductOnlyFeed:s,pinId:o,showFilter:d,title:c,variant:x,viewParameter:v,viewType:b}){let{logContextEvent:S}=(0,h.v)(),{isRTL:w}=(0,g.B)(),P=(0,a.useRef)(null);(0,a.useEffect)(()=>(d&&S({event_type:120,view_type:b,component:13467,element:11735,view_parameter:v}),P.current&&m.Z.addObstruction("top",P.current),()=>{P.current&&m.Z.removeObstruction("top",P.current)}),[d]);let I=()=>{S({event_type:101,view_type:b,component:13467,element:11735,view_parameter:v}),i&&i()};return(0,u.jsx)(_.Z,{position:"fixed",style:{width:"100%",zIndex:3,backgroundColor:"#ffffff"},children:(0,u.jsxs)(n.xu,{ref:P,alignItems:"center",color:"default","data-test-id":"related-products-header",display:"flex",height:f,justifyContent:"center",paddingY:4,position:"absolute",top:!0,width:"100%",children:[(0,u.jsx)(n.xu,{left:!w,marginStart:5,position:"absolute",right:w,children:(0,u.jsx)(r.Z,{arrowType:s?"directional-arrow-left":"cancel",pinId:o,viewParameter:v,viewType:b})}),(0,u.jsx)(p,{title:c,variant:x}),d&&"boolean"==typeof l&&I&&e&&t&&(0,u.jsx)(n.xu,{"data-test-id":"filter-button",left:w,marginEnd:12,position:"absolute",right:!w,children:(0,u.jsx)(y,{buttonText:e,handleDrawerClose:t,isDrawerOpen:l,onClick:I})})]})})}},515631:(e,t,i)=>{"use strict";i.d(t,{l:()=>ee,Z:()=>ei});var a,n,r=i(667294);i(167912);var l=i(616550),s=i(883119),o=i(187638),d=i(862670),c=i(865686),u=i(288562),p=i(352870),h=i(916117),m=i(276602),g=i(297852),_=i(785893);let y=void 0!==a?a:a=i(468852);function f({cropArea:e,description:t,surfaceType:i,height:a,imageSignature:n,imageUrl:r,pinKey:o,requestParams:d,trafficSource:c,viewParameter:u,width:f}){let x=(0,l.k6)(),v=(0,m.E)(),b=(0,h.Z)(y,o);return(0,_.jsx)(s.xu,{"data-test-id":"flashlight-enabled-image",height:a,overflow:"hidden",rounding:4,width:f,children:(0,_.jsxs)(s.zd,{height:a,width:f,children:[(0,_.jsx)(s.Ee,{alt:t,naturalHeight:a,naturalWidth:f,onLoad:()=>{v&&v.markConstraintComplete("visualSearchMainPinImageRender")},src:r}),(0,_.jsx)(p.Z,{customCropper:({origCrop:e,cropSource:t,title:a})=>{let n=window.location.pathname+window.location.search,r=(0,g.Z)({cropArea:e,cropSource:t,isProductPage:!1,pinId:b.entityId,requestParams:d,surfaceType:i,title:a,trafficSource:c});r!==n&&x.replace(r)},imageSignature:n,imageSize:{h:a,w:f},initialCropArea:e,pinKey:b,showAnimation:!1,viewParameter:u})]})})}var x=i(407373),v=i(83053),b=i(647945),S=i(407043),w=i(223008),P=i(773285),I=i(42447),T=i(780280),k=i(483205),E=i(700380),j=i(430323),A=i(826067),C=i(280446),F=i(829407),R=i(307603),D=i(255164),O=i(975540),L=i(94047),M=i(985057),N=i(873476),Z=i(697335),K=i(12755),z=i(36022),H=i(813982),U=i(914917),B=i(898781),G=i(143649);function $({categoryFilters:e,cropSource:t,handleCategoryChange:i,viewParameter:a,viewType:n}){let{logContextEvent:l}=(0,S.v)(),o=(0,B.ZP)(),[d,c]=(0,r.useState)(!0);return(0,_.jsxs)(r.Fragment,{children:[(0,_.jsxs)(s.kC,{alignItems:"center",justifyContent:"between",children:[(0,_.jsx)(s.xv,{weight:"bold",children:o.bt("Product category", "Product category", "filter.category.header", undefined, true)}),(0,_.jsx)(s.xu,{flex:"none",children:(0,_.jsx)(s.hU,{accessibilityLabel:o.bt("Product category", "Product category", "filter.category.button", undefined, true),icon:d?"arrow-up":"arrow-down",iconColor:"darkGray",onClick:()=>{c(!d),l({event_type:101,component:13535,element:11547,view_type:n,view_parameter:a,aux_data:{commerce_data:JSON.stringify({filter:d?"collapsed":"expanded"})}}),d||l({event_type:13,component:13535,view_type:n,view_parameter:a,aux_data:{commerce_data:JSON.stringify({source:(0,G.Z)({cropSource:t,viewType:n})})}})},size:"sm"})})]}),d?(0,_.jsx)(r.Fragment,{children:e.slice(0,5).map((e,t)=>(0,_.jsxs)(s.xu,{alignItems:"center",direction:"row",display:"flex",marginBottom:3,children:[(0,_.jsx)(s.xu,{flex:"grow",children:(0,_.jsx)(s.xv,{children:e.label.charAt(0).toUpperCase()+e.label.slice(1)})}),(0,_.jsx)(s.xu,{children:(0,_.jsx)(s.hU,{accessibilityLabel:o.bt("Category filter option", "Category Filter Option", "filter.category.option", undefined, true),icon:e.checked?"check-circle":"circle-outline",iconColor:"darkGray",onClick:()=>i(t),size:"sm"})})]},e.label))}):(0,_.jsx)(s.xu,{width:"80%",children:(0,_.jsx)(s.xv,{color:"subtle",size:"200",children:function(e=[],t){let i=e.filter(e=>e.checked),a=i.length,n=0===a?t.bt("All", "All", "filter.category.applied", undefined, true):`(${a}) ${i.map(e=>e.label).join(", ")}`;return n}(e,o)})})]})}var V=i(144226);function W(e,t){return e.filter(e=>e.checked).map(e=>e[t]).join(",")}function Y(e){return e.map(e=>({...e,checked:!1}))}function q({listOfAvailableFiltersFromAPI:e,appliedFilterValues:t,key:i,component:a,viewType:n,viewParameter:l}){let{logContextEvent:s}=(0,S.v)(),[o,d]=(0,r.useState)([]),[c,u]=(0,r.useState)(""),[p,h]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{if(e){let a=Y(e),n=t?function(e,t,i){if(e){let a=decodeURI(e).split(",");return t.map(e=>a.includes(e[i])?{...e,checked:!0}:e)}return t}(t,a,i):a;d(n);let r=W(n,i);u(r)}},[e,t,i]),{filters:o,setFilters:d,submittedFilters:c,submitFilters:function(e){e!==c&&s({event_type:7472,component:a,view_type:n,view_parameter:l}),u(e),h(!1)},isFilterChanged:p,clearFilters:()=>Y(o),getSelected:e=>W(e,i),handleFilterChange:function({index:e,pinId:t,auxCommerceData:r}){let u=!o[e].checked,p=[...o.slice(0,e),{...o[e],checked:u},...o.slice(e+1)];d(p),h(c!==W(p,i)),s({event_type:101,component:a,element:11548,view_type:n,view_parameter:l,aux_data:{pin_id:t,commerce_data:JSON.stringify({[i]:o[e][i],select:u,...r})}})}}}function X({categoryFilters:e,domainFilters:t,minPrice:i,maxPrice:a},n){let r=n.bt("Filters", "Filters", "Filter icon button to open drawer containing price filter and domain filters on related products feed", undefined, true),l=function({categoryFilters:e,domainFilters:t,minPrice:i,maxPrice:a}){let n=t?t.split(",").length:0,r=e?e.split(",").length:0;return(a||i?1:0)+n+r}({categoryFilters:e,domainFilters:t,minPrice:i,maxPrice:a}),s=l>0?` (${l})`:"";return`${r}${s}`}function Q({categoryFilters:e,cropSource:t,domainFilters:i,drawerHeight:a,handleFilterChange:n,onSubmit:l,pinId:o,priceFilters:d,submittedFilters:c,updateButtonText:u,width:p,viewParameter:h,viewType:m}){let{logContextEvent:g}=(0,S.v)(),y=(0,B.ZP)();(0,F.Z)(()=>{g({event_type:13,component:13467,view_type:m,view_parameter:h,aux_data:{commerce_data:JSON.stringify({source:(0,G.Z)({cropSource:t,viewType:m})})}})});let{category:f,domain:x,max:v,min:b}=c||{},{filters:w,setFilters:P,submittedFilters:I,submitFilters:T,isFilterChanged:k,clearFilters:E,getSelected:j,handleFilterChange:A}=q({listOfAvailableFiltersFromAPI:i,appliedFilterValues:x,key:"domain",component:13469,viewType:m,viewParameter:h}),{filters:C,setFilters:R,submittedFilters:D,submitFilters:O,isFilterChanged:L,clearFilters:M,getSelected:N,handleFilterChange:Z}=q({listOfAvailableFiltersFromAPI:e,appliedFilterValues:f,key:"label",component:13535,viewType:m,viewParameter:h}),[K,W]=(0,r.useState)(d),[Y,Q]=(0,r.useState)(-1),[J,ee]=(0,r.useState)(-1),[et,ei]=(0,r.useState)(-1),[ea,en]=(0,r.useState)(-1),[er,el]=(0,r.useState)(!1);(0,r.useEffect)(()=>{!d||v&&b||W(d),b&&ee(parseInt(b,10)),v&&Q(parseInt(v,10))},[d,v,b]);let{max_value:es,min_value:eo,currency_type:ed}=K||{},ec=e=>t=>{let i,a;let n=0>(t||0)?0:t;n&&g({event_type:7472,component:13468,view_type:m,view_parameter:h});let r=!1;"max"===e?(i=n||es,-1===(a=J)&&(a=eo),a>i&&(a=Math.max(i-z.$,0))):(a=n||0,-1===(i=Y)&&(i=es),i<a&&(i=a+z.$)),el(r=r||ea!==a||et!==i),ee(a),Q(i)};(0,r.useEffect)(()=>{u&&u(X({categoryFilters:D,domainFilters:I,maxPrice:-1===Y?void 0:Y,minPrice:-1===J?void 0:J},y))},[y,Y,J,K,D,I,u]);let eu=({categoryParam:e,domainParam:t,maxPrice:i,minPrice:a})=>{n({categoryParam:e,domainParam:t,maxPrice:-1!==i?i:void 0,minPrice:-1!==a?a:void 0}),ei(i),en(a),el(!1),(et!==i||ea!==a)&&g({event_type:7472,component:13468,view_type:m,view_parameter:h}),T(t),O(e);let r=-1!==a,s=-1!==i,o=""!==t,d=""!==e,c=r?a.toString():"",p=s?i.toString():"",_=o?encodeURI(t):"",f=d?encodeURI(e):"";l&&l({category:f,domain:_,max:p,min:c}),u&&u(X({categoryFilters:e,domainFilters:t,maxPrice:-1===i?void 0:i,minPrice:-1===a?void 0:a},y))};return(0,_.jsxs)(r.Fragment,{children:[(0,_.jsxs)(s.xu,{direction:"column",display:"flex",height:a-50-70,overflow:"scroll",paddingX:1,paddingY:1,width:"100%",children:[(0,_.jsxs)(s.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:3,children:[(0,_.jsx)(s.xv,{weight:"bold",children:y.bt("Filter", "Filter", "shopping.filter.header", undefined, true)}),(0,_.jsx)(s.zx,{onClick:()=>{Q(-1),ee(-1),P(E()),R(M()),eu({categoryParam:"",domainParam:"",maxPrice:-1,minPrice:-1}),g({event_type:101,component:13467,element:11545,view_type:m,view_parameter:h})},size:"md",text:y.bt("Clear all", "Clear all", "filter.clear.button", undefined, true)})]}),!!K&&(0,_.jsx)(V.Z,{children:(0,_.jsx)(U.Z,{cropSource:t,currencyCode:ed,defaultMaxPrice:es,defaultMinPrice:eo,disableAutoFormatOnChange:!0,handleMaxPriceChange:ec("max"),handleMinPriceChange:ec("min"),maxPrice:Y,minPrice:J,uiType:"slider",viewParameter:h,viewType:m})}),!!C&&C.length>0&&4!==t&&(0,_.jsx)(V.Z,{children:(0,_.jsx)($,{categoryFilters:C,cropSource:t,handleCategoryChange:e=>{Z({index:e,pinId:o})},viewParameter:h,viewType:m})}),!!w&&w.length>0&&(0,_.jsx)(V.Z,{children:(0,_.jsx)(H.Z,{cropSource:t,filterOptions:w,handleFilterChange:e=>{A({index:e,pinId:o,auxCommerceData:{source:(0,G.Z)({cropSource:t,viewType:m})}})},viewParameter:h,viewType:m})})]}),(0,_.jsx)(s.xu,{color:"default",display:"flex",justifyContent:"center",position:"fixed",width:p,children:(0,_.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},direction:"row",display:"flex",paddingY:2,children:(0,_.jsx)(s.xu,{marginStart:2,children:(0,_.jsx)(s.sg,{span:6,children:(0,_.jsx)(s.zx,{color:"red",disabled:!(k||L||er),onClick:()=>{let e=j(w),t=N(C);eu({categoryParam:t,domainParam:e,maxPrice:Y,minPrice:J}),g({event_type:101,component:13467,element:11546,view_type:m,view_parameter:h})},size:"md",text:y.bt("Confirm", "Confirm", "Button to submit all selected filter options", undefined, true),type:"submit"})})})})})]})}function J({categoryFilters:e,cropSource:t,domainFilters:i,isDrawerOpen:a,handleFilterChange:n,handleSubmit:l,pinId:o,priceFilters:d,submittedFilters:c,topOffset:u=0,updateButtonText:p,viewParameter:h=3455,viewType:m}){let g=(0,Z.t)(),y=g+u,[f,x]=(0,r.useState)(0),v=()=>{x(window.innerHeight-g)};return(0,r.useEffect)(()=>(v(),window.addEventListener("resize",v),()=>{window.removeEventListener("resize",v)}),[]),(0,_.jsx)(s.xu,{color:"default",dangerouslySetInlineStyle:{__style:{marginRight:a?0:-K.pG,visibility:a?"visible":"hidden",top:y}},height:f,left:!0,paddingX:K.VF,position:"fixed",width:K.pG,zIndex:new s.Ry(2),children:(0,_.jsx)(Q,{categoryFilters:e,cropSource:t,domainFilters:i,drawerHeight:f,handleFilterChange:n,onSubmit:l,pinId:o,priceFilters:d,submittedFilters:c,updateButtonText:p,viewParameter:h,viewType:m,width:K.pG-K.VF*K.vc*2})})}let ee=65,et=void 0!==n?n:n=i(482495);function ei({pinKey:e}){let t=(0,l.k6)(),{logContextEvent:i}=(0,S.v)(),{checkExperiment:a}=(0,P.F)(),{isRTL:n}=(0,T.B)(),p=(0,h.Z)(et,e),{id:m}=(0,l.UO)(),{pinId:y}=(0,C.Z)(m||""),z=(0,N.Z)(),H=(0,l.TH)(),U=(0,A.mB)(H.search),{x:B,y:G,w:$,h:V,surfaceType:W,q:Y,rs:q,domain:X,full_feed_title:Q,category:ei,max:ea,min:en,requestParams:er}=U,el=(0,o.W)(W),es={category:ei,domain:X,min:en,max:ea},eo=(0,D.Z)(Number(U.cropSource)),ed=(0,M.Z)({x:B,y:G,w:$,h:V})?(0,R.Z)({x:B,y:G,w:$,h:V},!0):void 0,[ec,eu]=(0,r.useState)(ed),[ep,eh]=(0,r.useState)(0),em=(0,r.useCallback)(()=>H.pathname.includes("/products/"),[H]),[eg,e_]=(0,r.useState)(em()),[ey,ef]=(0,r.useState)(void 0),[ex,ev]=(0,r.useState)(null),eb=(0,r.useRef)(null),[eS,ew]=(0,r.useState)(parseInt(en,10)||null),[eP,eI]=(0,r.useState)(parseInt(ea,10)||null),[eT,ek]=(0,r.useState)(X?decodeURI(X):null),[eE,ej]=(0,r.useState)(ei?decodeURI(ei):null),[eA,eC]=(0,r.useState)(!1),[eF,eR]=(0,r.useState)(""),eD=(0,r.useCallback)(()=>eC(!0),[]),eO=(0,r.useCallback)(()=>eC(!1),[]),{anyEnabled:eL}=a("web_unified_visual_feed"),{visualSearchFlashlightUnifiedResource:eM,visualSearchFlashlightUnifiedResource:{data:eN},filters:eZ,filters:{category_filters:eK,domain_filters:ez,price_filters:eH}={},searchId:eU,setSearchId:eB}=(0,b.Z)({resourceOptions:ey}),{description:eG,imageSignature:e$,isEligibleForRelatedProducts:eV}=p,eW=({minPrice:e,maxPrice:t,domainParam:i,categoryParam:a})=>{ew(e),eI(t),ek(i),ej(a)},eY=0,eq="",eX=eo||5,eQ=eg?"shopping":"flashlight";(0,r.useEffect)(()=>{let e=em();e!==eg&&e_(e)},[em,e_,eg]),(0,r.useEffect)(()=>{ex!==decodeURIComponent(Q)&&ev(Q?decodeURIComponent(Q):null)},[ev,ex,Q]);let{getInitialCropArea:eJ}=(0,d.Z)({pinKey:p});(0,F.Z)(()=>{if(!ec&&p){let e=eJ({initialCropArea:null}),i=(0,g.Z)({cropArea:e,cropSource:eX,isProductPage:eg,pinId:y,requestParams:er,searchQuery:Y,surfaceType:el,title:ex,trafficSource:q});t.replace(i)}}),(0,r.useEffect)(()=>(eb&&eb.current&&eq===y&&(eb.current.scrollTop=eY),()=>{eb&&eb.current&&(eY=eb.current.scrollTop,eq=y)}),[eb]),(0,r.useEffect)(()=>{(ec?.x!==ed?.x||ec?.y!==ed?.y||ec?.w!==ed?.w||ec?.h!==ed?.h)&&(eu({x:ed?.x||0,y:ed?.y||0,w:ed?.w||1,h:ed?.h||1}),eB(""))},[ec?.h,ec?.w,ec?.x,ec?.y,ed?.h,ed?.w,ed?.x,ed?.y,eB]);let e0=(0,E.Z)(()=>{window&&eh(window.innerWidth)},100);(0,r.useEffect)(()=>{window&&eh(window.innerWidth)},[]),(0,r.useEffect)(()=>(window&&window.addEventListener("resize",e0),()=>{window&&window.removeEventListener("resize",e0)}),[e0]);let e1=(p.visualObjects||[]).some(e=>e.isStela),e2="stl"===el,e4=eL&&!eg&&!e2,{getNormalizedPinImage:e6}=(0,w.Z)({pinKey:p,maxWidth:k.RZ});(0,r.useEffect)(()=>{if(p.entityId){let{width:e,height:t}=e6(),i=eJ({initialCropArea:ec});ef({categories:eE,crop:(0,O.Z)({cropArea:i,scaledWidth:e,scaledHeight:t}),crop_source:eX,domains:eT,entry_source:eQ,entrypoint:z,field_set_key:"shopping_grid_item",image_signature:p.imageSignature||void 0,is_shopping:function({inUnifiedFeedExperiment:e,isProductOnlyFeed:t,isShopEntryPoint:i}){return!e||!!i||!!t}({inUnifiedFeedExperiment:eL,isProductOnlyFeed:eg,isShopEntryPoint:e2}),pin_id:p.entityId,price_max:eP,price_min:eS,request_params:er,source:q})}},[eE,eX,eT,eQ,z,eJ,e6,e1,eL,ec,eg,e2,eP,eS,p.entityId,p.imageSignature,er,q]);let e3=eV||eg?427:72,e8=eX&&4===eX?3462:3455;if((0,F.Z)(()=>{p&&!eL&&i({event_type:13,view_type:e3,view_parameter:e8,view_data:{pin_id:y},aux_data:{commerce_data:JSON.stringify({entrypoint:eQ,pin_is_stela:e1})}})}),!p)return null;let{width:e7,height:e5,url:e9}=e6(),te=eJ({initialCropArea:ec}),tt=e7+20,ti=({category:e,domain:i,min:a,max:n})=>{t.replace({pathname:`/pin/${y}/visual-search/${eg?"products/":""}`,query:{...te,cropSource:eX,entrySource:eQ,rs:q,category:e,domain:i,min:a,max:n},search:(0,L.Z)({cropArea:te,cropSource:eX,requestParams:er,surfaceType:el,title:ex,trafficSource:q})})},ta=eg?ep:ep-tt,tn=(0,x.Z)(eZ),tr=!eL||eL&&eg,tl=!eg;return(0,_.jsx)(I.Z,{constraints:["shoppingModuleRender","visualSearchMainPinImageRender"],measureGridVisuallyComplete:!0,surface:"visual_search",children:(0,_.jsx)(j.Z,{objectId:eU,view:e3,children:(0,_.jsxs)(s.xu,{"data-test-id":"related-products",children:[(0,_.jsx)(u.Z,{filtersText:eF,handleDrawerClose:eO,handleDrawerOpen:eD,isDrawerOpen:eA,isProductOnlyFeed:eg,pinId:y,showFilter:!e4&&tn,title:tr?ex:"",variant:function({hasLabel:e,isEligibleForRelatedProducts:t,isProductOnlyFeed:i,isShopEntryPoint:a,isUnifiedFeed:n}){return a?"shop-module":!e&&n?"unified-feed-no-label":i||t&&!n?"closeup-shop":t&&n?"unified-feed":"related-products"}({hasLabel:!!ex,isEligibleForRelatedProducts:eV,isProductOnlyFeed:eg,isShopEntryPoint:e2,isUnifiedFeed:eL}),viewParameter:e8,viewType:e3}),(0,_.jsx)(s.xu,{marginTop:2,children:(0,_.jsx)(Z.c,{children:e=>(0,_.jsxs)(s.xu,{alignItems:"stretch",direction:"row",display:"flex",justifyContent:"start",marginTop:12,children:[tn&&(0,_.jsx)(J,{categoryFilters:eK,cropSource:eX,domainFilters:ez,handleFilterChange:eW,handleSubmit:ti,isDrawerOpen:eA,pinId:y,priceFilters:eH,submittedFilters:es,topOffset:u.M,updateButtonText:e=>{eR(e)},viewParameter:e8,viewType:e3}),tl&&(0,_.jsx)(s.xu,{ref:eb,bottom:!0,dangerouslySetInlineStyle:{__style:{top:e+ee+32,marginBottom:10,left:!n&&eA?K.pG:0,right:n?0:void 0}},height:"inherit",marginStart:!n&&eA?0:12,overflow:"auto",position:"fixed",width:tt,children:(0,_.jsx)(f,{cropArea:te,cropSource:eX,description:eG??"",height:e5,imageSignature:e$||"",imageUrl:e9,pinKey:p,requestParams:er,searchQuery:Y,surfaceType:el,trafficSource:q,viewParameter:e8,viewType:e3,width:e7})}),(0,_.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:(0,c.Z)({cropperWidth:tt,top:ee-16,isFilterOpened:eA,isProductOnlyFeed:eg,isRTL:n})},position:"relative",width:eA?ta-K.pG:ta,children:eN&&(0,_.jsx)(v.Z,{isFilterOpened:eA,isProductOnlyFeed:eg,pinKey:p,surfaceType:el,viewParameter:e8,viewType:e3,visualSearchFlashlightUnifiedResource:eM})})]})})})]})})})}},83053:(e,t,i)=>{"use strict";i.d(t,{Z:()=>I});var a,n=i(667294);i(167912);var r=i(616550),l=i(883119),s=i(175644),o=i(785893);function d({title:e}){return(0,o.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:55}},"data-test-id":"unified-feed-subheader",display:"flex",justifyContent:"center",children:(0,o.jsx)(l.X6,{accessibilityLevel:2,size:"400",children:e})})}var c=i(773285),u=i(276602),p=i(861411);let h={flashlight:72,stela:427,stl:427};function m({pinId:e,surfaceType:t,visualSearchFlashlightUnifiedResource:i}){let a=(0,r.TH)(),{checkExperiment:m}=(0,c.F)(),g=(0,u.E)(),{data:_}=i,y=_?.results||[],f=`/pin/${e}/visual-search/products/${a.search}`,x=t?h[t]:72,v=()=>{g&&g.markConstraintComplete("shoppingModuleRender")};return(0,o.jsx)(n.Fragment,{children:y.filter(e=>"story"===e.type).map((e,t)=>{if("story"===e.type){let{action:i,id:a,objects:n,story_type:r,title:c}=e;switch(r){case"unified_visual_feed_product_upsell":let u=c.format||"",h=m("web_product_pin_rep_redesign").anyEnabled;return(0,o.jsx)(p.qS,{auxData:{story_type:r},component:14339,loggingId:a,objectIdStr:a,slotIndex:t,viewParameter:3462,viewType:x,children:({impressionTrackerRef:e})=>(0,o.jsxs)(l.xu,{ref:e,children:[u&&(0,o.jsx)(d,{title:u}),(0,o.jsx)(l.xu,{"data-test-id":"unified-feed-stela-story",marginBottom:12,marginTop:4,children:(0,o.jsx)(s.Z,{action:i,component:14339,contextLogData:{story_type:r},dangerouslySetActionUrl:f,element:179,id:a,objects:n,pwtTrackImageLoad:v,surface:h?"ShoppingModule":void 0,viewParameter:3462,viewType:x})})]})},a);case"unified_visual_feed_organic_header":return(0,o.jsx)(p.qS,{auxData:{story_type:r},component:14339,loggingId:a,objectIdStr:a,slotIndex:t,viewParameter:3462,viewType:x,children:({impressionTrackerRef:t})=>(0,o.jsx)(l.xu,{ref:t,marginBottom:4,children:(0,o.jsx)(d,{title:e.title.format||""})})},a)}}return null})})}var g=i(407043),_=i(898781),y=i(317254),f=i(700380),x=i(8742);function v({commerceData:e,isFilterOpened:t,isProductFeed:i,searchId:a,viewParameter:r,viewType:s,visualSearchFlashlightUnifiedResource:d}){let c=(0,_.ZP)(),{logContextEvent:u}=(0,g.v)(),[p,h]=(0,n.useState)(),[m,v]=(0,n.useState)(!1),b=(0,n.useRef)(null),S=(0,n.useRef)(null),w=(0,f.Z)(()=>{b.current&&h(b.current.getBoundingClientRect().y)},100);(0,n.useEffect)(()=>{S.current?.handleResize()},[t]),(0,n.useEffect)(()=>{if(!m)return window.addEventListener("scroll",w),()=>window.removeEventListener("scroll",w)}),(0,n.useEffect)(()=>{let e=window?.innerHeight||document.body?.clientHeight;!m&&p<e&&(v(!0),u({event_type:110,view_type:s,view_parameter:r}))},[p,u,m,v,s,r]);let{data:P,isFetching:I,fetchMore:T,isAtEnd:k}=d,E=(P?.results||[]).filter(e=>"pin"===e.type);return(0,o.jsxs)(l.xu,{"data-test-id":"visual-search-feed",children:[(0,o.jsx)(l.xu,{ref:b,marginTop:2,children:(0,o.jsx)(y.Z,{isAtEndOfFeed:k,itemCount:(E||[]).length,children:(0,o.jsx)(l.Rk,{ref:S,items:E||[],loadItems:T,minCols:1,renderItem:({data:t,itemIdx:n})=>"pin"===t.type?(0,o.jsx)(x.ZP,{authDesktopSurface:i?"ShoppingDynamicHeightGrid":"SearchItem",auxData:{commerce_data:e},componentType:0,duploQueryRef:null,pin:t,pinId:t.id,slotIndex:n,viewData:{search_identifier:a},viewParameter:r,viewType:s}):null,scrollContainer:()=>window})})}),(0,o.jsx)(l.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:(0,o.jsx)(l.$j,{accessibilityLabel:c.bt("Loading visual search results", "Loading visual search results", "visualSearch.spinner.label", undefined, true),show:I})})]})}var b=i(916117),S=i(829407),w=i(999018);let P=void 0!==a?a:a=i(966498);function I({isFilterOpened:e,isProductOnlyFeed:t,pinKey:i,surfaceType:a,viewParameter:r,viewType:l,visualSearchFlashlightUnifiedResource:s}){let d=(0,b.Z)(P,i),{logContextEvent:c}=(0,g.v)(),u="stl"===a,p=u||t,{data:h}=s,_=h?.search_identifier,y={is_product_only_feed:p},f=(0,w.Z)(d);(0,S.Z)(()=>{c({event_type:13,view_type:l,view_parameter:r,aux_data:f({default:y})})});let{entityId:x}=d;return(0,o.jsxs)(n.Fragment,{children:[!u&&(0,o.jsx)(m,{pinId:x,surfaceType:a,visualSearchFlashlightUnifiedResource:s}),(0,o.jsx)(v,{commerceData:y,isFilterOpened:e,isProductFeed:p,searchId:_,viewParameter:r,viewType:l,visualSearchFlashlightUnifiedResource:s})]})}},407373:(e,t,i)=>{"use strict";function a(e){let{category_filters:t,domain_filters:i,price_filters:a}=e||{};return!!t||!!i||!!a}i.d(t,{Z:()=>a})},647945:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var a=i(667294),n=i(407373),r=i(784590);function l({resourceOptions:e,setFlashlightSearchId:t}){let[i,l]=(0,a.useState)(),[s,o]=(0,a.useState)(""),[d,c]=(0,a.useState)(),u=(0,r.Z)(e?{name:"VisualSearchFlashlightUnifiedResource",options:e}:null);return(0,a.useEffect)(()=>{let{data:e}=u,i=e?.search_identifier;i&&(t?t(i):o(i)),l(e)},[t,u]),(0,a.useEffect)(()=>{let{data:e}=u,t=e?.search_identifier,a=i?.search_identifier;!e||t&&a&&t===a||(0,n.Z)(i)||!(0,n.Z)(e)||c({category_filters:e.category_filters,domain_filters:e.domain_filters,price_filters:e.price_filters})},[d,i,u]),{visualSearchFlashlightUnifiedResource:u,filters:d,searchId:s,setSearchId:o}}},865686:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var a=i(12755);function n({cropperWidth:e,top:t,isRTL:i,isFilterOpened:n,isFlashlightPage:r,isProductOnlyFeed:l}){let s=l?0:e+40,o=e+16,d={top:t,overflow:"auto"};return i?{...d,marginRight:r?o:s}:{...d,marginLeft:r?o:n?s+a.pG:s}}},362810:(e,t,i)=>{"use strict";i.d(t,{Z:()=>_});var a=i(667294),n=i(883119),r=i(785893);function l({isTopRow:e,image:t}){return(0,r.jsxs)(n.zd,{height:e?217:168,wash:!0,width:e?236:117,children:[(0,r.jsx)(n.Ee,{alt:t.alt||"",fit:"cover",naturalHeight:t.height??1,naturalWidth:t.width??1,src:t.url??""}),!!t.price&&(0,r.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"18px",color:"#111",fontSize:"10px",fontWeight:"600",lineHeight:"24px",padding:"06px"}},"data-test-id":"shopping-upsell-price",height:24,left:!0,margin:1,paddingX:2,paddingY:1,position:"absolute",top:!0,children:t.price})]})}var s=i(407043),o=i(356997),d=i(564194),c=i(310227),u=i(149230),p=i(841509),h=i(525199);let m={container:{borderRadius:`${c.Oc}px ${c.Oc}px 25px 25px`,WebkitMaskImage:"-webkit-radial-gradient(white, black)"},content:{marginBottom:"2px"},visualOverlay:{backgroundColor:"rgba(0, 0, 0, .1)"}},g=({images:e,firstImageIndex:t})=>{let i=t+1,a=t+2;return(0,r.jsxs)(n.xu,{overflow:"hidden",rounding:4,children:[(0,r.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:m.content},children:e.at(t)?(0,r.jsx)(l,{image:e[t],isTopRow:!0}):null}),e.length>a?(0,r.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,r.jsx)(l,{image:e[i]}),(0,r.jsx)(l,{image:e[a]})]}):null]})};function _({dangerouslySetActionUrl:e,query:t,story:i,slotIndex:l}){let c,_,y,f;let{logContextEvent:x}=(0,s.v)(),{action:v,id:b,objects:S,story_type:w,subtitle:P}=i,{text:I,url:T}=v||{},[k,E]=(0,a.useState)(!1),j=(0,a.useCallback)(()=>E(!0),[E]),A=(0,a.useCallback)(()=>E(!1),[E]),C=(S||[]).reduce((e,t)=>"pin"!==t.type?e:[...e,{domain:t.domain,image:{alt:t.title||t.description,height:t.images?.["474x"]?.height,url:t.images?.["474x"]?.url,width:t.images?.["474x"]?.width,price:(t.rich_summary?.products?.[0]||{}).offer_summary?.price}}],[]),F=(C[0]||{}).domain||void 0,R={story_type:w};if(["search_product_collage_story","shop_article_story"].includes(w)?(c=2,_=43,R={...R,story_id:b,entered_query:t}):"shop_brand_story"===w||"shop_brand_affinity_story"===w?(c=1,_=92,F&&(R={...R,commerce_data:JSON.stringify({domain:F})})):["stela_in_flashlight_card","stela_in_flashlight_onecol"].includes(w)?(c=72,_=3050):"related_domain_collage"===w?(c=72,_=3455):"related_products_collage"===w&&(c=1,_=3177),["related_domain_collage","shop_brand_story","shop_brand_affinity_story"].includes(w)&&v){let e=v.user;y=e&&(e.image_medium_url||e.image_large_url),f=e&&e.full_name}let D=e||T;if(!D)return null;let O=(0,u.Z)({url:D})?"nofollow":"none";return(0,r.jsx)(d.Z,{componentType:200,contextLogData:R||{},impressionType:"Story",loggingId:w,slotIndex:l,viewParameter:_,viewType:c,children:(0,r.jsx)(n.Tg,{href:D,onTap:()=>x({event_type:101,element:372,component:200,view_type:c,view_parameter:_,aux_data:{story_type:w}}),rel:O,children:(0,r.jsxs)(n.xu,{dangerouslySetInlineStyle:{__style:m.container},onMouseEnter:j,onMouseLeave:A,overflow:"hidden",position:"relative",children:[(0,r.jsx)(g,{firstImageIndex:["related_domain_collage","related_products_collage"].includes(w)?1:0,images:C.map(({image:e})=>e)}),(0,r.jsx)(n.xu,{alignItems:"center",color:"secondary",display:"flex",justifyContent:"center",marginTop:2,paddingX:3,paddingY:P?4:2,rounding:"pill",children:(0,r.jsxs)(n.xu,{alignContent:"start",direction:"column",display:"flex",justifyContent:"center",margin:2,children:[P?(0,r.jsx)(n.xu,{marginBottom:1,children:(0,r.jsx)(n.xv,{align:"start",color:"subtle",children:P.format})}):null,(0,r.jsx)(n.xv,{align:"start",weight:"bold",children:I})]})}),f&&y&&(0,r.jsx)(n.xu,{margin:2,position:"absolute",right:!0,top:!0,children:(0,r.jsx)(o.qE,{name:f,outline:!0,size:"md",src:y})}),(0,r.jsx)(h.Z,{visibility:k?"visible":"none",children:(0,r.jsx)(p.Z,{additionalStyles:m.visualOverlay})})]})})})}},992061:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var a=i(883119),n=i(785893);function r({hovered:e,rounding:t}){return(0,n.jsx)(a.xu,{color:"transparentDarkGray",display:e?"block":"none",height:"100%",left:!0,opacity:.2,position:"fixed",rounding:t,top:!0,width:"100%",zIndex:new a.Ry(1)})}},27255:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});let a={AMP_TRACKING_DOMAIN:"amp.pinterest.com",BoardPrivacy:{SECRET:"secret",PUBLIC:"public",PROTECTED:"protected"},BoardType:{PROTECTED:"protected"},BulkAction:{MOVE:"bulkMove",COPY:"bulkCopy",CREATE_SECTION:"bulkCreateSection",DELETE:"bulkDelete"},MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION:500,MAX_CHARS_FOR_BOARD_TITLE:50,MAX_CHARS_FOR_FIRST_NAME:30,MAX_FETCH_NUM_FOLLOWERS_PER_PAGE:50,MAX_STORED_VISITED_PIN_PAGES:10,VIDEO_IFRAME_ID:"video-iframe"}},485019:(e,t,i)=>{"use strict";i.d(t,{S:()=>f,Z:()=>b});var a=i(667294),n=i(615071),r=i(883119),l=i(112690),s=i(785893);let o={nw:0,ne:90,se:180,sw:270},d={ne:[7,-7],se:[7,7],sw:[-7,7],nw:[-7,-7]},c={nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},u=(e,t,i,a)=>{if("rounded"!==a)return`translate(${t}, ${i}), rotate(${o[e]})`;{let[a,n]=d[e];return`translate(${t+a}, ${i+n}), rotate(${o[e]})`}};function p({corner:e,x:t,y:i,size:a,cornerStyle:n}){return(0,s.jsxs)("g",{style:{cursor:c[e]},transform:u(e,t,i,n),children:[(0,s.jsx)("rect",{className:`v2cropperHandle ${e}`,fill:"rgba(0,0,0,0)",height:a,stroke:"none",width:a,x:0,y:0}),"rounded"===n?(0,s.jsx)("path",{className:`v2cropperHandle ${e}`,d:"M16 0H24V8H16C11.5817 8 8 11.5817 8 16V24H0V16C0 7.16343 7.16345 0 16 0Z",fill:"#fff"}):(0,s.jsx)("path",{className:`v2cropperHandle ${e}`,d:`M ${a} 0 L 0 0 L 0 ${a}`,fill:"none",stroke:"#fff",strokeWidth:6})]})}let h={n:"ns-resize",s:"ns-resize",e:"ew-resize",w:"ew-resize"};function m({edge:e,x:t,y:i,w:a,h:n}){return(0,s.jsx)("rect",{className:`v2cropperHandle ${e}`,fill:"rgba(0,0,0,0)",height:n,stroke:"none",style:{cursor:h[e]},width:a,x:t,y:i})}function g({x:e,y:t,w:i,h:n}){let r="rounded";return(0,s.jsxs)(a.Fragment,{children:[(0,s.jsx)(p,{corner:"nw",cornerStyle:r,size:20,x:e,y:t}),(0,s.jsx)(p,{corner:"ne",cornerStyle:r,size:20,x:e+i,y:t}),(0,s.jsx)(p,{corner:"sw",cornerStyle:r,size:20,x:e,y:t+n}),(0,s.jsx)(p,{corner:"se",cornerStyle:r,size:20,x:e+i,y:t+n}),(0,s.jsx)(m,{edge:"n",h:30,w:i-40,x:e+20,y:t-10}),(0,s.jsx)(m,{edge:"e",h:n-40,w:30,x:e+i-20,y:t+20}),(0,s.jsx)(m,{edge:"s",h:30,w:i-40,x:e+20,y:t+n-10}),(0,s.jsx)(m,{edge:"w",h:n-40,w:30,x:e-20,y:t+20})]})}var _=i(391254);function y(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let f=16,x=`
.preview-crop-area-enter {
  opacity: 0;
}

.preview-crop-area-enter-active {
  opacity: 1;
  transition: opacity 300ms;
}

.preview-crop-area-exit {
  opacity: 1;
}

.preview-crop-area-exit-active {
  opacity: 0;
  transition: opacity 300ms;
}

.preview-crop-area-exit-done {
  opacity: 0;
}
`;class v extends a.Component{constructor(...e){super(...e),y(this,"state",{cropArea:!!this.props.initialCropArea&&function({initialCropArea:e,imageSize:t}){let{x:i,y:a,w:n,h:r}=e,{h:l,w:s}=t;if(!l||!s)return e;let o=i,d=a,c=n,u=r;return o<f&&(o=f,c-=f-i),o+c>s-f&&(c-=o+c-s+f),d<f&&(d=f,u-=f-a),d+u>l-f&&(u-=d+u-l+f),{x:o,y:d,w:c,h:u}}({initialCropArea:this.props.initialCropArea,imageSize:this.props.imageSize})||{h:0,w:0,x:0,y:0},cropChangeType:null}),y(this,"cropResizeDirection",null),y(this,"_cropperOverlay",(0,a.createRef)()),y(this,"_checkCropHandleValid",(e,t)=>{let{cropArea:{h:i,w:a,x:n,y:r}}=this.state;switch(this.cropResizeDirection){case"ne":e<n&&t>r+i?this.cropResizeDirection="sw":e<n?this.cropResizeDirection="nw":t>r+i&&(this.cropResizeDirection="se");break;case"nw":e>n+a&&t>r+i?this.cropResizeDirection="se":e>n+a?this.cropResizeDirection="ne":t>r+i&&(this.cropResizeDirection="sw");break;case"se":e<n&&t<r?this.cropResizeDirection="nw":e<n?this.cropResizeDirection="sw":t<r&&(this.cropResizeDirection="ne");break;case"sw":e>n+a&&t<r?this.cropResizeDirection="ne":e>n+a?this.cropResizeDirection="se":t<r&&(this.cropResizeDirection="nw");break;case"n":t>r+i&&(this.cropResizeDirection="s");break;case"s":t<r&&(this.cropResizeDirection="n");break;case"e":e<n&&(this.cropResizeDirection="w");break;case"w":e>n+a&&(this.cropResizeDirection="e")}}),y(this,"handleOnMouseDown",e=>{e.preventDefault(),e.stopPropagation();let{clientX:t,clientY:i}=e,{target:a}=e,n=t-this._cropperOverlayCoor.x,r=i-this._cropperOverlayCoor.y,l=a.classList?Array.from(a.classList):a instanceof Element&&a.getAttribute("class")?.split(" ")||[];l.includes("v2cropperHandle")?(this.setState({cropChangeType:"resize"}),l.includes("ne")&&(this.cropResizeDirection="ne"),l.includes("nw")&&(this.cropResizeDirection="nw"),l.includes("se")&&(this.cropResizeDirection="se"),l.includes("sw")&&(this.cropResizeDirection="sw"),l.includes("n")&&(this.cropResizeDirection="n"),l.includes("s")&&(this.cropResizeDirection="s"),l.includes("e")&&(this.cropResizeDirection="e"),l.includes("w")&&(this.cropResizeDirection="w")):l.includes("v2cropSection")?(this.setState({cropChangeType:"move"}),this.cropChangeStartCoor={x:n,y:r}):l.includes("v2shadowMask")&&(this.cropChangeStartCoor={x:n,y:r},this.setState({cropArea:{h:0,w:0,x:n,y:r},cropChangeType:"select"}))}),y(this,"handleOnMouseMove",e=>{let{cropArea:{h:t,w:i,x:a,y:n},cropChangeType:r}=this.state,{imageSize:l}=this.props,{clientX:s,clientY:o}=e,d=s-this._cropperOverlayCoor.x,c=o-this._cropperOverlayCoor.y;if("resize"===r){let e=Math.max(Math.min(d,(l.w??1)-f),f),r=Math.max(Math.min(c,(l.h??1)-f),f);switch(this._checkCropHandleValid(e,r),this.cropResizeDirection){case"ne":{let i=Math.max(t+(n-r),48),l=Math.max(e-a,48);this.setState({cropArea:{h:i,w:l,x:a,y:i<=48?n:r}});break}case"nw":{let l=Math.max(i+(a-e),48),s=Math.max(t+(n-r),48);this.setState({cropArea:{h:s,w:l,x:48===l?a:e,y:48===s?n:r}});break}case"se":{let t=Math.max(r-n,48),i=Math.max(e-a,48);this.setState({cropArea:{h:t,w:i,x:a,y:n}});break}case"sw":{let t=Math.max(r-n,48),l=Math.max(i+(a-e),48);this.setState({cropArea:{h:t,w:l,x:48===l?a:e,y:n}});break}case"n":{let e=Math.max(n-r+t,48);this.setState({cropArea:{h:e,w:i,x:a,y:48===e?n:r}});break}case"s":{let e=Math.max(r-n,48);this.setState({cropArea:{h:e,w:i,x:a,y:n}});break}case"e":{let i=Math.max(e-a,48);this.setState({cropArea:{h:t,w:i,x:a,y:n}});break}case"w":{let r=Math.max(i-e+a,48);this.setState({cropArea:{h:t,w:r,x:48===r?a:e,y:n}})}}}else if("move"===r){let e=d-this.cropChangeStartCoor.x,r=c-this.cropChangeStartCoor.y,s=Math.max(Math.min(a+e,(l.w??1)-i-f),f),o=Math.max(Math.min(n+r,(l.h??1)-t-f),f);this.cropChangeStartCoor={x:d,y:c},this.setState({cropArea:{h:t,w:i,x:s,y:o}})}else if("select"===r){let e=Math.max(Math.min(d,l.w??1),0),t=Math.max(Math.min(c,l.h??1),0),i=e-this.cropChangeStartCoor.x,a=t-this.cropChangeStartCoor.y;this.setState({cropArea:{h:Math.abs(a),w:Math.abs(i),x:Math.min(this.cropChangeStartCoor.x,e),y:Math.min(this.cropChangeStartCoor.y,t)}})}}),y(this,"handleOnMouseUp",()=>{let{cropChangeType:e}=this.state;("resize"===e||"move"===e||"select"===e)&&this.handleCrop(),this.cropResizeDirection=null})}componentDidMount(){let{body:e}=document,t=this._cropperOverlay.current;if(t&&e){if(t){let e=t.getBoundingClientRect();this._cropperOverlayCoor={x:e.left,y:e.top}}window.addEventListener("mouseup",this.handleOnMouseUp),e.addEventListener("mousemove",this.handleOnMouseMove),t.addEventListener("mousedown",this.handleOnMouseDown)}}componentWillUnmount(){let{body:e}=document,t=this._cropperOverlay.current;t&&e&&(window.removeEventListener("mouseup",this.handleOnMouseUp),e.removeEventListener("mousemove",this.handleOnMouseMove),t.removeEventListener("mousedown",this.handleOnMouseDown))}handleCrop(){let{imageSize:e,onChange:t,viewParameter:i,logContextEvent:a}=this.props,{cropChangeType:n,cropArea:r}=this.state;if(0===r.w&&0===r.h)this.setState({cropChangeType:null}),t({origCrop:{h:(e.h??1)-2*f,w:(e.w??1)-2*f,x:f,y:f}});else{let l,s;this.setState({cropChangeType:null});let o=Math.max(Math.min(r.x,(e.w??1)-48-f),f),d=Math.max(Math.min(r.y,(e.h??1)-48-f),f);switch(l=r.h<48?48:d+r.h>(e.h??1)-f?(e.h??1)-d-f:r.h,s=r.w<48?48:o+r.w>(e.w??1)-f?(e.w??1)-o-f:r.w,n){case"move":a({event_type:7603,view_type:72,view_parameter:i});break;case"resize":a({event_type:7604,view_type:72,view_parameter:i})}t({origCrop:{h:l,w:s,x:o,y:d}})}}render(){let{children:e,previewCropArea:t,showPreviewArea:i}=this.props,{cropArea:{h:a,w:l,x:o,y:d},cropChangeType:c}=this.state;return(0,s.jsxs)(r.xu,{ref:this._cropperOverlay,dangerouslySetInlineStyle:{__style:{cursor:"crosshair"}},"data-test-id":"visual-search-cropper",height:"100%",left:!0,position:"absolute",top:!0,width:"100%",children:[(0,s.jsx)(_.Z,{unsafeCSS:x}),(0,s.jsxs)("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("mask",{id:"Mask",children:[(0,s.jsx)("rect",{fill:"#fff",height:"100%",rx:"0",ry:"0",width:"100%",x:"0",y:"0"}),(0,s.jsx)("rect",{height:a,id:"hole",rx:0,ry:0,width:l,x:o,y:d},`${o}${d}`),(0,s.jsx)(n.Z,{classNames:"preview-crop-area",in:i&&!c,mountOnEnter:!0,timeout:300,unmountOnExit:!0,children:(0,s.jsx)("rect",{height:t.h,id:"preview",rx:4,ry:4,width:t.w,x:t.x,y:t.y},`${t.x}${t.y}`)})]})}),(0,s.jsx)("rect",{className:"v2shadowMask",height:"100%",mask:"url(#Mask)",style:{fill:"rgba(0,0,0,0.5)"},width:"100%",x:"0",y:"0"}),(0,s.jsx)("use",{className:"v2cropSection",fill:"rgba(0,0,0,0)",href:"#hole",stroke:"#fff",strokeWidth:"2",style:{cursor:"move"}}),"select"!==c&&(0,s.jsx)(g,{h:a,w:l,x:o,y:d})]}),e]})}}function b(e){let t=(0,l.Z)();return(0,s.jsx)(v,{logContextEvent:t,...e})}},403368:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var a=i(667294),n=i(883119),r=i(898781),l=i(785893);function s(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class o extends a.Component{constructor(...e){super(...e),s(this,"state",{isHovering:!1}),s(this,"handleMouseEnter",e=>{this.setState({isHovering:!0}),this.props.onMouseEnter&&this.props.onMouseEnter(e)}),s(this,"handleMouseLeave",e=>{this.setState({isHovering:!1}),this.props.onMouseLeave&&this.props.onMouseLeave(e)})}render(){let{forwardedRef:e,icon:t,onClick:i,onMouseDown:a,onMouseUp:r,selected:s,style:o,text:d,x:c,y:u,zIndex:p,backdropDiameter:h=32,dotDiameter:m=16}=this.props,{isHovering:g}=this.state,_=g?h+4:h;return(0,l.jsx)("div",{ref:e,"aria-label":this.props.i18n.bt("Search for this item", "Search this item", "flashlight.dot.a11ylabel", undefined, true),"data-test-id":"flashlight-dot",onClick:i,onKeyPress:i,onMouseDown:a,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:r,role:"button",style:{zIndex:p,position:"absolute",top:u-_/2,left:c-_/2,outline:"none"},tabIndex:"0",children:(0,l.jsxs)(n.xu,{alignItems:"center",borderStyle:"none",color:"default",dangerouslySetInlineStyle:{__style:{boxShadow:s?"0 0 0 3px #e60023":"none",borderRadius:m,top:(_-m)/2,left:(_-m)/2,...o}},"data-test-id":"flashlight-dot-style",display:"flex",height:m,justifyContent:"center",padding:0,position:"absolute",width:m,children:[!!d&&(0,l.jsx)(n.xv,{align:"center",color:"default",inline:!0,size:"100",weight:"bold",children:d}),t&&(0,l.jsx)(n.JO,{accessibilityLabel:this.props.i18n.bt("Tag anchor", "Tag anchor", "accessibility label for an anchor for an object in a pin", undefined, true),color:"error",icon:t,inline:!0,size:m/2})]})})}}let d=(0,a.forwardRef)((e,t)=>{let i=(0,r.ZP)();return(0,l.jsx)(o,{...e,forwardedRef:t,i18n:i})})},352870:(e,t,i)=>{"use strict";i.d(t,{Z:()=>w});var a,n,r=i(667294);i(167912);var l=i(616550),s=i(485019),o=i(112690),d=i(403368),c=i(829407),u=i(785893);function p({showAnimation:e,auxData:t,index:i,isStela:a,onClick:n,onHover:r,onUnhover:l,spotlightCenter:s,viewParameter:p,viewType:h}){let m=(0,o.Z)(),g=a?1221:1260;(0,c.Z)(()=>{m({event_type:120,element:g,aux_data:t,view_parameter:p,view_type:h})});let _=parseFloat((.1*(i+1)).toFixed(2)),y={animation:e?`spotlightDotPop 0.6s ease-out ${_}s both`:"none"};return(0,u.jsx)(d.Z,{onClick:e=>{e&&(e.stopPropagation(),e.preventDefault()),m({aux_data:t,element:g,event_type:101,view_parameter:p,view_type:h}),n(i)},onMouseEnter:e=>{e&&(e.stopPropagation(),e.preventDefault()),r(i)},onMouseLeave:e=>{e&&(e.stopPropagation(),e.preventDefault()),l()},style:y,x:s.x,y:s.y})}var h=i(916117),m=i(391254),g=i(999018),_=i(599611);let y=`
@keyframes spotlightDotPop {
  0% {
    transform: scale(0);
  }

  100% {
    transform: scale(1);
  }
}`,f=void 0!==a?a:a=i(52892),x=({showAnimation:e,pinKey:t,imageSignature:i,imageSize:a,currentSpotlightIdx:n,handleSpotlightClick:l,handleSpotlightHover:s,handleSpotlightUnhover:o,viewParameter:d,viewType:c})=>{let x=(0,h.Z)(f,t),v=(0,g.Z)(x),b=(x.visualObjects??[]).filter(e=>e.isStela)||[];return(0,u.jsxs)(r.Fragment,{children:[(0,u.jsx)(m.Z,{unsafeCSS:y}),b.map((t,r)=>{if(r===n)return null;let{x:h,y:m,w:g,h:y}=t,f=(0,_.Z)({cropArea:{x:h,y:m,w:g,h:y},scaledWidth:a.w??0,scaledHeight:a.h??0}),b={x:f.x+f.w/2,y:f.y+f.h/2},S={...v({override:{entrypoint:"flashlight"}}),pin_id:x.entityId,image_signature:i,visual_objects:JSON.stringify([{x:t.x,y:t.y,w:t.w,h:t.h}])},w=`${b.x}${b.y}`;return(0,u.jsx)(p,{auxData:S,index:r,isStela:!!t.isStela,onClick:l,onHover:s,onUnhover:o,showAnimation:e,spotlightCenter:b,viewParameter:d,viewType:c},w)})]})};var v=i(94047),b=i(297852);let S=void 0!==n?n:n=i(225785);function w({customCropper:e,imageSize:t,imageSignature:i,initialCropArea:a,pinKey:n,showAnimation:o,trafficSource:d,viewParameter:c,viewType:p}){let m=(0,h.Z)(S,n),g=(0,l.k6)(),[y,f]=(0,r.useState)(!1),[w,P]=(0,r.useState)({w:0,h:0,x:0,y:0}),[I,T]=(0,r.useState)(0),k=(0,r.useMemo)(()=>(m.visualObjects??[]).filter(e=>e.isStela)||[],[m.visualObjects]);(0,r.useEffect)(()=>{let e=k.findIndex(e=>{let{x:i,y:n,w:r,h:l}=e;return function(e,t,i){let a=Object.keys(e).reduce((i,a)=>i+Math.abs(e[a]-t[a]),0);return a<=4}(a,(0,_.Z)({cropArea:{x:i,y:n,w:r,h:l},scaledWidth:t.w??0,scaledHeight:t.h??0}),0)});T(e)},[t,a,k]);let E=({origCrop:e,cropSource:t,trafficSource:i,title:a})=>{let{entityId:n}=m,r=window.location.pathname+window.location.search,l=(0,b.Z)({cropArea:e,cropSource:t??6,isProductPage:!1,pinId:n,title:a,trafficSource:i,surfaceType:"flashlight"});l!==r&&(g.replace(l),g.replace({pathname:`/pin/${n}/visual-search/`,search:(0,v.Z)({cropArea:e,cropSource:t??6,title:a,trafficSource:i,surfaceType:"flashlight"}),state:{internalNavigation:!0}}))},j=k&&!!k.length;return(0,u.jsx)(s.Z,{imageSize:t,initialCropArea:a,onChange:e??E,previewCropArea:w,showPreviewArea:!1,viewParameter:c,children:j&&(0,u.jsx)(x,{currentSpotlightIdx:I,handleSpotlightClick:i=>{let a=k[i],{x:n,y:r,w:l,h:s}=a,o=(0,_.Z)({cropArea:{x:n,y:r,w:l,h:s},scaledWidth:t.w??0,scaledHeight:t.h??0}),c={origCrop:o,cropSource:a.isStela?4:1,trafficSource:d,title:a.title||""};e?e(c):E(c)},handleSpotlightHover:e=>{if(e!==I){f(!0);let{x:i,y:a,w:n,h:r}=k[e];P((0,_.Z)({cropArea:{x:i,y:a,w:n,h:r},scaledWidth:t.w??0,scaledHeight:t.h??0}))}},handleSpotlightUnhover:()=>{f(!1)},imageSignature:i,imageSize:t,pinKey:m,showAnimation:o,viewParameter:c,viewType:p})},JSON.stringify(a))}},310227:(e,t,i)=>{"use strict";i.d(t,{Dv:()=>r,Ml:()=>l,Oc:()=>a,mv:()=>n});let a=16,n=4,r={SAVED:"rgba(0, 0, 0, 0.33)",VISUAL:"rgba(0, 0, 0, 0.1)",LEGO_WASH:"rgba(0, 0, 0, 0.4)"},l=120},483205:(e,t,i)=>{"use strict";i.d(t,{I6:()=>n,Nv:()=>a,RZ:()=>r,ZG:()=>o,b9:()=>s,s0:()=>l});let a=44,n=24,r=446,l=.05,s=36,o=20},754320:(e,t,i)=>{"use strict";i.d(t,{Z:()=>p});var a=i(667294),n=i(883119),r=i(407043),l=i(643010),s=i(444445),o=i(898781),d=i(905031),c=i(50286),u=i(785893);let p=({contentIds:e,previewImageSrc:t,url:i,buttonText:p,imageWidth:h,isInMobileCarousel:m,slideWidth:g,shape:_="square",storyId:y,storyType:f,view:x,viewParameter:v,component:b,element:S})=>{let w="square"===_?4:"circle",P=h??s.yF,I=(0,d.Z)()?s.tG:P,T=(0,c.HG)(),k=(0,l.vs)(),{logContextEvent:E}=(0,r.v)(),j=(0,o.ZP)(),A=(0,a.useMemo)(()=>!Number.isNaN(x)&&!Number.isNaN(v)&&!Number.isNaN(b)&&!Number.isNaN(S),[x,v,b,S]),C="lg";return m&&g&&(C=g>150?"lg":g>135&&g<=150?"md":"sm"),(0,a.useEffect)(()=>{A&&E({event_type:120,view_type:x,view_parameter:v,component:b,element:S,aux_data:{content_ids:e,story_id:y,story_type:f}})},[e,E,x,v,b,S,A,y,f]),(0,u.jsx)(n.xu,{"data-test-id":"sf-action-item-rep",children:(0,u.jsx)(n.xu,{color:"secondary",height:m?g:I,overflow:"hidden",rounding:w,width:m?g:I,children:(0,u.jsx)(n.zd,{height:"100%",rounding:w,wash:!0,width:"100%",children:(0,u.jsx)(n.Ee,{alt:j.bt("Action item rep preview image", "Action Item Rep Preview Image", "actionItemRep.image", undefined, true),color:"#fff",fit:"cover",naturalHeight:50,naturalWidth:50,src:t,children:(0,u.jsx)(n.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0,0,0,0.3)"}},display:"flex",height:"100%",justifyContent:"center",left:!0,top:!0,width:"100%",children:(0,u.jsx)(n.ZP,{color:k?"gray":"white",href:i,onClick:()=>{A&&E({event_type:T?101:102,view_type:x,view_parameter:v,component:b,element:S,aux_data:{content_ids:e,story_id:y,story_type:f}})},size:C,text:p})})})})})})}},701865:(e,t,i)=>{"use strict";i.d(t,{Z:()=>j});var a=i(667294),n=i(616550),r=i(883119),l=i(407043),s=i(366428),o=i(992061),d=i(444445),c=i(898781),u=i(608760),p=i(215292),h=i(785893);function m({item:e={},imagePlaceholderColor:t=u.hK,onTap:i}){let n=(0,c.ZP)(),l=e?.cover_images?.[0],s=l?.["236x"];return(0,h.jsx)(r.iP,{onTap:i,children:(0,h.jsxs)(a.Fragment,{children:[(0,h.jsx)(p.q,{children:({hovered:e,onMouseEnter:i,onMouseLeave:a})=>(0,h.jsx)(r.xu,{"data-test-id":"category-bubble",marginBottom:2,onMouseEnter:i,onMouseLeave:a,children:(0,h.jsxs)(r.zd,{height:d.yF,rounding:"circle",wash:!0,width:d.yF,children:[(0,h.jsx)(o.Z,{hovered:e,rounding:"circle"}),(0,h.jsx)(r.Ee,{alt:n.bt("Image previewing contents of an item", "Image previewing contents of an item", "itemRep.userRep.previewImage", undefined, true),color:t,fit:"cover",naturalHeight:d.yF,naturalWidth:d.yF,src:s?.url||""})]})})}),e?.title?.format&&(0,h.jsx)(r.xu,{width:d.yF,children:(0,h.jsx)(r.xv,{align:"center",weight:"bold",children:e.title.format})})]})})}var g=i(752802),_=i(57427),y=i(327651),f=i(641968),x=i(50286);let v=["170x","192x","200x","236x"];var b=i(668916);let S="pill";var w=i(642345),P=i(48125),I=i(429091),T=i(180910);let k=()=>{},E={2:m,3:function({item:e={},onTap:t}){let i=(0,c.ZP)(),a=e?.identifier_icon_type,{icon:n,text:l}=function(e,t){switch(e){case 2:return{icon:"workflow-status-all",text:t.bt("Categories", "Categories", "NavigationBubble.NavigationIcon.utils", undefined, true)};case 3:return{icon:"shopping-bag",text:t.bt("Stores", "Stores", "ExploreArticleRep.NavigationBubble.utils", undefined, true)};case 4:return{icon:"terms",text:t.bt("Your items", "Your items", "ExploreArticleRep.NavigationBubble.utils", undefined, true)};default:return{icon:null}}}(a,i);return(0,h.jsx)(r.iP,{onTap:t,rounding:n?5:S,tapStyle:"compress",children:(0,h.jsx)(p.q,{children:({active:t,hovered:i,onMouseEnter:a,onMouseLeave:s,onFocus:c,onBlur:u})=>(0,h.jsxs)(r.xu,{"data-test-id":"navigation-bubble",onBlur:u,onFocus:c,onMouseEnter:a,onMouseLeave:s,rounding:5,children:[n&&(0,h.jsxs)(r.zd,{height:85,rounding:5,wash:!0,width:85,children:[(0,h.jsx)(o.Z,{hovered:i}),(0,h.jsx)(r.xu,{alignItems:"center",color:"secondary",display:"flex",height:"100%",justifyContent:"center",padding:2,width:"100%",children:(0,h.jsx)(r.JO,{accessibilityLabel:l||"",color:"default",icon:n,size:32})})]}),l&&(0,h.jsx)(r.xu,{marginTop:2,width:85,children:(0,h.jsx)(r.xv,{align:"center",weight:"bold",children:l})}),!n&&!l&&e?.title?.format&&(0,h.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:e.aux_fields?.button_background_color}},rounding:S,children:(0,h.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:t&&"rgba(0, 0, 0, 0.15)"||i&&"rgba(0, 0, 0, 0.06)"||void 0}},padding:4,rounding:S,children:(0,h.jsx)(r.xv,{align:"center",color:e.aux_fields?.button_text_color==="#ffffff"?"inverse":"default",weight:"normal",children:(0,h.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap",textOverflow:"ellipsis"}},maxWidth:d.yF-16,overflow:"hidden",children:e.title.format})})})})]})})})},1:function({item:e={},onTap:t}){let i=(0,c.ZP)(),a=e?.cover_images?.[0],n=a?.["236x"];return(0,h.jsx)(r.iP,{onTap:t,rounding:3,tapStyle:"compress",children:(0,h.jsx)(p.q,{children:({hovered:t,onMouseEnter:a,onMouseLeave:l})=>(0,h.jsx)(r.xu,{"data-test-id":"search-bubble",onMouseEnter:a,onMouseLeave:l,rounding:3,children:(0,h.jsxs)(r.zd,{height:150,rounding:3,wash:!0,width:300,children:[(0,h.jsx)(o.Z,{hovered:t}),(0,h.jsx)(r.Ee,{alt:i.bt("Image previewing contents of an item", "Image previewing contents of an item", "itemRep.userRep.previewImage", undefined, true),fit:"cover",naturalHeight:150,naturalWidth:300,role:"presentation",src:n?.url||"",children:(0,h.jsx)(r.xu,{alignItems:"center",color:"transparentDarkGray",display:"flex",height:150,justifyContent:"center",padding:3,position:"absolute",top:!0,width:300,children:e?.title?.format&&(0,h.jsx)(r.X6,{color:"inverse",size:"400",children:e.title.format})})})]})})})})},4:function({item:e,onTap:t,slotIndex:i}){let{action:a,aux_fields:n,cover_images:l,dominant_colors:s,title:o}=e;if(!o||!l||!a)return null;let d=l.length<=0?[{}]:l.slice(0,2);return(0,h.jsx)(r.iP,{onTap:t,rounding:4,tapStyle:"compress",children:(0,h.jsxs)(r.xu,{alignItems:"center","data-test-id":"style-bubble",display:"flex",height:258,justifyContent:"center",overflow:"hidden",position:"relative",rounding:4,width:I.u,children:[(0,h.jsx)(r.kC,{children:d.map((e,t)=>(0,h.jsx)(r.zd,{height:258,wash:!0,width:I.u/d.length,children:(0,h.jsx)(r.Ee,{alt:"",color:(s||[])[t],fit:"cover",naturalHeight:1,naturalWidth:1,role:"presentation",src:e["474x"]?.url||e["736x"]?.url||e["236x"]?.url||""})},`styleCarousel_bubble${i}_pin${t}`))}),(0,h.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:n?.button_background_color}},paddingX:4,paddingY:3,position:"absolute",rounding:"pill",children:(0,h.jsx)(r.xv,{align:"center",weight:"bold",children:(0,h.jsx)("span",{style:{color:n?.button_text_color,margin:"0"},children:o.format})})})]})})},13:({item:e={},onTap:t})=>{let i=(0,c.ZP)(),a=(0,x.HG)(),n=e.action?.url;if(!n)return null;let l=e.curator||{},s=l.full_name||"",o=l.username||"",u=l.image_medium_url||"",p=l.verified_identity?.verified||!1,m=l.is_verified_merchant||!1,[b={},S={}]=e.cover_images||[],w=g.Z({images:b,resolutionPreferences:v})?.url||"",P=g.Z({images:S,resolutionPreferences:v})?.url||"",I=a?d.yF:d.tG;return(0,h.jsxs)(r.xu,{"data-test-id":"default-brand-article",width:I,children:[(0,h.jsx)(r.Tg,{accessibilityLabel:"",href:n,onTap:t,rounding:3,children:(0,h.jsxs)(r.xu,{height:157,children:[(0,h.jsx)(r.zd,{height:157,rounding:4,wash:!0,width:I,children:w&&P&&(0,h.jsxs)(r.kC,{children:[(0,h.jsx)(_.Z,{height:157,src:w,width:I/2}),(0,h.jsx)(r.xu,{color:"default",width:1}),(0,h.jsx)(_.Z,{height:157,src:P,width:I/2})]})}),(0,h.jsx)(r.xu,{display:"flex",justifyContent:"center",marginTop:-8,children:(0,h.jsx)(y.Z,{color:"gray",fullName:s||o,size:64,src:u||""})})]})}),(0,h.jsx)(r.xu,{height:40}),s&&(0,h.jsx)(f.Z,{isVerifiedIdentity:p,isVerifiedMerchant:m,name:s}),(0,h.jsx)(r.xu,{display:"flex",justifyContent:"center",marginBottom:2,marginTop:2,width:"100%",children:(0,h.jsx)(r.ZP,{accessibilityLabel:i.bt("Navigate to a feed of products from this brand", "Navigate to a feed of products from this brand", "StructuredFeed.ItemReps.ExploreArticleRep.DefaultBrandArticle.linkAccessibilityLabel", undefined, true),href:n,size:"lg",text:i.bt("Shop", "Shop", "StructuredFeed.ItemReps.ExploreArticleRep.DefaultBrandArticle.ButtonText", undefined, true)})})]})},19:function({item:e,onTap:t}){let i=(0,x.HG)(),{action:a,cover_images:n,dominant_colors:l,title:s,subtitle:o}=e,d=s?.format;if(!d||!n||!a)return null;let c=i?200:150,u=i?T.KW:T.hk,p=i?T.d:T.Gd,m=o?.format||"",_=n.slice(0,3);return(0,h.jsx)(r.iP,{onTap:t,rounding:4,tapStyle:"compress",children:(0,h.jsxs)(r.xu,{"data-test-id":"triple-preview-display-card",rounding:4,width:p,children:[(0,h.jsx)(r.zd,{height:c,rounding:4,wash:!0,width:p,children:(0,h.jsx)(r.kC,{alignItems:"stretch",justifyContent:"start",children:_.map((e,t)=>{let i=g.Z({images:e,resolutionPreferences:["200x","236x","400x"]})?.url||"";return(0,h.jsx)(r.xu,{height:c,width:u,children:(0,h.jsx)(r.Ee,{alt:"",color:(l||[])[t],fit:"cover",naturalHeight:200,naturalWidth:200,role:"presentation",src:i})},i)})})}),(0,h.jsxs)(r.xu,{marginTop:4,children:[(0,h.jsx)(r.kC,{justifyContent:"center",children:(0,h.jsx)(r.xv,{align:"center",size:"400",weight:"bold",children:d})}),m&&(0,h.jsx)(r.xu,{display:"flex",justifyContent:"center",marginTop:1,children:(0,h.jsx)(r.xv,{align:"center",color:"subtle",size:i?"200":"100",children:m})})]})]})})},20:function({item:e,onTap:t}){let i=(0,x.HG)(),{action:a,cover_images:n,aux_fields:l,title:s,subtitle:o,dominant_colors:d=[]}=e,c=s?.format||"",{background_color:u}=l||{};if(!c||!n||!a||!u)return null;let p=i?P.m:P.d,m=i?186:160,_=i?126:108,y=i?137:118,f=i?92:80,v=o?.format||"",b=n.slice(0,3).map(e=>g.Z({images:e,resolutionPreferences:["200x","236x","400x"]})?.url||""),S=(0,w.zI)(u)?"light":"dark";return(0,h.jsx)(r.iP,{onTap:t,rounding:4,tapStyle:"compress",children:(0,h.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:u}},"data-test-id":"stacked-collage-display-card",height:p,overflow:"hidden",rounding:4,width:p,children:(0,h.jsxs)(r.xu,{height:p,padding:2,position:"relative",children:[(0,h.jsxs)(r.xu,{marginBottom:3,marginTop:4,children:[(0,h.jsx)(r.kC,{justifyContent:"center",children:(0,h.jsx)(r.xv,{align:"center",color:S,lineClamp:1,size:"400",weight:"bold",children:c})}),v&&(0,h.jsx)(r.xu,{display:"flex",justifyContent:"center",marginTop:1,children:(0,h.jsx)(r.xv,{align:"center",color:S,lineClamp:1,size:"100",children:o?.format})})]}),(0,h.jsx)(r.xu,{bottom:!0,left:!0,position:"absolute",children:(0,h.jsx)(r.zd,{height:y,rounding:4,wash:!0,width:f,children:(0,h.jsx)(r.xu,{height:y,width:f,children:(0,h.jsx)(r.Ee,{alt:"",color:d[1],fit:"cover",naturalHeight:200,naturalWidth:200,role:"presentation",src:b[1]})})})}),(0,h.jsx)(r.xu,{bottom:!0,position:"absolute",right:!0,children:(0,h.jsx)(r.zd,{height:y,rounding:4,wash:!0,width:f,children:(0,h.jsx)(r.xu,{height:y,width:f,children:(0,h.jsx)(r.Ee,{alt:"",color:d[2],fit:"cover",naturalHeight:200,naturalWidth:200,role:"presentation",src:b[2]})})})}),(0,h.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{bottom:"-22px"}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,children:(0,h.jsx)(r.zd,{height:m,rounding:4,wash:!0,width:_,children:(0,h.jsx)(r.xu,{height:m,width:_,children:(0,h.jsx)(r.Ee,{alt:"",color:d[0],fit:"cover",naturalHeight:200,naturalWidth:200,role:"presentation",src:b[0]})})})})]})})})},21:function({item:e,onTap:t}){let{cover_images:i,dominant_colors:a,title:n}=e;if(!n||!i)return null;let l=i[0];return(0,h.jsx)(r.iP,{onTap:t,rounding:4,tapStyle:"compress",children:(0,h.jsx)(r.xu,{borderStyle:"shadow",color:"default",height:189,overflow:"hidden",position:"relative",rounding:4,width:b.H,children:(0,h.jsx)(r.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,h.jsx)(r.Ee,{alt:"",color:(a||[])[0],fit:"cover",naturalHeight:1,naturalWidth:1,role:"presentation",src:l["474x"]?.url||l["736x"]?.url||l["236x"]?.url||"",children:(0,h.jsx)(r.xu,{alignItems:"end",dangerouslySetInlineStyle:{__style:{background:"linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.4) 100%)"}},display:"flex",height:"100%",paddingX:3,paddingY:3,width:"100%",children:(0,h.jsx)(r.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",width:"100%",children:(0,h.jsx)(r.xv,{align:"start",color:"light",size:"300",weight:"bold",children:n.format})})})})})})})}};function j(e){let{component:t,slotIndex:i,item:o,showExpandedHeader:d,story:c,view:u,viewParameter:p}=e,{display_options:g,story_type:_,id:y,content_ids:f}=c||{},{logContextEvent:x}=(0,l.v)(),v=(0,n.k6)(),b=o?.id,S=(0,a.useMemo)(()=>({story_type:_,story_id:y,content_ids:f,article_id:b}),[b,f,y,_]),w=(0,s.Z)({componentType:t,contextLogData:S,impressionType:"Article",loggingId:b,objectIdStr:b,slotIndex:i,viewParameter:p,viewType:u}),P=d?g?.item_view_rep_style?.expanded_explore_article_rep_style:g?.item_view_rep_style?.explore_article_rep_style,{action:I}=o||{},{url:T=""}=I||{},j=Object.hasOwnProperty.call(E,P)?E[P]:m,A=d?k:()=>{v.push(T),x({event_type:101,component:t,view_type:u,view_parameter:p,aux_data:S})};return(0,h.jsx)(r.xu,{ref:w,children:(0,h.jsx)(j,{...e,onTap:A})})}},668916:(e,t,i)=>{"use strict";i.d(t,{H:()=>a});let a=252},48125:(e,t,i)=>{"use strict";i.d(t,{d:()=>a,m:()=>n});let a=216,n=258},429091:(e,t,i)=>{"use strict";i.d(t,{u:()=>a});let a=369},180910:(e,t,i)=>{"use strict";i.d(t,{Gd:()=>r,KW:()=>n,d:()=>l,hk:()=>a});let a=108,n=124,r=3*a,l=3*n},232921:(e,t,i)=>{"use strict";i.d(t,{lf:()=>n,wg:()=>r,xR:()=>a});let a=299,n=270,r=232},981228:(e,t,i)=>{"use strict";i.d(t,{Z:()=>x});var a=i(667294),n=i(883119),r=i(407043),l=i(34518);let s=e=>e?l.a$:l.Ql;function o(e,t,i){return{backgroundColor:`rgba(${e.join(", ")}, ${s(i||t)})`,marginRight:t?"2px":"0px",marginLeft:t?"2px":"0px"}}var d=i(232921),c=i(785893);let u={MOBILE:{HEIGHT_PX:64,WIDTH_PX:48},SMALL:{HEIGHT_PX:72,WIDTH_PX:54},DEFAULT:{HEIGHT_PX:96,WIDTH_PX:72},LARGE:{HEIGHT_PX:130,WIDTH_PX:98}},p=(e,t,i)=>{let a;switch(i){case"MOBILE":a={0:{transform:"rotate(-15deg)",top:"6px",left:"16px"},1:{transform:"rotate(0deg)",top:"3px",left:"30px"},2:{transform:"rotate(15deg)",top:"6px",left:"44px"}};break;case"SMALL":a={0:{transform:t?"rotate(-22deg)":"rotate(-15deg)",top:"12px",left:"12px"},1:{transform:t?"rotate(1deg)":"rotate(0deg)",top:t?"6px":"10px",left:"26px"},2:{transform:t?"rotate(24deg)":"rotate(15deg)",top:"12px",left:"40px"}};break;case"LARGE":a={0:{transform:t?"rotate(-26deg)":"rotate(-15deg)",top:"50px",left:"44px"},1:{transform:t?"rotate(1deg)":"rotate(0deg)",top:t?"36px":"40px",left:"68px"},2:{transform:t?"rotate(26deg)":"rotate(15deg)",top:"56px",left:"98px"}};break;default:a={0:{transform:t?"rotate(-22deg)":"rotate(-15deg)",top:"20px",left:"64px"},1:{transform:t?"rotate(1deg)":"rotate(0deg)",top:t?"10px":"14px",left:"82px"},2:{transform:t?"rotate(24deg)":"rotate(15deg)",top:"20px",left:"100px"}}}let n=a[e];return n.border="1px solid #FFFFFF",n.transition="all 150ms ease-out",n};function h({fanOut:e,card:t,index:i,size:a}){let r;let l=u[a],{height:s=l.HEIGHT_PX,url:o,width:d=l.WIDTH_PX,colorRGB:h,opacity:m}=t;return o?r=(0,c.jsx)(n.Ee,{alt:o,fit:"cover",naturalHeight:s,naturalWidth:d,src:o}):h&&m&&(r=(0,c.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:`rgba(${h.join(", ")}, ${m})`}},height:l.HEIGHT_PX,width:l.WIDTH_PX})),(0,c.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:p(i,e,a)},position:"absolute",rounding:5,children:(0,c.jsx)(n.zd,{height:l.HEIGHT_PX,rounding:5,wash:!0,width:l.WIDTH_PX,children:r})})}function m(){return(0,c.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, 0.03)"}},left:!0,position:"absolute",right:!0,rounding:l.N3,top:!0})}var g=i(605706),_=i(50286);let y={1:function(e){let{pinCards:t,isClicked:i,isHovered:a,item:r={},story:s}=e,u=(0,_.HG)(),p=(0,g.Z)(),y=s&&s.objects?.length,{board_name:f,header_text:x,top_image_dominant_color_rgb:v}=r,b=i?106:110,S=i?d.xR-4:d.xR;u||(b=90,S=1===y?"100%":p?d.wg:d.lf);let w=155;return u||(w=p?108:148),(0,c.jsxs)(n.xu,{dangerouslySetInlineStyle:{__style:o(v,i,a)},display:"flex",height:b,paddingY:2,position:"relative",rounding:l.N3,width:S,children:[(0,c.jsx)(m,{}),(0,c.jsx)(n.xu,{position:"relative",width:u?112:100,children:t.map((e,t)=>(0,c.jsx)(h,{card:e,fanOut:a||i,index:t,size:u?"SMALL":"MOBILE"},t))}),(0,c.jsxs)(n.xu,{direction:"column",display:"flex",justifyContent:"center",marginStart:u?2:3,width:w,children:[(0,c.jsx)(n.xv,{size:u?"200":"100",children:x}),(0,c.jsx)(n.xv,{lineClamp:2,size:"400",weight:"bold",children:f})]})]})},3:function(e){let{pinCards:t,isClicked:i,isHovered:a,item:r}=e,{board_name:s,top_image_dominant_color_rgb:d}=r;return(0,c.jsxs)(n.xu,{alignItems:"end",dangerouslySetInlineStyle:{__style:o(d,i,a)},display:"flex",height:i?165:169,justifyContent:"center",paddingX:4,paddingY:3,position:"relative",rounding:l.N3,width:i?232:236,children:[(0,c.jsx)(m,{}),t.map((e,t)=>(0,c.jsx)(h,{card:e,fanOut:a||i,index:t,size:"DEFAULT"},t)),(0,c.jsx)(n.xv,{align:"center",lineClamp:1,size:"200",weight:"bold",children:s})]})},4:function(e){let{logContextEvent:t}=(0,r.v)(),{pinCards:i,isHovered:a,item:s,view:d,viewParameter:u}=e,{action:p,board_name:g,header_text:_,ideas_deep_link_url:y,top_image_dominant_color_rgb:f}=s,x=p?.url??y.concat("?ideas_referrer=25");return(0,c.jsxs)(n.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:o(f,!1,a)},direction:"column",display:"flex",justifyContent:"end",marginBottom:6,minHeight:377,paddingX:4,paddingY:8,position:"relative",rounding:l.N3,width:236,children:[i.map((e,t)=>(0,c.jsx)(h,{card:e,fanOut:a,index:t,size:"LARGE"},t)),(0,c.jsx)(n.xu,{height:168,width:"100%"}),(0,c.jsx)(m,{}),(0,c.jsxs)(n.kC,{alignItems:"stretch",direction:"column",height:"100%",justifyContent:"end",children:[(0,c.jsxs)(n.xu,{alignItems:"center",direction:"column",display:"flex",marginBottom:5,marginTop:5,children:[(0,c.jsx)(n.xu,{marginBottom:1,children:(0,c.jsx)(n.xv,{size:"200",weight:"bold",children:_})}),(0,c.jsx)(n.xv,{align:"center",size:"500",weight:"bold",children:g})]}),(0,c.jsx)(n.xu,{display:"flex",justifyContent:"center",marginTop:1,position:"relative",width:"100%",children:(0,c.jsx)(n.ZP,{color:"white",href:x,onClick:({event:e})=>{e.stopPropagation(),t({event_type:101,view_type:d,view_parameter:u,component:14268,element:13002,object_id_str:s.board_id})},size:"lg",text:"Explore"})})]})]})}},f=["100%","60%"];function x(e){let{component:t,isInViewOrNext:i,item:{action:s,board_id:o,ideas_deep_link_url:d,images:u,image_dominant_color_rgb:p},slotIndex:h,story:m={},view:g,viewParameter:x}=e,{logContextEvent:v}=(0,r.v)(),b=(0,_.ZP)(),{display_options:S,objects:w}=m,P=w?.length,[I,T]=(0,a.useState)(!1),[k,E]=(0,a.useState)(!1),[j,A]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if("desktop"===b){let e=setTimeout(()=>A(!0),700);return()=>{clearTimeout(e)}}},[b]);let C=[],F="desktop"!==b?l.mS:l.S$;(i||"desktop"!==b)&&(C=j?[...u[F]]:[u[F][0]]);let R=3-C.length;for(let e=0;e<R;e+=1)C.push({colorRGB:p,opacity:f[e]});C.reverse();let D=S?.item_view_rep_style?.more_ideas_rep_style,O=y[D],L=t||l.kx[D],M=s?.url??d.concat("?ideas_referrer=25");return O&&(0,c.jsx)(n.Tg,{href:M,onMouseDown:()=>E(!0),onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),onTap:()=>v({event_type:101,view_type:g,view_parameter:x,component:L,element:13002,object_id_str:o,aux_data:{index:h,total_object_count:P}}),children:(0,c.jsx)(O,{isClicked:k,isHovered:I,pinCards:C,...e})})}},34518:(e,t,i)=>{"use strict";i.d(t,{N3:()=>a,Ql:()=>n,S$:()=>l,a$:()=>r,kx:()=>o,mS:()=>s});let a=4,n=.35,r=.5,l="170x",s="136x136",o={1:14114,3:14074,4:14268}},988874:(e,t,i)=>{"use strict";i.d(t,{Z:()=>g});var a=i(616550),n=i(883119),r=i(444445),l=i(91885),s=i(477802),o=i(826067),d=i(50286),c=i(8742),u=i(785893);let p=new Set(["shopping_module_closeup","product_pins","shopping_list","shop_tab_upsell"]),h=new Set(["product_tagged_shopping_module_upsell"]),m=e=>e?.shop_source||p.has(e?.story_type)?"ShoppingDynamicHeightGrid":"StoryFeedNonProduct";function g(e){let{pins_display:t}=(0,o.mB)((0,a.TH)().search),{component:i,isInMobileCarousel:p,imageWidth:g,item:_,saveButtonOptions:y,slideWidth:f,slotIndex:x,story:v,surface:b,view:S,viewParameter:w}=e,P=g??r.yF,I="desktop"===(0,d.ZP)(),T=I?P:r.tG;if(!_)return null;let{story_type:k,id:E,content_ids:j,display_options:A,user:C}=v||{},{pins_display:F}=A?.content_display||{},{id:R,debug:D}=_,O=![3,1].includes(F??Number(t)),L={story_type:k,story_id:E,content_ids:j},M=b||m(v),N={auxData:L,componentType:v?.display_options?.content_display?.component_type??i,impressionData:L,pinId:R,slotIndex:x,viewData:{pin_id:R},viewParameter:w,viewType:S},Z={authDesktopSurface:M,disableHover:!I,pin:_,pinImageCrop:O?{height:T,width:T}:null,saveButtonOptions:y,pinOwner:h.has(k)&&C?C:null},K=(0,u.jsxs)(n.xu,{"data-test-id":l.Kb,children:[(0,u.jsx)(c.ZP,{...N,...Z,duploDisablePinCardPadding:p,duploIsSquarePin:O,duploQueryRef:null,trafficSource:"ShoppingDynamicHeightGrid"===M?"shop_feed":void 0}),D&&(0,u.jsx)(s.Wu,{data:D})]});return O?(0,u.jsx)(n.xu,{flex:"none",width:p?f:T,children:K},R):K}},57427:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var a=i(883119),n=i(785893);function r({height:e,width:t,src:i}){return(0,n.jsx)(a.xu,{height:e,width:t,children:(0,n.jsx)(a.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:e,naturalWidth:t,role:"presentation",src:i})})}},456183:(e,t,i)=>{"use strict";i.d(t,{Z:()=>y});var a=i(667294),n=i(616550),r=i(883119),l=i(407043),s=i(366428),o=i(444445),d=i(327651),c=i(641968),u=i(608760),p=i(785893);let h=.4*o.yF,m=.75*o.yF;var g=i(57427);let _={5:({item:e,imagePlaceholderColor:t=u.hK})=>{let{username:i,image_large_url:a,full_name:n,is_verified_merchant:l=!1,verified_identity:s}=e;return(0,p.jsxs)(r.xu,{width:o.yF,children:[(0,p.jsx)(r.xu,{display:"flex",justifyContent:"center",marginBottom:2,children:(0,p.jsx)(d.Z,{color:t,fullName:n||i,size:120,src:a||""})}),n&&(0,p.jsx)(c.Z,{isVerifiedIdentity:!!s?.verified,isVerifiedMerchant:l,name:n})]})},1:({item:e={},story:t,imagePlaceholderColor:i=u.hK})=>{let{username:a,image_large_url:n,full_name:l,id:s,is_verified_merchant:_=!1,verified_identity:y}=e,f=t?.custom_properties?.preview_image_map?.[s]?.[0]||"";return(0,p.jsxs)(r.xu,{height:o.yF,width:o.yF,children:[(0,p.jsx)(r.zd,{height:m,rounding:4,wash:!0,width:o.yF,children:(0,p.jsx)(g.Z,{height:o.yF,src:f,width:o.yF})}),(0,p.jsx)(r.xu,{display:"flex",justifyContent:"center",marginBottom:2,marginTop:-12,children:(0,p.jsx)(d.Z,{color:i,fullName:l||a,size:h,src:n||""})}),l&&(0,p.jsx)(c.Z,{isVerifiedIdentity:!!y?.verified,isVerifiedMerchant:_,name:l})]})},2:({item:e={},story:t})=>{let{username:i,image_large_url:a,full_name:n,id:l,is_verified_merchant:s=!1,verified_identity:u}=e,[_="",y=""]=t?.custom_properties?.preview_image_map?.[l]||[];return(0,p.jsxs)(r.xu,{width:o.yF,children:[(0,p.jsxs)(r.xu,{height:o.yF,children:[(0,p.jsx)(r.zd,{height:m,rounding:4,wash:!0,width:o.yF,children:(0,p.jsxs)(r.kC,{children:[(0,p.jsx)(g.Z,{height:o.yF,src:_,width:o.yF/2}),(0,p.jsx)(r.xu,{color:"default",width:2}),(0,p.jsx)(g.Z,{height:o.yF,src:y,width:o.yF/2})]})}),(0,p.jsx)(r.xu,{display:"flex",justifyContent:"center",marginBottom:2,marginTop:-12,children:(0,p.jsx)(d.Z,{color:"gray",fullName:n||i,size:h,src:a||""})})]}),n&&(0,p.jsx)(c.Z,{isVerifiedIdentity:!!u?.verified,isVerifiedMerchant:s,name:n})]})}};function y(e){let{logContextEvent:t}=(0,l.v)(),i=(0,n.k6)(),{story:o={},slotIndex:d,component:c,view:u,viewParameter:h,item:m}=e,g=o.display_options?.item_view_rep_style?.user_rep_style||5,y=_[g],f=(0,a.useMemo)(()=>({story_type:o.story_type,story_id:o.id,content_ids:o.content_ids,user_id:m.id}),[m,o]),x=(0,s.Z)({contextLogData:f,impressionType:"User",loggingId:m.id,objectIdStr:m.id,slotIndex:d,viewParameter:h,viewType:u});return y?(0,p.jsx)(r.iP,{ref:x,onTap:()=>{t({event_type:101,view_type:u,view_parameter:h,component:c,aux_data:f}),i.push(`/${m.username}`)},children:(0,p.jsx)(y,{...e})}):null}},327651:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var a=i(883119),n=i(992061),r=i(898781),l=i(349700),s=i(215292),o=i(785893);function d({color:e,fullName:t,size:i,src:d}){let c=(0,r.ZP)();return(0,o.jsx)(s.q,{children:({hovered:r,onMouseEnter:s,onMouseLeave:u})=>(0,o.jsx)(a.xu,{"data-test-id":"category-bubble",marginBottom:2,onMouseEnter:s,onMouseLeave:u,children:(0,o.jsxs)(a.zd,{height:i,rounding:"circle",wash:!0,width:i,children:[(0,o.jsx)(n.Z,{hovered:r,rounding:"circle"}),(0,o.jsx)(a.Ee,{alt:(0,l.nk)(c.bt("Logo of {{ fullName }}", "Logo of {{ fullName }}", "itemRep.userRep.brandLogo", undefined, true),{fullName:t}).join(""),color:e,naturalHeight:i,naturalWidth:i,src:d})]})})})}},641968:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var a=i(883119),n=i(865607),r=i(785893);function l({name:e,isVerifiedIdentity:t,isVerifiedMerchant:i}){return(0,r.jsxs)(a.kC,{alignContent:"center",alignItems:"stretch",gap:1,justifyContent:"center",children:[e&&(0,r.jsx)(a.xv,{inline:!0,weight:"bold",children:e}),(0,r.jsx)(n.Z,{isVerifiedIdentity:t,isVerifiedMerchant:i,size:"sm"})]})}},87165:(e,t,i)=>{"use strict";i.d(t,{i:()=>s});var a=i(883119),n=i(444445),r=i(785893);function l(){return(0,r.jsx)(a.xu,{width:n.yF})}function s(e){return Array(e).fill().map((e,t)=>(0,r.jsx)(l,{},t))}},63404:(e,t,i)=>{"use strict";i.d(t,{Z:()=>x,v:()=>g});var a,n=i(167912),r=i(240684),l=i(175892),s=i(897243),o=i(934494),d=i(701865),c=i(981228),u=i(988874),p=i(456183),h=i(785893);let m=(0,r.ZP)({resolved:{},chunkName:()=>"DefaultPinRep",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>Promise.all([i.e(97270),i.e(18352),i.e(10966),i.e(89363),i.e(39921)]).then(i.bind(i,369083)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return i(t)},resolve:()=>369083});function g(e){return e?.type==="pin"&&(e.images?.["236x"]||{}).url||null}let _=void 0!==a?a:a=i(883597);function y(e){let{itemData:t,...i}=e,{slotIndex:a,view:n,item:r}=e,{pinId:o,pinGraphQLRef:g}=t;if(g)return o&&n?(0,h.jsx)(m,{duploQueryRef:g,pinId:o,slotIndex:a,viewType:n}):null;switch(r?.type){case"pin":return(0,h.jsx)(u.Z,{...i});case"user":return(0,h.jsx)(p.Z,{...i});case"board_more_ideas_feed_upsell":return(0,h.jsx)(c.Z,{...i});case"explorearticle":return(0,h.jsx)(d.Z,{...i});case"productgroup":return(0,h.jsx)(l.Z,{productGroup:{coverImages:r.cover_images?.map(e=>s.b(e)),description:r.description,entityId:r.id??"",groupType:r.group_type,name:r.name,previewPins:r.preview_pins?.map(e=>({imageSignature:e.image_signature,images:e.images&&s.b(e.images)}))},slotIndex:a});default:return null}}let f=(0,o.Z)({useGraphQLAdapter:e=>{let t=(0,n.useFragment)(_,e),{pinId:i}=t;return{pinId:i,pinGraphQLRef:t}},useLegacyAdapter:e=>e?{item:e,pinGraphQLRef:null}:null});function x({pinGraphQLRef:e,...t}){return(0,h.jsx)(f,{input:e?{enabled:!0,data:e}:{enabled:!1,data:t.item},children:({data:e})=>e&&(0,h.jsx)(y,{...t,itemData:e})})}},643897:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var a=i(883119),n=i(608760),r=i(785893);let l=new Map([["pin",4]]);function s({children:e,itemType:t}){return(0,r.jsx)(a.xu,{marginBottom:l.get(t)||n.mT,children:e})}},608760:(e,t,i)=>{"use strict";i.d(t,{g5:()=>l,hK:()=>n,mT:()=>r});var a=i(988874);let n="lightGray",r=8,l={itemRep:a.Z,shape:"square",getImage:()=>""}},563886:(e,t,i)=>{"use strict";i.d(t,{Z:()=>z});var a,n=i(667294),r=i(167912),l=i(883119),s=i(792182),o=i(934494),d=i(444445),c=i(898781),u=i(773285),p=i(754320),h=i(668916),m=i(48125),g=i(429091),_=i(180910),y=i(34518),f=i(232921),x=i(63404),v=i(580326),b=i(848385),S=i(605706),w=i(782975),P=i(905031),I=i(50286),T=i(435497),k=i(239062),E=i(751191),j=i(455024),A=i(390598),C=i(785893);let F=new Set([3,4]),R=new Set([1]),D=({text:e,url:t})=>!!e&&!!t,O=e=>D(e)&&F.has(e.location),L=e=>D(e)&&R.has(e.location),M=void 0!==a?a:a=i(992872),N=({contentVisibleItemCount:e,moduleWidth:t,gutterWidth:i,isMoreIdeasListCard:a,isStyleBubble:n,isImageAndTitleRep:r,isStorefrontSpotlightCarousel:l,isSfModuleOnMobile:s,isSmallMobileScreen:o,isStackedCollageDisplayCard:c,isTriplePreviewDisplayCard:u,totalObjectCount:p,containerRef:y,deviceType:x,windowWidth:v})=>{let b=s?d.tG:d.yF,S="desktop"===x;if(u)return S?_.d:_.Gd;if(c)return S?m.m:m.d;if(a)return S?f.xR:1===p?y.current?.clientWidth||0:o?f.wg:f.lf;if(n)return g.u;if(r)return h.H;if(l)return A.PRODUCT_GROUP_COVER_IMAGE_DIMENSIONS.WIDTH;if(e){let a=S?d.oX:d.yt,n=i??a,r=t?(0,d.Wv)({contentVisibleItemCount:e,gap:n,width:parseInt(t,10)}):d.yF,l=S?r:d.tG,s=Math.floor(e);return Math.min(Math.floor((v-s*n)/e),parseInt(l,10))}return b};function Z(e){let{addContentRight:t,componentFallback:i,dangerouslySetActionUrl:a,disableHeader:r,gutterWidth:o,initialSlotIndex:h=0,styleOverrides:m,saveButtonOptions:g,storyData:_,surface:f,view:A,viewParameter:F,width:R}=e,{data:{contentIds:D,displayOptions:M,objects:Z,action:K,storyId:z,storyTitle:H,storyType:U},rawStoryData:B,storyGraphqlRef:G,__dataKeys:$}=_,[V,W]=(0,n.useState)(0),Y=(0,n.useRef)(null),q=(0,P.Z)(),X=(0,S.Z)(),Q=(0,I.ZP)(),J="desktop"===Q,{width:ee=0}=(0,s.Z)()||{},et=(0,c.ZP)(),{checkExperiment:ei}=(0,u.F)();if(!Z)return null;let ea=M?.contentDisplay?.componentType??i,en=M?.carouselFadeEnds===1,er=Z.length,el={carouselSlots:Z.map(e=>"graphql"===e.type?{title:void 0,id:void 0}:{title:e.data.title,id:e.data.id}),entityId:"",index:V},{text:es,url:eo,location:ed}=K??{},ec=a??eo,eu={backgroundColor:"default",hoverColor:"default",iconColor:"default",size:m?.navigationFabSize??void 0},ep={backgroundColor:"secondary",hoverColor:"secondary",iconColor:"subtle",size:32},eh=M?.itemViewRepStyle?.moreIdeasRepStyle,em=y.kx[eh],eg=M?.itemViewRepStyle?.exploreArticleRepStyle===4,e_=M?.itemViewRepStyle?.exploreArticleRepStyle===21,ey=M?.contentDisplay?.componentType===13698,ef=M?.itemViewRepStyle?.exploreArticleRepStyle===19,ex=M?.itemViewRepStyle?.exploreArticleRepStyle===20,ev=M?.headerDisplay?.expandedTextAlignment!==null,eb=J?M?.contentDisplay?.contentVisibleItemCount?.web:M?.contentDisplay?.contentVisibleItemCount?.mobile,eS=M?.contentDisplay?.carouselScrollingMode===3,ew=M?.contentDisplay?.carouselDisplayOptions?.navigationType,eP=J&&0===ew,eI="recently_viewed"===U,eT=eI?ei("web_shopping_recently_viewed_module_ranked").group:"",ek=(()=>{if(eT.startsWith("enabled_a1")){let e=Math.floor(Z.length/3);return 3*e}return eT.startsWith("enabled")?3:Number(Z.length)})();el.carouselSlots=el.carouselSlots.slice(0,ek);let eE=eI?4:0,ej=!!eT.startsWith("enabled_a"),eA=eT.startsWith("enabled_b")?Z[0].data?.dominantColor:void 0;eI&&(eu.size=32);let eC=o??d.oX,eF=J?eC:d.yt,eR=Z.filter(({data:e})=>!!e).slice(0,ek),eD=M?.contentDisplay?.gridLayout?.cols,eO="number"==typeof eD?eD:-1,eL=eO*(J?d.yF:d.tG)+(eO-1)*eF,eM=-1===eO||R?void 0:eL,eN=Number(R??eM)-8*eE-(ej?4:0),eZ=N({containerRef:Y,contentVisibleItemCount:eb,moduleWidth:eN,gutterWidth:o,isMoreIdeasListCard:1===eh,isStyleBubble:eg,isImageAndTitleRep:e_,isStorefrontSpotlightCarousel:ey,isSfModuleOnMobile:q,isSmallMobileScreen:X,totalObjectCount:er,isStackedCollageDisplayCard:ex,isTriplePreviewDisplayCard:ef,deviceType:Q,windowWidth:ee}),eK=(0,j.tD)({slotWidth:eZ,containerWidth:Y.current?.clientWidth||0,gap:eF,numberOfSlides:eR.length,index:V}),ez=R?eZ:void 0;return(0,C.jsx)(l.xu,{borderStyle:ej?"lg":void 0,dangerouslySetInlineStyle:eA?{__style:{backgroundColor:eA}}:void 0,rounding:4,width:eM,children:(0,C.jsxs)(l.xu,{dangerouslySetInlineStyle:eA?{__style:{backgroundColor:"rgba(255, 255, 255, 0.7)"}}:void 0,direction:"column",display:"flex",padding:eE,children:[H&&!r&&(0,C.jsx)(b.Z,{showExpanded:ev,showExtraSmallSubtitle:!!eI,storyKey:$.HeaderModule_story}),(0,C.jsxs)(l.xu,{ref:Y,marginBottom:eP&&!eE?8:0,position:"relative",children:[eP&&(0,C.jsx)(k.default,{backNode:(0,C.jsx)(E.Z,{...eu,iconType:"back",showFab:!0}),carouselData:el,carouselIndex:V,componentType:ea,contextLogData:eh?{index:V}:{},forwardNode:(0,C.jsx)(E.Z,{...eu,iconType:"forward",showFab:!0}),handleCarouselSwipe:e=>{W(e)},isShowingLastSlide:eK,itemsPerPage:eS&&eb?Math.floor(eb):void 0,pinKey:null,viewParameter:F,viewType:A}),(0,C.jsxs)(T.Z,{componentType:em,containerRef:Y,gap:eF,id:"structured-feed-carousel-module",impressionType:eh?"BoardMoreIdeasRep":"Pin",index:V,shouldBeDragCarousel:!J,slideWidth:eZ,styleOverrides:m,view:A,viewParameter:F,children:[eR.map((e,t)=>{if(t===eR.length-1&&K&&es&&ec&&O(K)){let i="legacy"===e.type&&(0,x.v)(e.data)||"";return i&&(0,C.jsx)(p.Z,{buttonText:es,component:ea,contentIds:D??void 0,element:179,imageWidth:ez,isInMobileCarousel:!J,previewImageSrc:i,slideWidth:eZ,storyId:z??"",storyType:U,url:ec,view:A,viewParameter:F},"graphql"===e.type?`${t}`:(0,w.Z)(e.data,t))}return(0,C.jsx)(x.Z,{imageWidth:ez??eZ,isInMobileCarousel:!J,isInViewOrNext:(0,j.Iw)({slotWidth:eZ,containerWidth:Y.current?.clientWidth||0,gap:eF,numberOfSlides:eR.length,index:t,currentIndex:V}),item:"legacy"===e.type?{...e.data,..."board_more_ideas_feed_upsell"===e.data.type?{header_text:et.bt("More ideas for", "More ideas for", "moreIdeasBoardRepCarousel.carousel.headText", undefined, true)}:{}}:null,pinGraphQLRef:G&&"graphql"===e.type&&e.data?.__typename==="Pin"?e.data:null,saveButtonOptions:g,slideWidth:eZ,slotIndex:h+t,story:B??void 0,surface:f,view:A,viewParameter:F},"graphql"===e.type?`${t}`:(0,w.Z)(e.data,t))}),t]}),en&&V>0&&(0,C.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{background:"linear-gradient(90deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 100%)"}},height:"100%",left:!0,position:"absolute",top:!0,width:80}),en&&!eK&&(0,C.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{background:"linear-gradient(270deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 100%)"}},height:"100%",position:"absolute",right:!0,top:!0,width:80})]}),J&&1===ew&&(0,C.jsx)(l.xu,{marginBottom:8,marginTop:3,position:"relative",width:"100%",children:(0,C.jsx)(k.default,{addEllipsis:!0,alwaysShowNavigationArrows:!0,backNode:(0,C.jsx)(E.Z,{...ep,iconType:"back",showFab:!0}),carouselData:el,carouselIndex:V,componentType:ea,contextLogData:eh?{index:V}:{},ellipsisVariant:"dark",forwardNode:(0,C.jsx)(E.Z,{...ep,iconType:"forward",showFab:!0}),handleCarouselSwipe:e=>{W(e)},isShowingLastSlide:eK,pinKey:null,sliderStyleOverride:{padding:"0px"},viewParameter:F,viewType:A})}),K&&L(K)&&(0,C.jsx)(l.xu,{marginTop:4,children:(0,C.jsx)(v.Z,{location:ed,text:es,url:ec})})]})})}let K=(0,o.Z)({useGraphQLAdapter:e=>{let t=(0,r.useFragment)(M,e);return{data:{...t,objects:t.objects?.map(e=>({type:"graphql",data:e}))},rawStoryData:null,storyGraphqlRef:t,__dataKeys:{HeaderModule_story:{type:"graphqlRef",data:t}}}},useLegacyAdapter:e=>e&&{data:{action:e.action&&{location:e.action.location,text:e.action.text,url:e.action.url},contentIds:e.content_ids,displayOptions:e.display_options&&{contentDisplay:e.display_options.content_display&&{gridLayout:e.display_options.content_display.grid_layout&&{cols:e.display_options.content_display.grid_layout.cols},componentType:e.display_options.content_display.component_type,contentVisibleItemCount:{mobile:e.display_options.content_display.content_visible_item_count?.mobile,web:e.display_options.content_display.content_visible_item_count?.web},carouselDisplayOptions:e.display_options.content_display.carousel_display_options&&{navigationType:e.display_options.content_display.carousel_display_options.navigation_type},carouselScrollingMode:e.display_options.content_display.carousel_scrolling_mode},carouselFadeEnds:e.display_options.carousel_fade_ends,itemViewRepStyle:e.display_options.item_view_rep_style&&{exploreArticleRepStyle:e.display_options.item_view_rep_style.explore_article_rep_style,moreIdeasRepStyle:e.display_options.item_view_rep_style.more_ideas_rep_style},headerDisplay:e.display_options.header_display&&{expandedTextAlignment:e.display_options.header_display.expanded_text_alignment}},objects:e.objects?.map(e=>({type:"legacy",data:{...e,dominantColor:e.dominant_color}})),storyId:e.id,storyTitle:e.title?{__typename:"StoryText"}:null,storyType:e.story_type},rawStoryData:e,storyGraphqlRef:null,__dataKeys:{HeaderModule_story:{type:"deprecated",data:e}}}});function z({storyGraphqlRef:e,...t}){return(0,C.jsx)(K,{input:e?{enabled:!0,data:e}:{enabled:!1,data:t.story},children:({data:e})=>e&&(0,C.jsx)(Z,{...t,storyData:e})})}},580326:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var a=i(883119),n=i(785893);function r({url:e,text:t,location:i}){return 1===i&&e&&t?(0,n.jsx)(a.kC,{alignItems:"center",justifyContent:"center",children:(0,n.jsx)(a.ZP,{href:e,text:t})}):null}},848385:(e,t,i)=>{"use strict";i.d(t,{Z:()=>v}),i(167912);var a,n=i(616550),r=i(883119),l=i(407043),s=i(356997),o=i(916117),d=i(898781),c=i(50286),u=i(865607),p=i(785893);let h={1:"start",2:"center"},m={1:"100",2:"300"},g={1:"400",4:"200",3:"500",2:"600"},_=new Set([2,4]);function y({headerTitle:e,onClick:t,style:i,text:a,url:n}){let l=(0,d.ZP)();return 3!==i&&a?(0,p.jsx)(r.xu,{marginStart:6,children:(0,p.jsx)(r.ZP,{href:n,onClick:t,text:a})}):(0,p.jsx)(r.I_,{accessibilityLabel:e||l.bt("See more", "See more", "headerModule.headerModuleActionButton.iconButton", undefined, true),bgColor:"transparent",href:n,icon:"arrow-forward",iconColor:"darkGray",onClick:t,size:"sm"})}let f=void 0!==a?a:a=i(612587);function x({showExpanded:e=!1,view:t,viewParameter:i,storyData:a,showExtraSmallSubtitle:o}){let d=(0,n.k6)(),{logContextEvent:f}=(0,l.v)(),x=(0,c.HG)(),{fullName:v,isVerifiedMerchant:b,verifiedIdentity:S,username:w,imageMediumUrl:P}=a.user||Object.freeze({}),I=v||a.storyTitle?.format,{url:T,text:k,location:E,style:j}=a.action||Object.freeze({}),A=T||w||"",C=a.displayOptions||Object.freeze({}),F=C.headerDisplay||Object.freeze({}),R=e?F.expandedTextAlignment:F.textAlignment,D=h[R||1],O=h[F.subtitleAlignment||1],L=m[F.headerSize||1],M=F.headerSize&&g[F.headerSize]?g[F.headerSize]:g[1],N=1===F.subtitleStyle?M:"200",Z=C.titleTextColor??"default",K=C.titleTextColor??"default",z=C.subtitleTextColor??"subtle",H=1===F.titlePosition,U=!!a.subtitle?.format&&(0,p.jsx)(r.X6,{align:O,color:z,size:N,children:(0,p.jsx)(r.xu,{dangerouslySetInlineStyle:o?{__style:{size:12,fontWeight:"normal",color:"black"}}:void 0,children:a.subtitle.format})}),B=(0,p.jsx)(r.X6,{accessibilityLevel:2,align:D,color:Z,size:M,children:I}),G=()=>f({component:C.contentDisplay?.componentType,element:179,event_type:x?101:102,view_parameter:i,view_type:t}),$=e=>{G();let t=e.replace(/^\/+/,"");d.push(`/${t}`)};return(0,p.jsx)(r.xu,{marginBottom:x?4:2,children:(0,p.jsxs)(r.kC,{direction:"column",gap:{row:0,column:o?0:2},children:[H&&U,(0,p.jsxs)(r.kC,{alignItems:"center",justifyContent:D,children:[w&&P&&(0,p.jsx)(s.qE,{name:w,size:"sm",src:P}),(0,p.jsxs)(r.kC,{alignItems:"baseline",flex:e?"grow":"shrink",justifyContent:D,children:[A?(0,p.jsx)(r.xu,{"data-test-id":"sf-header-heading",children:(0,p.jsx)(r.Tg,{href:A,onTap:({event:e})=>{e.stopPropagation(),$(A)},tapStyle:"compress",children:B})}):B,b&&(0,p.jsx)(r.xu,{marginStart:2,children:(0,p.jsx)(u.Z,{isVerifiedIdentity:!!S?.verified,isVerifiedMerchant:b,size:"xs"})})]}),_.has(E)&&T&&(0,p.jsx)(r.xu,{"data-test-id":"sf-header-action-button",children:(0,p.jsx)(y,{headerTitle:I,onClick:G,style:j,text:k,url:T})})]}),!H&&U,a.storyDescription?.format?(0,p.jsx)(r.xv,{align:D,color:K,size:L,weight:"bold",children:a.storyDescription.format}):null]})})}function v({storyKey:e,...t}){let i=(0,o.Z)(f,e);return(0,p.jsx)(x,{...t,storyData:i})}},217149:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>Q});var a,n=i(167912),r=i(883119),l=i(934494),s=i(366428),o=i(563886),d=i(580326),c=i(444445),u=i(701865),p=i(988874),h=i(456183),m=i(608760),g=i(848385),_=i(785893);let y=()=>(0,_.jsx)(r.xu,{color:"secondary",height:c.yF,width:c.yF}),f={1:{itemRep:p.Z,deprecatedActionShape:"square",deprecatedGetActionImage:e=>e.images?.orig?.url||""},4:{itemRep:u.Z,deprecatedActionShape:"circle",deprecatedGetActionImage:e=>e.images?.orig?.url||""},2:{itemRep:h.Z,deprecatedActionShape:"circle",deprecatedGetActionImage:e=>e.image_large_url}};function x({componentFallback:e,showExpanded:t=!0,story:i,view:a,viewParameter:n}){let l=i.display_options?.content_display||{},s=l.model_type,o=f[s]||m.g5,d=o.itemRep||y,c=i.display_options?.content_display?.component_type??e;return(0,_.jsx)(r.xu,{marginBottom:2,children:(0,_.jsxs)(r.kC,{alignItems:"stretch",direction:"column",justifyContent:"center",children:[i.title&&(0,_.jsx)(g.Z,{showExpanded:t,storyKey:{type:"deprecated",data:i}}),(0,_.jsx)(r.kC,{gap:2,justifyContent:"center",wrap:!0,children:i.objects?.map(function(e,t){return(0,_.jsx)(d,{component:c,imagePlaceholderColor:"rgba(0, 0, 0, 0)",index:t,item:e,story:i,view:a,viewParameter:n},t)})})]})})}var v=i(667294),b=i(754320),S=i(87165),w=i(643897),P=i(905031),I=i(745312),T=i(50286);let k="rgba(0, 0, 0, 0)",E=()=>(0,_.jsx)(r.xu,{color:"secondary",height:c.yF,width:c.yF}),j={1:{itemRep:p.Z,deprecatedActionShape:"square",deprecatedGetActionImage:e=>e.images?.orig?.url||""},4:{itemRep:u.Z,deprecatedActionShape:"circle",deprecatedGetActionImage:e=>e.images?.orig?.url||""},2:{itemRep:h.Z,deprecatedActionShape:"circle",deprecatedGetActionImage:e=>e.image_large_url}};function A({componentFallback:e,dangerouslySetActionUrl:t,dangerouslySetContentVisibleItemCount:i,disableHeader:a,dynamicItemWidth:n,gutterWidth:l,initialSlotIndex:s=0,showExpanded:o,story:d,surface:u,view:p,viewParameter:h,width:y}){let f=(0,T.HG)(),x=d.display_options?.content_display||{},A=x.model_type,C=j[A]||m.g5,F=C.itemRep||E,{action:R}=d,D=t||d.action?.url||"",O=d.display_options?.content_display?.component_type??e,L=x.grid_layout?.rows,M="number"==typeof L?L:1,N=x.grid_layout?.cols,Z="number"==typeof N?N:-1,K=-1===Z,z=i??x.content_visible_item_count?.web,H=z&&y&&n?(0,c.Wv)({contentVisibleItemCount:z,gap:l??c.oX,width:parseInt(y,10)}):c.yF,{containerRef:U,itemsToRender:B,actionItem:G}=(0,I.n)({items:d.objects||[],itemWidth:(0,P.Z)()?c.tG:H,itemGap:l??c.oX,actionItemType:R?"one":void 0,numRows:M}),$=G&&C.deprecatedGetActionImage?C.deprecatedGetActionImage(G):void 0,V=K?B:d.objects||[],W=V.map((e,t)=>(0,_.jsx)(w.Z,{itemType:"string"==typeof e.type?e.type:null,children:(0,_.jsx)(F,{component:O,imagePlaceholderColor:k,imageWidth:H,index:t,item:e,slotIndex:s+t,story:d,surface:u,view:p,viewParameter:h})},t)),Y=!!D&&!!R?.text&&$&&(0,_.jsx)(b.Z,{buttonText:R.text,component:O,contentIds:d.content_ids,element:179,imageWidth:H,previewImageSrc:$,shape:C.deprecatedActionShape,storyId:d.id,storyType:d.story_type,url:D,view:p,viewParameter:h});return(0,_.jsxs)(r.xu,{alignItems:"stretch",color:"default",direction:"column",display:"flex",justifyContent:"start",children:[d.title&&!a&&(0,_.jsx)(g.Z,{showExpanded:o,storyKey:{type:"deprecated",data:d}}),K?(0,_.jsxs)(I.Z,{containerRef:U,itemGap:l??c.oX,numRows:M,rowAlignment:"center",children:[W,Y,M>1&&(0,S.i)(12)]}):(0,_.jsxs)(v.Fragment,{children:[Array(M).fill(null).map((e,t)=>(0,_.jsx)(r.kC,{alignItems:"stretch",gap:f?c.jC:c.D6,justifyContent:"start",wrap:Z<=1,children:Z>0&&Array(Z).fill(null).map((e,i)=>W[t*Z+i])},V[t].id)),Y]})]})}function C({componentFallback:e,showExpanded:t=!0,story:i,view:a,viewParameter:n}){let l=i.display_options?.content_display||{},s=l.model_type,o=j[s]||m.g5,d=o.itemRep||E,u=i.display_options?.content_display?.component_type??e,p=(0,P.Z)()?c.tG:c.yF;return(0,_.jsxs)(r.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:[i.title&&(0,_.jsx)(g.Z,{showExpanded:t,storyKey:{type:"deprecated",data:i}}),(0,_.jsx)(r.Rk,{columnWidth:p,gutterWidth:c.oX,items:i.objects||[],layout:"flexible",renderItem:({data:e,itemIdx:t})=>(0,_.jsx)(d,{component:u,imagePlaceholderColor:k,index:t,item:e,story:i,view:a,viewParameter:n},t)})]})}function F(e){switch(e.story.display_options?.content_display?.pins_display){case 3:case 1:return(0,_.jsx)(C,{...e});default:return(0,_.jsx)(A,{...e})}}var R=i(792182),D=i(616550),O=i(407043),L=i(356997),M=i(898781),N=i(477802);let Z=({actionText:e,actionUrl:t,articleId:i,author:a,authorAvatar:n,component:l,contentIds:o,coverImage:d,debug:c,index:u,isFullWidth:p=!1,onImageLoad:h,storyId:m,storyType:g,subtitle:y,title:f,view:x,viewParameter:b,width:S,windowWidth:w})=>{let P=(0,M.ZP)(),I=(0,D.k6)(),{logContextEvent:T}=(0,O.v)(),[k,E]=(0,v.useState)(!1),j=(0,s.Z)({loggingId:i,objectIdStr:i,impressionType:"Article",contextLogData:{content_ids:o,story_id:m,story_type:g,article_id:i},slotIndex:u,viewParameter:b,viewType:x,componentType:l});return(0,_.jsx)(r.xu,{"data-test-id":"sf-hero",children:(0,_.jsxs)(r.xu,{ref:j,height:"auto",onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),width:S,children:[(0,_.jsx)(r.iP,{onTap:()=>{T({event_type:101,view_type:x,view_parameter:b,component:l,aux_data:{article_id:i,content_ids:o,story_id:m,story_type:g}}),I.push(t)},children:(0,_.jsxs)(r.xu,{height:p?400:"35vw",maxHeight:500,overflow:"hidden",position:"relative",children:[(0,_.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{transition:"transform 0.4s",transform:k?"scale(1.5)":"scale(1)"}},height:"100%",width:"100%",children:(0,_.jsx)(r.Ee,{alt:P.bt("Cover image of this shopping spotlight", "Cover image of this shopping spotlight", "hero.heroCoverImage", undefined, true),color:"#fff",fit:"cover",naturalHeight:400,naturalWidth:400,onLoad:h,src:d,children:(0,_.jsx)(r.xu,{color:"transparentDarkGray",display:"block",height:"100%",opacity:.3,width:"100%"})})}),(0,_.jsx)(r.xu,{bottom:!0,marginBottom:p?12:0,padding:6,position:"absolute",width:"100%",children:(0,_.jsxs)(r.kC,{direction:"column",height:"100%",justifyContent:"end",children:[(0,_.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{transition:"transform 0.4s",transform:k?"translateY(-20px)":"translateY(20px)"}},children:(0,_.jsx)(r.X6,{color:"light",size:w<=822?"600":w<1e3?"400":w<1100?"500":"600",children:f})}),(0,_.jsxs)(r.xu,{dangerouslySetInlineStyle:{__style:{opacity:k?1:0,transition:k?"opacity 0.4s ease-in":"opacity 0.4s ease-out"}},display:"block",height:k?"auto":20,overflow:"hidden",children:[(0,_.jsx)(r.xv,{color:"inverse",children:y}),a&&(0,_.jsx)(r.xu,{marginTop:4,children:(0,_.jsxs)(r.kC,{alignItems:"center",direction:"row",children:[(0,_.jsx)(L.qE,{name:a,size:"md",src:n}),"\xa0",(0,_.jsx)(r.xv,{color:"inverse",children:a})]})})]}),(0,_.jsx)(r.xu,{marginTop:4,width:"74px",children:(0,_.jsx)(r.zx,{color:"white",onClick:()=>{I.push(t)},size:"lg",text:e})})]})})]})}),void 0!==c&&(0,_.jsx)(N.ZP,{data:c})]})})};var K=i(435497),z=i(239062),H=i(751191);function U({onImageLoad:e,story:t,view:i,viewParameter:a,component:n,width:l}){let[s,o]=(0,v.useState)(0),d=(0,v.useRef)(null),c=t.objects?.slice(0,3)||[];return(0,_.jsxs)(r.xu,{ref:d,alignItems:"end",display:"flex",height:400,justifyContent:"center",position:"relative",width:l,children:[(0,_.jsx)(K.Z,{containerRef:d,id:t.id,index:s,slideWidth:l,children:c.map((r,s)=>(0,_.jsx)(Z,{actionText:r.action?.text||"",actionUrl:r.action?.url||"",articleId:r.id,component:n,coverImage:r.cover_images&&r.cover_images[0].originals?.url||"",debug:r.debug,index:s,isFullWidth:!0,onImageLoad:e,storyId:t.id,storyType:t.story_type,subtitle:r.subtitle?.format||"",title:r.title?.format||"",view:i,viewParameter:a,width:l,windowWidth:l},r.id))}),(0,_.jsx)(r.xu,{display:"inlineBlock",height:"auto",paddingY:5,position:"absolute",width:"60%",children:(0,_.jsx)(z.default,{addEllipsis:!0,backNode:(0,_.jsx)(H.Z,{iconColor:"inverse",iconType:"back",showFab:!0}),carouselData:{index:s,entityId:"",carouselSlots:c.map(e=>({id:e.id,title:null}))},carouselIndex:s,forwardNode:(0,_.jsx)(H.Z,{iconColor:"inverse",iconType:"forward",showFab:!0}),handleCarouselSwipe:e=>{o(e)},pinKey:null})})]})}function B({component:e,onImageLoad:t,story:i,view:a,viewParameter:n,windowWidth:l}){let s=i.objects?.slice(0,3)||[];return(0,_.jsxs)(v.Fragment,{children:[(0,_.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:s[0].dominant_colors[0]}},flex:"grow"}),s.map((r,s)=>(0,_.jsx)(Z,{actionText:r.action?.text||"",actionUrl:r.action?.url||"",articleId:r.id,component:e,coverImage:r.cover_images&&r.cover_images[0].originals?.url||"",debug:r.debug,index:s,onImageLoad:t,storyId:i.id,storyType:i.story_type,subtitle:r.subtitle?.format||"",title:r.title?.format||"",view:a,viewParameter:n,width:500,windowWidth:l},r.id)),(0,_.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:s[2].dominant_colors[0]}},flex:"grow"})]})}function G({component:e,pwtSurfaceContext:t,story:i,view:a,viewParameter:n}){let{width:l}=(0,R.Z)()||{},s=()=>{t&&t.markConstraintComplete("RenderHeroImages")};return(0,_.jsx)(v.Fragment,{children:(0,_.jsx)(r.kC,{alignItems:"stretch",direction:"row",justifyContent:"start",width:l,children:3==(!l||l>822?3:1)?(0,_.jsx)(B,{component:e,onImageLoad:s,story:i,view:a,viewParameter:n,windowWidth:l}):(0,_.jsx)(U,{component:e,onImageLoad:s,story:i,view:a,viewParameter:n,width:l})})})}function $({story:e}){let t=(0,D.k6)(),{user:i,custom_properties:a,action:n}=e||{},{full_name:l,username:s,image_medium_url:o}=i||{},d=l||e.title?.format||"",{url:u,text:p}=n||{},{image:h}=a||{};if(!u||!p)return null;let m=(0,_.jsxs)(r.xu,{alignItems:"center",color:"transparentDarkGray",display:"flex",height:"100%",justifyContent:"center",padding:2,position:"relative",children:[s&&o&&(0,_.jsx)(r.xu,{left:!0,padding:2,position:"absolute",top:!0,children:(0,_.jsx)(L.qE,{name:s,size:"sm",src:o})}),d&&(0,_.jsx)(r.xv,{color:"inverse",weight:"bold",children:d})]});return(0,_.jsxs)(r.xu,{marginBottom:4,width:c.yF,children:[(0,_.jsx)(r.iP,{onTap:()=>t.push(u),children:(0,_.jsx)(r.zd,{height:c.yF,rounding:2,wash:!0,children:"string"==typeof h&&h?(0,_.jsx)(r.Ee,{alt:d,fit:"contain",naturalHeight:c.yF,naturalWidth:c.yF,src:h,children:m}):(0,_.jsx)(r.xu,{height:c.yF,width:c.yF,children:m})})}),(0,_.jsx)(r.xu,{marginTop:3,children:(0,_.jsx)(r.ZP,{fullWidth:!0,href:u,text:p})})]})}let V=new Set([101]),W="UNKNOWN_CONTAINER_TYPE",Y=void 0!==a?a:a=i(282167);function q(e){let{componentFallback:t,initialSlotIndex:i,view:a,viewParameter:n,width:l,story:{data:{action:c,containerType:u,contentIds:p,displayOptions:h,storyId:m,storyType:y,trackingParams:f},forward:{dataKeys:v,rawStoryData:b,storyGraphqlRef:S}}}=e,w=h?.contentDisplay?.componentType??t,P=(0,s.Z)({clientTrackingParams:f,componentType:w,contextLogData:{story_id:m,story_type:y,content_ids:p},impressionType:"Story",loggingId:m,slotIndex:i||0,viewParameter:n,viewType:a}),I={...e,component:w},T=(()=>{switch(u){case 90:return(0,_.jsx)(o.Z,{...I,story:b,storyGraphqlRef:S,width:"number"==typeof I.width?I.width:void 0});case 88:let{story:e,...t}=I,i={...t,storyKey:v.HeaderModule_story};return(0,_.jsx)(g.Z,{...i});case 89:let{location:a,text:n,url:r}=c||{};return(0,_.jsx)(d.Z,{location:a,text:n,url:r});case 91:return!!b&&(0,_.jsx)(F,{...I,story:b});case 101:return!!b&&(0,_.jsx)(G,{...I,story:b});case 92:return!!b&&(0,_.jsx)($,{...I,story:b});case 131:return!!b&&(0,_.jsx)(x,{...I,story:b});default:return W}})();return T===W?null:(0,_.jsxs)(r.xu,{ref:P,width:V.has(u)?void 0:l,children:[T,(0,_.jsx)(r.xu,{})]})}let X=(0,l.Z)({useGraphQLAdapter:e=>{let t=(0,n.useFragment)(Y,e);return{data:t,forward:{rawStoryData:null,storyGraphqlRef:t,dataKeys:{HeaderModule_story:{type:"graphqlRef",data:t}}}}},useLegacyAdapter:e=>e&&{data:{action:e.action&&{location:e.action.location,text:e.action.text,url:e.action.url},containerType:"number"==typeof e.container_type?e.container_type:void 0,contentIds:e.content_ids,displayOptions:e.display_options&&{contentDisplay:e.display_options.content_display&&{componentType:e.display_options.content_display.component_type}},storyId:e.id??"",storyType:e.story_type,trackingParams:e.tracking_params},forward:{rawStoryData:e,storyGraphqlRef:null,dataKeys:{HeaderModule_story:{type:"deprecated",data:e}}}}});function Q({storyGraphqlRef:e,...t}){return(0,_.jsx)(X,{input:e?{enabled:!0,data:e}:{enabled:!1,data:t.story},children:({data:e})=>e&&(0,_.jsx)(q,{...t,story:e})})}},605706:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var a=i(667294),n=i(50286);function r(){let[e,t]=(0,a.useState)(!1),i=(0,n.HG)();return(0,a.useEffect)(()=>{!i&&window.innerWidth<320&&t(!0)},[i,t]),e}},782975:(e,t,i)=>{"use strict";function a(e,t){let i=`${e.type||""} ${t.toString()}`;switch(e.type){case"pin":return e.title||i;case"user":return e.username||i;case"explorearticle":return e.title?.format||i;case"story":return e.id||i;default:return i}}i.d(t,{Z:()=>a})},905031:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var a=i(792182),n=i(444445);function r(){let{width:e}=(0,a.Z)()||{width:0};return e<2*n.yF+n.$H}},501338:(e,t,i)=>{"use strict";i.d(t,{Pw:()=>a,SB:()=>n,ZP:()=>l,x9:()=>r});let a=80,n=56,r=e=>"phone"===e?n:a;function l(e,t){return t?0:r(e)}},619937:(e,t,i)=>{"use strict";i.d(t,{$N:()=>m,Cu:()=>_,GY:()=>d,MZ:()=>l,NR:()=>u,Vn:()=>c,bC:()=>g,fm:()=>a,kM:()=>r,q6:()=>n,qp:()=>o,uV:()=>p,ug:()=>h,xL:()=>s});let a={DOWNLOAD_TEMPLATE:"DOWNLOAD_TEMPLATE",UPLOAD_TEMPLATE:"UPLOAD_TEMPLATE",HISTORY:"HISTORY",RESOURCES:"RESOURCES"},n={GENERAL:"GENERAL",CAMPAIGNS:"CAMPAIGNS",AD_GROUPS:"AD_GROUPS",ADS:"ADS",KEYWORDS:"KEYWORDS",PRODUCT_GROUPS:"PRODUCT_GROUPS",ERROR_CODES:"ERROR_CODES"},r={BILLING_HISTORY:"BILLING_HISTORY",BILLING_FORMS:"BILLING_FORMS",ORDER_LINES:"ORDER_LINES",PROMOTIONS:"PROMOTIONS",TAX_DOCUMENTS:"TAX_DOCUMENTS",DOCUMENTS:"DOCUMENTS",PREPAID_CAMPAIGN_SPEND:"PREPAID_CAMPAIGN_SPEND_SUMMARY"},l={GOOGLE_TAG_MANAGER:"Google Tag Manager",SHOPIFY:"Shopify",WOO_COMMERCE:"WooCommerce",WORDPRESS:"WordPress",SQUARESPACE:"Squarespace",WEEBLY:"Weebly",TEALIUM:"Tealium",MAGENTO:"Magento",ECWID:"Ecwid",BIG_COMMERCE:"BigCommerce",PREMMERCE:"Premmerce",SEGMENT:"Segment",BRANCH:"Branch",HIGHTOUCH:"Hightouch",EULERIAN:"Eulerian",ADOBE_CDP:"Adobe Real-Time CDP",ADOBE_COMMERCE:"Adobe Commerce",SALESFORCE_COMMERCE_CLOUD:"Salesforce Commerce Cloud"},s={GTM:"GTM",SHOPIFY:"SHOPIFY",WORDPRESS:"WORDPRESS",WOOCOMMERCE:"WOOCOMMERCE",TEALIUM:"TEALIUM"},o={PINTEREST_TAG:"PINTEREST_TAG",PINTEREST_TAG_MANUAL_SETUP_FLOW:"PINTEREST_TAG_MANUAL_SETUP_FLOW",PINTEREST_TEST_EVENTS:"PINTEREST_TEST_EVENTS",PINTEREST_TAG_HEALTH:"PINTEREST_TAG_HEALTH",CONVERSION_HEALTH:"CONVERSION_HEALTH",CONVERSION_UPLOAD:"CONVERSION_UPLOAD",UPLOAD_HISTORY:"UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD:"PCA_UPLOAD",CONVERSIONS_API:"CONVERSIONS_API",CONVERSIONS_API_ACCESS_TOKEN:"CONVERSIONS_API_ACCESS_TOKEN",CONVERSIONS_API_DEDUPLICATION:"CONVERSIONS_API_DEDUPLICATION",CONVERSIONS_API_PARTNER_SETUP_FLOW:"CONVERSIONS_API_PARTNER_SETUP_FLOW",CONVERSIONS_API_MANUAL_SETUP_FLOW:"CONVERSIONS_API_MANUAL_SETUP_FLOW",PINTEREST_EVENTS_OVERVIEW:"PINTEREST_EVENTS_OVERVIEW",PINTEREST_EVENT_HISTORY:"PINTEREST_EVENT_HISTORY",CONVERSIONS:"CONVERSIONS",PINTEREST_EVENTS_OVERVIEW_BEFORE_SETUP:"PINTEREST_EVENTS_OVERVIEW_BEFORE_SETUP",PINTEREST_SETUP_API:"PINTEREST_SETUP_API"},d={PINTEREST_TAG_DASHBOARD:"PINTEREST_TAG_DASHBOARD",PINTEREST_TAG_LANDING:"PINTEREST_TAG_LANDING",PINTEREST_TAG_INSTRUCTIONS:"PINTEREST_TAG_INSTRUCTIONS",CONVERSION_UPLOAD_LANDING:"CONVERSION_UPLOAD_LANDING",CONVERSION_UPLOAD_VALIDATION:"CONVERSION_UPLOAD_VALIDATION",CONVERSION_UPLOAD_HISTORY:"CONVERSION_UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD_LANDING:"PCA_UPLOAD_LANDING",PCA_UPLOAD_VALIDATION:"PCA_UPLOAD_VALIDATION"},c={UNREAD:"UNREAD",READ:"READ",ACCEPTED:"ACCEPTED",REJECTED:"REJECTED",DISMISSED:"DISMISSED",INVALID:"INVALID",MUTED:"MUTED",SNOOZED:"SNOOZED",PMP_REPORTED:"PMP_REPORTED",EMAILED:"EMAILED",BULK_DOWNLOADED:"BULK_DOWNLOADED",FILTERED:"FILTERED",PUSHED:"PUSHED"},u={DESTINATION:"destination",EXPIRY:"expiry",SOURCE:"attributionsrc",SOURCE_EVENT_ID:"source_event_id",SOURCE_EVENT_TYPE:"source_event_type",PRIORITY:"priority",CLICK_PRIORITY:"2",VIEW_PRIORITY:"1",CAMPAIGN_ID:"campaign_id",ADVERTISER_ID:"advertiser_id"},p="604800",h="86400",m={ATTRIBUTION_SOURCE_ID:"attributionsourceid",ATTRIBUTE_DESTINATION:"attributiondestination",ATTRIBUTE_ON:"attributeon"},g="click",_="view"},337815:(e,t,i)=>{"use strict";i.d(t,{YS:()=>l,eF:()=>s,m_:()=>r});var a=i(619937),n=i(67347);function r(e,t,i,n,r){let l=new URLSearchParams,s=e??"0";return l.append(a.NR.SOURCE_EVENT_ID,s),l.append(a.NR.DESTINATION,function(e){let t;try{t=decodeURIComponent(e)}catch(i){t=e}t.startsWith("http")?t.startsWith("http://")&&(t=t.replace("http://","https://")):t="https://"+t;try{return new URL(t).origin}catch(a){let i=t.match(/^(https?:\/\/[^\/]+)(\/|$)/);if(i&&i.length>1)return i[1];return e}}(t)||""),l.append(a.NR.EXPIRY,i?a.uV:a.ug),l.append(a.NR.PRIORITY,i?a.NR.CLICK_PRIORITY:a.NR.VIEW_PRIORITY),r&&l.append(a.NR.ADVERTISER_ID,r),n&&l.append(a.NR.CAMPAIGN_ID,n),l.append(a.NR.SOURCE_EVENT_TYPE,i?a.bC:a.Cu),"/attribution_source/?"+l.toString()}async function l(e,t,i,a,l,s,o){let{appType:d,osType:c}=s||{};if(["Pin","pinImpressions"].includes(e)&&t&&a){(0,n.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"start",appType:d,osType:c}});try{if(!window.document.featurePolicy?.allowsFeature("attribution-reporting")){(0,n.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"skipped",message:"attribution-reporting is not enabled",appType:d,osType:c}});return}let e=r(i,a||"",!1,l,o),t=await window.fetch(e,{keepalive:!0,attributionReporting:{eventSourceEligible:!0,triggerEligible:!1}});if(!t.ok)throw Error("server request failed.");(0,n.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"success",appType:d,osType:c}})}catch(e){(0,n.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"failed",error:e.name,appType:d,osType:c}})}}else(0,n.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"missing_param",appType:d,osType:c}})}function s(e){if(e){let t=e.toLowerCase();if(t.includes("windows"))return"windows xp"===t?1:"windows vista"===t?2:"windows 7"===t?3:"windows 8"===t?4:12;if(t.includes("mac os"))return 5;if(t.includes("android"))return 7;if(t.includes("ios"))return 6;if(t.includes("ubuntu"))return 8;if(t.includes("chromium os"))return 13}return 0}},407043:(e,t,i)=>{"use strict";i.d(t,{B:()=>o,v:()=>s});var a=i(385740),n=i(425288),r=i(785893);let{Provider:l,useHook:s}=(0,n.Z)("ContextLogger");function o({children:e,value:t}){let{setViewContextData:i}=(0,a.sV)();return t.injectSetViewContextDataFromHook=i,(0,r.jsx)(l,{value:t,children:e})}},112690:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var a=i(407043);let n=()=>(0,a.v)().logContextEvent},643010:(e,t,i)=>{"use strict";i.d(t,{F6:()=>u,Hs:()=>c,Yc:()=>o,vs:()=>d});var a=i(667294),n=i(844974),r=i(867820);let l="theme",s="dark"===(0,n.qn)(l),o=()=>s;function d(){let[e,t]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{t(o())},[t]),e}let c=()=>{(0,n.Nh)(l,"dark"),(0,r.My)("mweb.dark_mode.enable"),window.location.reload()},u=()=>{(0,n.L_)(l),(0,r.My)("mweb.dark_mode.disable"),window.location.reload()}},782534:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l,k:()=>a.k});var a=i(451820),n=i(780280),r=i(785893);let l=({dateFormatType:e,useUTC:t=!0,value:i})=>(0,r.jsx)(n.LC,{children:n=>(0,a.Z)(n.locale,i,e,t)})},451820:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r,k:()=>a});let a={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour",TWO_DIGIT:"two_digit",TWO_DIGIT_YEAR:"two_digit_year"},n=function(e){switch(e){case a.YEAR:return{year:"numeric"};case a.LONG:return{year:"numeric",month:"long",day:"numeric"};case a.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case a.TWO_DIGIT:return{year:"numeric",month:"2-digit",day:"2-digit"};case a.TWO_DIGIT_YEAR:return{year:"2-digit",month:"2-digit",day:"2-digit"};case a.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case a.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case a.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case a.MONTH_DAY:return{month:"long",day:"numeric"};case a.SHORT_MONTH:return{month:"short"};case a.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case a.DAY:return{day:"numeric"};case a.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case a.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case a.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case a.TIME:return{hour:"numeric",minute:"2-digit"};case a.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case a.HOUR:return{hour:"numeric"};default:throw Error('invalid dateFormatType "'+e+'"')}};function r(e,t,i,a=!0){let r=n(i);a&&(r.timeZone="UTC");let l=new Intl.DateTimeFormat(e,r);return l.format(t)}},123159:(e,t,i)=>{"use strict";i.d(t,{F:()=>p,M:()=>u});var a=i(667294),n=i(702664),r=i(14890),l=i(425288),s=i(332611),o=i(957191),d=i(785893);let{Provider:c,useHook:u}=(0,l.Z)("ExperienceContext");function p({children:e}){let[t,i]=(0,a.useReducer)((e,t)=>{if("MOUNT_PLACEMENT"===t.type)return{...e,mountedPlacements:{...e.mountedPlacements,[t.payload]:!0}};if("UNMOUNT_PLACEMENT"===t.type){let i={...e};return delete i.mountedPlacements[t.payload],delete i.registerdAfterActionPlacements[t.payload],i}return"REGISTER_AFTER_ACTION_PLACEMENT"===t.type?{...e,registerdAfterActionPlacements:{...e.registerdAfterActionPlacements,[t.payload]:!0}}:e},{mountedPlacements:{},registerdAfterActionPlacements:{}}),{mountedPlacements:l,registerdAfterActionPlacements:u}=t,p=(0,n.useDispatch)(),h=(0,n.useSelector)(e=>e.experiences),m=(0,s.be)(),g=(0,s.Am)(),_=(0,s.Ig)(),y=(0,a.useMemo)(()=>{let e=(0,r.bindActionCreators)({completeExperience:m,dismissExperience:g,fetchAllExperiences:s.fO,fetchAllExperiencesMulti:o.NW,fetchExperienceForPlacements:s.pz,mountPlacement:s.N,triggerExperimentsForPlacement:s.kd,viewExperience:_},p);return{...e,mountPlacement:(t,...a)=>{e.mountPlacement(t,...a),i({type:"MOUNT_PLACEMENT",payload:t})},unmountPlacement:e=>{i({type:"UNMOUNT_PLACEMENT",payload:e})},registerAfterActionPlacement:e=>{i({type:"REGISTER_AFTER_ACTION_PLACEMENT",payload:e})}}},[m,g,p,i,_]),f=(0,a.useMemo)(()=>({experiences:h,mountedPlacements:l,registerdAfterActionPlacements:u,...y}),[h,l,u,y]);return(0,d.jsx)(c,{value:f,children:e})}},497529:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var a=i(667294);i(332611);var n=i(123159),r=i(764990);i(957191);var l=i(780280);function s(e){let{mountedPlacements:t,completeExperience:i,dismissExperience:s,experiences:o,fetchAllExperiences:d,fetchAllExperiencesMulti:c,fetchExperienceForPlacements:u,triggerExperimentsForPlacement:p,viewExperience:h}=(0,n.M)(),{isBot:m}=(0,l.B)(),g=e&&!m?(0,r.MQ)(o,t,e):null;return(0,a.useMemo)(()=>({completeExperience:i,dismissExperience:s,experienceForPlacement:g,fetchAllExperiences:d,fetchAllExperiencesMulti:c,fetchExperienceForPlacements:u,triggerExperimentsForPlacement:p,viewExperience:h}),[i,s,g,d,c,u,p,h])}},984225:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var a=i(785893);let n=(0,a.jsx)("svg",{fill:"none",height:"5",viewBox:"0 0 37 5",width:"37",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("rect",{fill:"#E9E9E9",height:"5",rx:"2.5",width:"37"})}),r=n},301723:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var a=i(667294),n=i(883119);let r=(0,a.createContext)();var l=i(785893);function s(e){(0,a.useContext)(r);let{alt:t,color:i,children:s,crossOrigin:o,decoding:d,elementTiming:c,fetchPriority:u,fit:p,loading:h,naturalHeight:m,naturalWidth:g,onError:_,onLoad:y,role:f,sizes:x,src:v,srcSet:b}=e;return(0,l.jsx)(n.Ee,{alt:t,color:i,crossOrigin:o,decoding:d,elementTiming:c,fetchPriority:u,fit:p,loading:h,naturalHeight:m,naturalWidth:g,onError:_,onLoad:y,role:f,sizes:x,src:v,srcSet:b,children:s})}},724617:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>p});var a=i(667294),n=i(319915),r=i(463076),l=i(739213),s=i(444445),o=i(391254),d=i(773285),c=i(780280),u=i(785893);function p(e){let t;let{cacheKey:i,columnWidth:p=s.yF,experimentalTwoColItems:h=!1,gutterWidth:m=s.oX,isFetching:g,isGridCentered:_=!0,renderItem:y,items:f,layout:x,loadItems:v,masonryRef:b,minCols:S=s.yc,scrollContainerRef:w,serverRender:P=!0,virtualize:I=!0}=e,{isAuthenticated:T,isRTL:k}=(0,c.B)(),{checkExperiment:E}=(0,d.F)(),j=E("web_masonry_virtual_buffer_factor").group,A={enabled_0_3:"0.3",enabled_0_5:"0.5",enabled_0_9:"0.9",enabled_1_1:"1.1",enabled_1_3:"1.3"}[j]??.7,C=E(T?"web_masonry_unified_auth":"web_masonry_unified_unauth"),F=(0,a.useRef)(!0);return(0,a.useEffect)(()=>{F.current&&(F.current=!1)},[]),_&&F.current&&(t="gridCentered"),(0,l.gp)({columnWidthProp:e.columnWidth,columnWidth:p,component:"UnifiedMasonry",gutterWidthProp:e.gutterWidth,gutterWidth:m,isFlexible:!1,layoutProp:x}),C.anyEnabled?(0,u.jsx)(l.s7,{_twoColItems:h,cacheKey:i,columnWidth:p,gutterWidth:m,isGridCentered:_,items:f,layout:x,loadItems:v,masonryRef:b,maxColumns:e.maxColumns,minCols:S,renderItem:y,scrollContainerRef:w,serverRender:P,virtualBufferFactor:A,virtualize:I}):(0,u.jsxs)("div",{className:t,children:[P&&F&&(0,u.jsx)(o.Z,{unsafeCSS:(0,r.Z)({gutterWidth:m,isRTL:k,itemWidth:p,maxColumns:e.maxColumns??(f.length||s.g5),minColumns:S})}),(0,u.jsx)(l.ZP,{_twoColItems:h,cacheKey:i,columnWidth:p??s.yF,gutterWidth:m,items:f,layout:x??"basic",loadItems:()=>{!g&&v&&v()},masonryRef:b,minCols:S,renderItem:e=>(0,u.jsx)(n.Z,{name:"MasonryItem",children:y(e)}),scrollContainerRef:w,virtualBufferFactor:A,virtualize:I})]})}},463076:(e,t,i)=>{"use strict";function a({gutterWidth:e,isRTL:t,itemWidth:i=236,maxColumns:a=16,minColumns:n=2}){let r=i+e,l=`
.gridCentered {
  margin-left: auto;
  margin-right: auto;
}
.gridCentered .static {
  padding: 0 ${e/2}px;
  position: absolute;
  visibility: hidden;
}
`;for(let e=n;e<a+1;e+=1){let i=e===n?0:e*r;l+=`
@media (min-width: ${i}px) and (max-width: ${(e+1)*r-1}px) {
  .gridCentered {
    width: ${e*r}px;
  }
  .gridCentered .static:nth-child(-n+${e}) {
    position: static !important;
    visibility: visible !important;
    float: ${t?"right":"left"};
    display: block;
  }
}
`}return l}i.d(t,{Z:()=>a})},121151:(e,t,i)=>{"use strict";i.d(t,{ZP:()=>d,b7:()=>l.b7,bN:()=>s,p4:()=>o});var a=i(240684),n=i(50286),r=i(785893),l=i(968121);let s=(0,a.ZP)({resolved:{},chunkName:()=>"DesktopModal",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>i.e(51879).then(i.bind(i,373420)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return i(t)},resolve:()=>373420}),o=(0,a.ZP)({resolved:{},chunkName:()=>"MobileModal",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>i.e(72430).then(i.bind(i,430322)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return i(t)},resolve:()=>430322});function d(e){let t=(0,n.ZP)(),i=void 0===e.isOpen||e.isOpen;if("desktop"===t&&i){let{isOpen:t,mobileAccessibilityCloseIconLabel:i,mobileAllowScroll:a,mobileHideCloseIcon:n,mobileIsFullscreen:l,mobileIsSlideUp:o,type:d,mobileIsFooter:c,zIndex:u,...p}=e;return(0,r.jsx)(s,{...p})}let{allowMediaPlay:a,allowScroll:l,role:d,size:c,_dangerouslyDisableScrollBoundaryContainer:u,...p}=e;return(0,r.jsx)(o,{...p,isOpen:i})}},968121:(e,t,i)=>{"use strict";i.d(t,{JN:()=>d,Vf:()=>c,ZM:()=>s,b7:()=>l,i_:()=>o});var a=i(883119),n=i(643010),r=i(379764);let l=new a.Ry(1e3),s=new a.H3([r.Z]),o=12,d=({variant:e})=>({__style:"fullscreen"===e?{touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"90vw",height:"70vh",borderRadius:"8px",zIndex:1,left:"5vw",bottom:"13vh",overflowY:"hidden"}:"tablet"===e?{border:void 0,borderRadius:"32px",top:"50%",left:"50%",minWidth:"350px",touchAction:"none",transform:"translate(-50%, -50%)",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",zIndex:1}:"footer"===e?{border:(0,n.Yc)()?void 0:"1px solid #efefef",bottom:0,boxShadow:"0 0 16px rgba(0,0,0, 0.16)",left:0,touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"100vw",zIndex:1}:"signup"===e?{border:void 0,borderRadius:"32px",top:"50%",touchAction:"none",transform:"translate(0%, -50%)",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",zIndex:1,left:"8px",right:"8px",background:"#FFFFFF"}:{border:(0,n.Yc)()?void 0:"1px solid #efefef",touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"100vw",zIndex:1,left:"0px",bottom:0,boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",overflow:"hidden",borderRadius:"32px 32px 0 0"}}),c=({isFullscreen:e,isTablet:t,isShowing:i,isRelatedInterestsModal:a})=>{let r={border:(0,n.Yc)()?void 0:"1px solid #efefef",touchAction:"none",width:"100vw",height:"",zIndex:1,left:0,bottom:0,borderRadius:"32px 32px 0px 0px",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)"},l=i?"translateY(0)":"translateY(100vh)";return r.height=e?"100vh":"",t&&a&&(r={...r,width:425,left:"50%",transform:"translateX(-50%)"},l=i?"translate(-50%, 0)":"translate(-50%, 100vh)"),{__style:{...r,transition:"all 225ms cubic-bezier(0.0,0.0,0.2,1) 500ms",transform:l}}}},694379:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var a=i(892819),n=i(780280),r=i(785893);let l=({currency:e,maximumFractionDigits:t,minimumFractionDigits:i,shortform:l,shortformMaximumFractionDigits:s,formatStyle:o,uplimit:d,value:c})=>{let u=(0,a.Z)();return(0,r.jsx)(n.LC,{children:a=>u(a.locale||"en-US",c,{currency:e,maximum_fraction_digits:t,minimum_fraction_digits:i,shortform:l,shortform_maximum_fraction_digits:s,style:o,uplimit:d})})}},479216:(e,t,i)=>{"use strict";i.d(t,{MF:()=>r,PB:()=>l,Ul:()=>s,XD:()=>a});let a={AUD:"A$",BRL:"R$",CAD:"$",CZK:"Kč",DKK:"kr",EUR:"€",GBP:"\xa3",HUF:"Ft",MXN:"$",NOK:"kr",NZD:"NZ$",RON:"lei",SEK:"kr",USD:"$",JPY:"\xa5",CHF:"₣"},n=function(e){let t=1.1.toLocaleString(e).substring(1,2);return t},r=function(e,t){return","===n(t)&&e&&e.length>0&&!isNaN(e)?e.replace(".",","):e},l=function(e,t){return","===n(t)&&e?e.replace(",","."):e};function s(e,t,i,a=!1){let{minimumFractionDigits:n,maximumFractionDigits:r}=new Intl.NumberFormat(t,{style:"currency",currency:i}).resolvedOptions(),l=void 0===n?2:n,s=void 0===r?2:r;return e.toLocaleString(t,{maximumFractionDigits:a&&s>0?3:s,minimumFractionDigits:a&&l>0?3:l})}},529518:(e,t,i)=>{"use strict";function a(e,t){let i=e*Math.pow(10,t),a=Math.round((i-parseInt(i,10))*10)/10;return -.5===a&&(a=-.6),i=Math.round(parseInt(i,10)+a)/Math.pow(10,t)}function n(e){let t=parseFloat(e),i=a(t,2);return i?i.toFixed(2):e}function r(e,t=!1,i=""){let a=100,n=1e4;if(i){let{maximumFractionDigits:e}=new Intl.NumberFormat(void 0,{style:"currency",currency:i}).resolvedOptions();"number"==typeof e&&(n=1e6/(a=Math.pow(10,e)))}return t&&(a=1e3,n=1e3),Math.round(e*a)*n}function l(e,t=!1){if(Number.isNaN(e))return 0;let i=1e6;return t&&(i=1e6),e/i}function s(e){return e?n(l(e).toString()):""}i.d(t,{$X:()=>l,Hy:()=>s,c3:()=>p,cq:()=>n,q$:()=>a,qq:()=>u,y:()=>r});let o={fractionalCentFormatData:{},formatData:{}};function d(e){return e&&(e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")),e}function c(e,t=!1){let i=t?"fractionalCentFormatData":"formatData",a=o[i][e];if(!a){let n=2,r=2,l=-9999.99;t&&(n=3,r=3,l=-9999.999);let s=new Intl.NumberFormat(e,{minimumFractionDigits:n,maximumFractionDigits:r}),c=s.formatToParts(l),u=c.find(e=>"minusSign"===e.type),p=c.find(e=>"group"===e.type),h=c.find(e=>"decimal"===e.type),m=p?p.value:"",g=d(m),_=h?h.value:"",y="[^0-9"+g+d(_)+d(u?u.value:"")+"]";a={format:s,decimal:h?h.value:null,group:m,groupRegex:RegExp(g||"","g"),cleaner:RegExp(y,"g")},o[i][e]=a}return a}function u(e,t,i=!1){if("number"==typeof e)return e;if("string"!=typeof e)return NaN;let a=c(t,i),n=e.replace(a.cleaner,"");return a.decimal&&(n=n.replace(a.decimal,"!_!")),a.group&&(n=n.replace(a.groupRegex,"")),parseFloat(n=n.replace("!_!","."))}function p(e,t,i=!1){let a=c(t,i);return a.format.format(e)}},892819:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var a=i(898781),n=i(66699);let r=(e,t)=>{let i=t||0,a=10**i,n=+(i?e*a:e).toFixed(8),r=Math.floor(n),l=n-r,s=l>.49999999&&l<.50000001?r%2==0?r:r+1:Math.round(n);return i?s/a:s},l=({maximumFractionDigits:e,minimumFractionDigits:t,style:i,currency:a})=>{let n={maximumFractionDigits:e,minimumFractionDigits:t};return i?{...n,style:i,..."currency"===i?{currency:a,currencyDisplay:"symbol"}:{}}:n},s=e=>{try{0..toLocaleString([e])}catch(e){return!1}return!0},o=(e,t)=>{if(t){let{minimumFractionDigits:i,maximumFractionDigits:a}=new Intl.NumberFormat(e,{style:"currency",currency:t}).resolvedOptions();if(void 0!==i&&void 0!==a)return{minimumFractionDigits:i,maximumFractionDigits:a}}return{minimumFractionDigits:2,maximumFractionDigits:2}};function d(){let e=(0,a.ZP)();return(t,i,a)=>{let d=0,c=0,u=a&&a.style||void 0,p=a&&a.shortform||!1,h=a&&a.uplimit||void 0,m=a&&a.currency||void 0,g=!!h&&i>=h,_=h&&g?h:i;if("currency"===u){let{minimumFractionDigits:e,maximumFractionDigits:i}=o(t,m);d=void 0===a||void 0===a.maximum_fraction_digits?i:a.maximum_fraction_digits,c=void 0===a||void 0===a.minimum_fraction_digits?e:a.minimum_fraction_digits}else d=void 0===a||void 0===a.maximum_fraction_digits?0:a.maximum_fraction_digits,c=void 0===a||void 0===a.minimum_fraction_digits?0:a.minimum_fraction_digits;if(p&&_>999&&(d=void 0===a||void 0===a.shortform_maximum_fraction_digits?2:a.shortform_maximum_fraction_digits,c=0),d<c)return String(_);let y=_,f="",x=[{"100M":{value:1e8,localeKey:e.bt("億", "億", "Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.", undefined, true)}},{"10k":{value:1e4,localeKey:e.bt("万", "万", "Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.", undefined, true)}}],v=[{b:{value:1e9,localeKey:e.bt("B", "B", "Abbreviation for one billion.", undefined, true)}},{m:{value:1e6,localeKey:e.bt("M", "M", "Abbreviation for one million.", undefined, true)}},{k:{value:1e3,localeKey:e.bt("k", "k", "Abbreviation for one thousand.", undefined, true)}}],b=/^zh|ja|ko/.test(t);if(p&&_>999){let e=b?x:v;for(let t=0;t<e.length;t+=1){let i=Object.keys(e[t])[0],a=e[t][i].value;if(_>=a){y=r(_/a*Math.pow(10,d))/Math.pow(10,d),f=e[t][i].localeKey;break}}}if(null==y)return"";let S=y.toLocaleString([s(t)&&"ar-SA"!==t?t:"en-US"],l({maximumFractionDigits:d,minimumFractionDigits:c,currency:m,style:u}));return f&&f.length>0?(0,n.Z)(e.bt("{{formattedNumber}}{{numberSuffix}}", "{{formattedNumber}}{{numberSuffix}}", "i18n.usePrettyNumberFormat.prettyNumberFormat", undefined, true),{formattedNumber:S,numberSuffix:f})+(g?"+":""):S+(g?"+":"")}}},366428:(e,t,i)=>{"use strict";i.d(t,{F:()=>o,Z:()=>s});var a=i(667294),n=i(407043),r=i(124580);let l={ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},OneBar:{impressionType:"oneBarImpressions",idType:"onebarIdStr",eventType:9993},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},AdsPreview:{impressionType:"AdsPreviewImpression",idType:"AdsPreviewStr",eventType:8600}};function s({carouselData:e,closeupImpressionType:t,closeupNavigationType:i,componentType:s,contextLogData:o,clientTrackingParams:d,elementType:c,impressionAuxFields:u,inImpressionExp:p,impressionType:h,impressionsFramework:m,isPaused:g,loggingId:_,objectIdStr:y,slotIndex:f,trackCarousel:x,viewData:v,viewParameter:b,viewType:S}){let{logContextEvent:w}=(0,n.v)(),P=m||r.Z,I=(0,a.useRef)(null),T=a=>{let n=l[h],r=n.idType,p={clientTrackingParams:d,endTime:a.endTime,[r]:_,slotIndex:f,time:a.startTime,renderDuration:a.endTime-a.startTime,type:t,...u,forcedExit:"removed"===a.forcedExit?0:void 0};"Pin"===h&&(p={...p,pinCellWidth:I.current?.getBoundingClientRect().width||0,pinCellHeight:I.current?.getBoundingClientRect().height||0,windowWidth:window?.innerWidth,windowHeight:window?.innerHeight});let m={component:s,object_id_str:y,view_type:S,view_data:v||{},view_parameter:b};x?e&&w({event_type:7352,event_data:{pinCarouselSlotImpressions:[{...p,carouselDataId:Number(e.id),carouselSlotId:e.carousel_slots?.[e.index??0]&&Number(e.carousel_slots[e.index??0].id),slotIndex:e.index}]},...m,aux_data:{...o}}):w({clientTrackingParams:d,event_type:n.eventType,...m,element:c,event_data:{[n.impressionType]:"Story"===h?p:[p]},aux_data:{closeup_navigation_type:i,...o}})},k=(0,a.useCallback)(()=>{try{I.current instanceof HTMLElement&&P.start(I.current).onExitViewport(T).setDebugId(_||"unknown")}catch{window.console.error('Can only track impressions for type "HTMLElement"')}},[I.current]);(0,a.useEffect)(()=>(p&&!P.inExperiment&&P.setExperimentStatus(!0),g||k(),()=>{I.current instanceof HTMLElement&&P.stop(I.current)}),[k]);let E=(0,a.useRef)(g);return(0,a.useEffect)(()=>{E.current&&!g&&k(),E.current=g},[g,k]),I}let o=({children:e,...t})=>e({impressionTrackerRef:s(t)})},12610:(e,t,i)=>{"use strict";function a(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z3:()=>u,LU:()=>p,ZP:()=>h});let n=window.location.search.includes("debug_impressions=1")||document.cookie&&document.cookie.indexOf("debug_impressions=1")>-1,r={paused:"Pause",resumed:"Resume",stopped:"Flush",enter:"Enter viewport",exit:"Exit viewport"},l={},s={background:"#FF8A8A",transform:"scale(.98)"},o={init:e=>({transform:`scale(${l[e]?.8:.99})`,transition:"transform .2s ease-in-out",background:"#8E8E8E"}),[r.enter]:{background:"#A0DCC8",transform:"scale(.99)"},[r.exit]:s,[r.stopped]:s,[r.paused]:s,[r.resumed]:{background:"#0FA573",transform:"scale(.99)"}};class d{constructor(e){a(this,"setMutationObserver",e=>(this.mutationObserver=e,this)),a(this,"startMutationObserver",e=>{this.mutationObserver&&this.mutationObserver.observe(this.node,e)}),a(this,"stopMutationObserver",()=>{this.mutationObserver&&this.mutationObserver.disconnect()}),a(this,"handleIntersectionChange",e=>{let t=e.intersectionRatio>0||e.isIntersecting;if(t&&!this.inViewport){let e=Date.now();this.startTime=e,this._debug(r.enter,{startTime:e,node:this.node}),this.enterCallbacks.forEach(e=>e())}else!t&&this.inViewport&&(this._debug(r.exit,!0),this.exitCallbacks.forEach(e=>e(this.toJSON())));this.inViewport=t}),this.enterCallbacks=[],this.exitCallbacks=[],this.inViewport=!1,this.node=e,this.startTime=0,this.debugId=""}onEnterViewport(e){return this.enterCallbacks.push(e),this}onExitViewport(e){return this.exitCallbacks.push(e),this}setDebugId(e){return this.debugId=e,n&&Object.assign(this.node.style,o.init(e)),this}pause(){return this.inViewport&&(this._debug(r.paused,!0),this.exitCallbacks.forEach(e=>e(this.toJSON()))),this}resume(){if(this.inViewport){let e=Date.now();this._debug(r.resumed,{startTime:e}),this.startTime=e}return this}stop(e){return this.inViewport&&(this._debug(r.stopped,!0),this.exitCallbacks.forEach(t=>t(this.toJSON(e)))),this}toJSON(e=""){return{startTime:1e6*this.startTime,endTime:1e6*Date.now(),forcedExit:e}}toDebugJSON(){return{pinID:this.debugId,startTime:this.startTime,endTime:Date.now(),duration:`${(Date.now()-this.startTime)/1e3} seconds`}}_debug(e,t){if(n)switch(window.console.log(`📌 ${e} -- ${this.debugId}`),!0===t&&window.console.log(this.toDebugJSON()),"object"==typeof t&&window.console.log(t),o[e]&&Object.assign(this.node.style,o[e]),e){case r.flushed:case r.paused:case r.exit:l[this.debugId]=!0}}}function c(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let u=!0,p=!1;class h{constructor(){c(this,"_delegateChange",e=>{e.forEach(e=>{let t=this.activeImpressions.get(e.target);t&&t.handleIntersectionChange(e)})}),c(this,"_handleMutations",(e,t)=>{let i=this.mutationObservers.get(t),a=i&&i.offsetHeight<1;a&&i&&this.stop(i,"removed")}),this.activeImpressions=new Map,this.mutationObservers=new Map,this.bottomHeight=0,this.bottomObstructions=new Set,this.pausePriority=p,this.observer=new window.IntersectionObserver(this._delegateChange),window.Cypress&&!window.activeImpressions&&(window.activeImpressions=new Map),this.paused=!1,this.topHeight=0,this.topObstructions=new Set,this.inExperiment=!1}setExperimentStatus(e){this.inExperiment!==e&&(this.inExperiment=e)}stop(e,t=""){let i=this.activeImpressions.get(e);i&&(i.stop(t),this.mutationObservers.delete(i.mutationObserver),i.stopMutationObserver(),this.activeImpressions.delete(e),window.activeImpressions?.delete(e),this.observer.unobserve(e))}start(e){let t=this.activeImpressions.get(e);return t||(t=new d(e),this.activeImpressions.set(e,t),window.activeImpressions?.set(e,t),this.observer.observe(e),t.setMutationObserver(new window.MutationObserver((e,t)=>this._handleMutations(e,t))),this.mutationObservers.set(t.mutationObserver,e),t.startMutationObserver({subtree:!0,attributes:!0,attributeFilter:["style"]})),t}pause(e=u){this.paused||(Array.from(this.activeImpressions.values()).forEach(e=>e.pause()),this.paused=!0,this.pausePriority!==p||(this.pausePriority=e))}resume(e=u){(e!==p||this.pausePriority!==u)&&this.paused&&(Array.from(this.activeImpressions.values()).forEach(e=>e.resume()),this.paused=!1,this.pausePriority=p)}addObstruction(e,t){"top"===e?this.topObstructions.add(t):"bottom"===e&&this.bottomObstructions.add(t),this._calculateRootMargins()}removeObstruction(e,t){"top"===e?this.topObstructions.delete(t):"bottom"===e&&this.bottomObstructions.delete(t),this._calculateRootMargins()}updateObstructions(){this._calculateRootMargins()}_calculateRootMargins(){let e=Array.from(this.topObstructions).reduce((e,t)=>{let{bottom:i}=t.getBoundingClientRect();return i>e?i:e},0),t=window.innerHeight-Array.from(this.bottomObstructions).reduce((e,t)=>{let{top:i}=t.getBoundingClientRect();return i<e?i:e},window.innerHeight);if(e!==this.topHeight||t!==this.bottomHeight){let i={rootMargin:`${-e}px 0px ${-t}px`};this.observer.disconnect(),this.observer=new window.IntersectionObserver(this._delegateChange,i),Array.from(this.activeImpressions.values()).forEach(e=>this.observer.observe(e.node)),this.topHeight=e,this.bottomHeight=t}}}},564194:(e,t,i)=>{"use strict";i.d(t,{Z:()=>p});var a=i(667294),n=i(973935),r=i(337815),l=i(407043),s=i(124580),o=i(785893);function d(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let c={Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},BoardMoreIdeasRep:{impressionType:"boardMoreIdeasFeedUpsellImpressions",idType:"boardIdStr",eventType:10054},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127}};class u extends a.Component{constructor(e){super(e),d(this,"trackImpression",()=>{try{let{isPromoted:e}=this.props;this.node=(0,n.findDOMNode)(this),this.node instanceof HTMLElement&&(!e||this.node.getElementsByTagName("img").length>0)&&this.impressionsFramework.start(this.node).onExitViewport(this.logImpression).setDebugId(this.props.loggingId||"unknown")}catch(e){window.console.error('Can only track impressions for type "HTMLElement"')}}),d(this,"logImpression",e=>{let{carouselData:t,closeupImpressionType:i,closeupNavigationType:a,componentType:n,contextLogData:l,elementType:s,impressionAuxFields:o,impressionType:d,loggingId:u,objectIdStr:p,slotIndex:h,trackCarousel:m,viewData:g,viewParameter:_,viewType:y,logContextEvent:f}=this.props,x=c[d],v=x.idType,b=e.forcedExit&&"removed"===e.forcedExit?0:void 0,S={endTime:e.endTime,[v]:u,slotIndex:h,time:e.startTime,renderDuration:e.endTime-e.startTime,type:i,...o,forcedExit:b},w={};if("Pin"===d&&(S={...S,pinCellWidth:this.node.offsetWidth,pinCellHeight:this.node.offsetHeight,windowWidth:window?.innerWidth,windowHeight:window?.innerHeight},o?.chromeAraViewExp&&this.props.children?.props?.pin?.is_promoted)){let e=this.props.children.props.pin.attribution_source_id;(0,r.YS)(d,this.props.children.props.pin.is_promoted??null,e??null,this.props.children.props.pin.link??null,this.props.children.props.pin.campaign_id??null,o.araAuxData??null,this.props.children.props.pin.advertiser_id??null),w={is_arapi:!0,attribution_source_id:e||""}}m||f({event_type:x.eventType,component:n,element:s,event_data:{[x.impressionType]:"Story"===d?S:[S]},object_id_str:p,view_type:y,view_data:g||{},view_parameter:_,aux_data:{...l,...w,closeup_navigation_type:a}}),t&&m&&f({event_type:7352,component:n,event_data:{pinCarouselSlotImpressions:[{...S,..."canonical"===t.type?{carouselDataId:Number(t.carouselId??0),slotIndex:t.index,carouselSlotId:t.carouselSlots[t.index??0]&&Number(t.carouselSlots[t.index??0].slotId)}:{carouselDataId:Number(t.id??0),carouselSlotId:t.carousel_slots?.[t.index??0]&&Number(t.carousel_slots[t.index??0].id),slotIndex:t.index}}]},object_id_str:p,view_type:y,view_data:g||{},view_parameter:_,aux_data:{...l,...w}})}),this.impressionsFramework=e.impressionsFramework||s.Z}componentDidMount(){this.props.inImpressionExp&&!this.impressionsFramework.inExperiment&&this.impressionsFramework.setExperimentStatus(!0),this.props.isPaused||this.trackImpression()}componentDidUpdate(e){e.isPaused&&!this.props.isPaused&&this.trackImpression()}componentWillUnmount(){let{isPromoted:e}=this.props;this.node instanceof HTMLElement&&(!e||this.node.getElementsByTagName("img").length>0)&&this.impressionsFramework.stop(this.node)}render(){return a.Children.only(this.props.children)}}function p(e){let{logContextEvent:t}=(0,l.v)();return(0,o.jsx)(u,{...e,logContextEvent:t})}},124580:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var a=i(12610);let n=new a.ZP},349700:(e,t,i)=>{"use strict";i.d(t,{Wc:()=>o,bF:()=>c,nk:()=>s,r7:()=>u});var a=i(667294),n=i(785893);function r(e,t,i){return e.split(i).map(e=>{if(e.match(i)){let i=e.replace(/[\{\}]/g,"").trim();if(Object.prototype.hasOwnProperty.call(t,i))return t[i]}return e})}let l=/(\{\{\s*\w+\s*\}\})/g;function s(e,t){return r(e,t,l)}function o(e,t){return r(e,t,l).join("")}let d=/(\{\s*\w+\s*\})/g;function c(e,t){return r(e,t,d)}let u=({text:e})=>Array.isArray(e)?e.map((e,t)=>(0,n.jsx)(a.Fragment,{children:e},t)):e},755742:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});let a={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,F5:116,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}},499659:(e,t,i)=>{"use strict";i.d(t,{Q6:()=>u,ZP:()=>o,qe:()=>d,yU:()=>c});var a=i(239745);let n=(e,t)=>e.length===t.length&&e.every((e,i)=>e===t[i]),r=e=>e;function l(e,t=n,i=r){return function(a){let n=[];return function(...r){let l=n.find(e=>t(e.args,i(r)));if(l)return l.result;let s=a(...r);return n.push({args:i(r),result:s}),e&&n.length>e&&n.shift(),s}}}let s=l(),o=s,d=l(1),c=l(void 0,n,e=>[JSON.stringify(e)]),u=l(0,(e,t)=>e.length===t.length&&e.every((e,i)=>(0,a.Z)(e,t[i])))},752802:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});let a=["564x","736x","orig","474x","236x"],n=({images:e={},resolutionPreferences:t=a})=>{for(let i of t)if(e[i]&&e[i].url)return e[i];return null}},248975:(e,t,i)=>{"use strict";function a({embedSrc:e,embedType:t,imagesUrls:i,preferredResolution:a,excludeOriginals:n}){if(!e&&!t&&!i)return"";if("gif"===t)return e||"";if(!i)return"";if(a){let e="474x"===a&&i["474x"]||"236x"===a&&i["236x"]||i["736x"];if(e)return e}let r=Object.keys(i).reduce((e,t)=>{try{let a=t.split("x")[0];if(Number.isNaN(Number(a)))return{...e,[t]:i[t]};return{...e,[a]:i[t]}}catch(t){return e}},{}),l=Object.keys(r);n&&"orig"===l[l.length-1]&&l.pop();let s=l.pop();return r[s]||""}i.d(t,{Z:()=>a})},223008:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var a,n=i(667294);i(167912);var r=i(916117);let l=void 0!==a?a:a=i(469656);function s({pinKey:e,maxWidth:t}){let i=(0,r.Z)(l,e),a=i?.imageSpec_564x||i?.imageSpec_736x||i?.imageSpec_orig||i?.imageSpec_474x||i?.imageSpec_236x,s=a?.width||1,o=a?.height||1,d=a?.url||"",c=function(e,t,i=564){return e>i&&(t*=i/e,e=i),{width:e,height:t}}(s,o,t),u=(0,n.useCallback)(()=>({width:c.width,height:c.height,url:d}),[c.height,c.width,d]);return{getNormalizedPinImage:u}}},269051:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s}),i(167912);var a,n=i(916117),r=i(898781);let l=void 0!==a?a:a=i(47737),s=e=>{let t;let i=(0,r.ZP)(),a=(0,n.Z)(l,e),s=a.trackedLink||a.link||a.imageSpec_orig&&a.imageSpec_orig.url,{richMetadata:o,richSummary:d}=a,c=i.bt("Saved from ", "Saved from ", "Closeup pin annotation", undefined, true);return o&&o.products&&o.products[0]&&o&&o.products[0].name&&o.products[0].offerSummary&&(c=i.bt("Product sold by ", "Product sold by ", "pin annotation", undefined, true),t=(o.products?.[0]||void 0)?.offerSummary),!t&&d&&d&&d.products&&d.products[0]&&d&&d.products[0].name&&d.products[0].offerSummary&&(c=i.bt("Product sold by ", "Product sold by ", "pin annotation", undefined, true)),{pinLink:s,pinCreditPrefix:c,pinTitle:a.closeupUnifiedTitle,pinDescription:a.closeupUnifiedDescription,pinCategory:a.category}}},53199:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l}),i(167912);var a,n=i(916117);let r=void 0!==a?a:a=i(460863),l=e=>{let t=(0,n.Z)(r,e),i=[["60x60",t?.imageSpec_60x60],["136x136",t?.imageSpec_136x136],["170x",t?.imageSpec_170x],["236x",t?.imageSpec_236x],["474x",t?.imageSpec_474x],["564x",t?.imageSpec_564x],["736x",t?.imageSpec_736x],["600x315",t?.imageSpec_600x315],["orig",t?.imageSpec_orig]];return i.reduce((e,[t,i])=>i?{...e,[t]:i.url}:e,{})}},692627:(e,t,i)=>{"use strict";function a({hasPin:e,hasPinRichMetadata:t,hasPinRichMetadataProducts:i,hasPinRichMetadataArticle:a,hasPinRichMetadataRecipe:n,hasPinStoryPinData:r}){if(e){if(t)return i?144:a?141:n?145:139;if(r)return 157}return 140}i.d(t,{Z:()=>a})},523657:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var a=i(667294);i(883119);var n=i(301723),r=i(785893);let l=e=>document.querySelector(`img[src="${e}"]`)||null,s=(e,t,i)=>{let n=(0,a.useRef)(null),r=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(e!==n.current||i&&i!==r.current){n.current=e;let i=l(e);i?.complete&&t()}r.current=i},[e,t,i])};function o({alt:e,children:t,color:i,elementTiming:a,isActive:l=!1,naturalHeight:o,naturalWidth:d,onLoad:c,src:u,fit:p="none"}){return s(u,c,l),(0,r.jsx)(n.Z,{alt:e,color:i,elementTiming:a,fit:p,naturalHeight:o,naturalWidth:d,onLoad:c,src:u,children:t})}},932995:(e,t,i)=>{"use strict";function a(e,t,i){let a=[...e],n=a.splice(t,1)[0];return a.splice(i,0,n),a}i.d(t,{Z:()=>a})},418614:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var a=i(784590),n=i(19121),r=i(616550),l=i(780280),s=i(50286),o=i(826067);function d({getOptions:e,checkExperiments:t,disableFetch:i,...d}){let c=function(){let e=(0,n.Z)();return{country:e.country||void 0,id:e.id||void 0,isAuth:e.isAuth,isEmployee:!!e.isEmployee,isPartner:!!e.isPartner,username:e.username||void 0}}(),{args:u,fetchDisabled:p}=function({checkExperiments:e,disableFetch:t,viewer:i}){let a=(0,r.TH)(),n=(0,r.$B)(),d=(0,l.B)(),c=function({advertiser:e,deviceType:t,location:{pathname:i,search:a},inviteCode:n,match:{params:r,path:l},viewer:s}){let d={inviteCode:n,matchPath:l,params:r,parsedSearch:(0,o.mB)(a),pathname:i,search:a},c={country:s.country||void 0,id:s.id||void 0,isAuth:s.isAuth,isEmployee:!!s.isEmployee,isPartner:!!s.isPartner,username:s.username||void 0};return{advertiser:e,deviceType:t,routeData:d,user:c}}({advertiser:d.advertiser,deviceType:(0,s.Mq)(d),location:a,match:n,viewer:i,inviteCode:d.inviteCode??""}),u=!!t&&t(c),p=!!u||!e||e(d.experimentsClient);return{args:c,fetchDisabled:u||!p}}({checkExperiments:t,disableFetch:i,viewer:c}),h=e?e(u):void 0;return(0,a.Z)(p?null:{options:h,...d})}},909499:(e,t,i)=>{"use strict";i.d(t,{Hd:()=>d,_R:()=>s,gi:()=>r,lw:()=>a,oD:()=>n,wF:()=>o,zh:()=>l});let a={PINS:"pins",PINS_BUYABLE:"buyable_pins",PINS_MINE:"my_pins",PINS_VIDEO:"videos",BOARDS:"boards",USERS:"users",IDEA_PINS:"idea_pins",MY_CONTENT:"my_content"},n=e=>{let t=Object.values(a).find(t=>t===e);return t??void 0},r=e=>{switch(e){case a.PINS:return 0;case a.PINS_MINE:return null;case a.PINS_BUYABLE:return 1;case a.PINS_VIDEO:return 2;case a.BOARDS:return 3;case a.USERS:return 4;default:return null}},l=e=>{switch(e){case 0:return a.PINS;case 1:return a.PINS_BUYABLE;case 2:return a.PINS_VIDEO;case 3:return a.BOARDS;case 4:return a.USERS;default:return null}},s=e=>{switch(e){case a.PINS_MINE:case a.MY_CONTENT:return 107;case a.PINS_BUYABLE:return 254;case a.PINS_VIDEO:return 3306;case a.BOARDS:return 44;case a.USERS:return 45;case a.PINS:default:return 43}},o=e=>{switch(e){case a.PINS:return 60;case a.PINS_MINE:case a.MY_CONTENT:return 63;case a.PINS_BUYABLE:return 3800;case a.PINS_VIDEO:return 64;case a.BOARDS:return 61;case a.USERS:return 62;default:return null}},d=(e,t)=>{if(t)switch(e){case a.USERS:return 1000392;case a.PINS_BUYABLE:return 1000391;case a.PINS:default:return 29}switch(e){case a.USERS:return 1000432;case a.PINS_BUYABLE:return 1000433;case a.PINS:default:return 1000269}}},223815:(e,t,i)=>{"use strict";i.d(t,{U:()=>l,Z:()=>s});var a=i(755742),n=i(785893);let r=()=>{},l=e=>{e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()};function s({allowClickAndDrag:e,allowEsc:t,allowMediaPlay:i,allowScroll:s,children:o}){let d=e=>{t&&e.keyCode===a.Z.ESCAPE||l(e)};return(0,n.jsx)("div",{onAbort:l,onAnimationEnd:l,onAnimationIteration:l,onAnimationStart:l,onBlur:r,onCanPlay:i?r:l,onCanPlayThrough:l,onChange:l,onClick:e?r:l,onCompositionEnd:l,onCompositionStart:l,onCompositionUpdate:l,onContextMenu:l,onCopy:l,onCut:l,onDoubleClick:l,onDurationChange:l,onEmptied:l,onEncrypted:l,onEnded:l,onError:l,onFocus:r,onInput:l,onInvalid:l,onKeyDown:d,onKeyPress:d,onKeyUp:d,onLoad:l,onLoadedData:l,onLoadedMetadata:l,onLoadStart:l,onMouseDown:l,onMouseEnter:l,onMouseLeave:l,onMouseMove:e?r:l,onMouseOut:l,onMouseOver:l,onMouseUp:e?r:l,onPaste:l,onPause:l,onPlay:l,onPlaying:l,onProgress:l,onRateChange:l,onScroll:s?r:l,onSeeked:l,onSeeking:l,onSelect:l,onStalled:l,onSubmit:l,onSuspend:l,onTimeUpdate:l,onTouchCancel:l,onTouchEnd:e?r:l,onTouchMove:e?r:l,onTouchStart:e?r:l,onTransitionEnd:l,onVolumeChange:l,onWaiting:l,onWheel:l,children:o})}},622096:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var a=i(238381);let n=(0,a.Z)({type:"session"}),r=n},994912:(e,t,i)=>{"use strict";function a(e){return e.toLowerCase().charAt(0).toUpperCase()+e.toLowerCase().slice(1)}i.d(t,{Z:()=>a})},985913:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var a=i(858142);let n=/\{\{\s*(\w+)\s*\}\}/g,r=(e,t)=>(0,a.Z)(n,e,t)},858791:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});let a=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")},858142:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});let a=(e,t,i)=>t?t.replace(e,(e,t)=>i&&Object.prototype.hasOwnProperty.call(i,t)?i[t]:""):""},66699:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var a=i(985913),n=i(858791);let r=(e,t)=>{let i={};return Object.keys(t).forEach(e=>{i[e]=t[e]?(0,n.Z)(t[e].toString()):""}),(0,a.Z)(e,i)}},70061:(e,t,i)=>{"use strict";function a(e){return e.replace(/[_.-](\w|$)/g,(e,t)=>t.toUpperCase())}i.d(t,{Z:()=>a})},52022:(e,t,i)=>{"use strict";i.d(t,{S:()=>s,Z:()=>o});var a=i(667294),n=i(616550),r=i(53987),l=i(867820);let s=e=>(0,r.L6)(e)?"pin":(0,r.am)(e)?"board":(0,r.Xn)(e)?"login":(0,r.C$)(e)?"home":(0,r.cD)(e)?"profile":(0,r.dr)(e)?"ideas":(0,r.gT)(e)?"ideas-root":(0,r.tZ)(e)?"videos":(0,r.Q0)(e)?"videos-category":(0,r.$Y)(e)?"article":(0,r.E0)(e)?"shopping-spotlight":(0,r.Zz)(e)?"today":(0,r.j8)(e)?"unauth-profile":(0,r.f1)(e)?"shopping-root":(0,r.OX)(e)?"shopping-category":"other";function o(){let e=(0,n.TH)();return(0,a.useCallback)(({action:t,item:i,within:a})=>{let n=s(e);(0,l.My)(`logged_out_product.interaction.${n}.${t}`,{item:i||"none",within:a||"none"})},[e])}},477802:(e,t,i)=>{"use strict";i.d(t,{Qy:()=>d,Wu:()=>u,ZP:()=>c});var a=i(616550),n=i(883119),r=i(780280),l=i(826067),s=i(19121),o=i(785893);let d=()=>{let e=(0,s.Z)(),{isInternalIP:t}=(0,r.B)(),i=(0,a.TH)();return(t||e.isAuth&&e.isEmployee)&&Object.keys((0,l.mB)(i.search)).some(e=>e.startsWith("deb_"))};function c({data:e}){return(0,o.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{border:"2px solid red"}},"data-test-id":"debug-info",overflow:"auto",children:(0,o.jsx)("pre",{children:JSON.stringify(e,null,2).replace(/\\n/g,"\n")})})}let u=e=>(0,o.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{marginTop:10}},width:236,children:(0,o.jsx)(c,{...e})})},745312:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o,n:()=>l});var a=i(883119),n=i(667294),r=i(785893);function l({items:e,itemWidth:t,itemGap:i,numRows:a=1,actionItemType:r}){let l;let[s,o]=function(){let[e,t]=(0,n.useState)(0),i=(0,n.useRef)(null),a=(0,n.useCallback)(()=>{i.current&&t(i.current.clientWidth)},[i]);return(0,n.useEffect)(()=>(window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}),[a]),(0,n.useEffect)(a),[e,i]}(),d=Math.floor((s+i)/(t+i))*a||a,c=e.slice(0,d),u=[];switch(r){case"nextFour":d>=e.length?u=[c.pop()]:(c.pop(),u=e.slice(d-1,d+3));break;case"one":l=d>e.length?e[Math.floor(e.length/2)]:c.pop()}return{containerRef:o,itemsToRender:c,actionItem:l,nextFourItems:u}}let s={center:{outer:"center",inner:"center"},left:{outer:"start",inner:"start"},right:{outer:"end",inner:"end"}};function o({children:e,itemGap:t,containerRef:i,numRows:n=1,rowAlignment:l="center"}){let o=s[l];return(0,r.jsx)(a.xu,{ref:i,width:"100%",children:(0,r.jsx)(a.kC,{alignItems:"center",justifyContent:o.outer,children:(0,r.jsx)(a.kC,{gap:{row:Math.floor(t/4),column:0},justifyContent:o.inner,wrap:n>1,children:e})})})}},343341:(e,t,i)=>{"use strict";i.d(t,{F9:()=>r,Zo:()=>n});var a=i(425288);let{Provider:n,useHook:r}=(0,a.Z)("toastManagerContext")},280446:(e,t,i)=>{"use strict";function a(e){if((e||"").includes("--")){let t=e.split("--"),i=t.pop();return{text:t.join("--"),pinId:i}}return{text:"",pinId:e}}i.d(t,{Z:()=>a})},311541:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var a=i(667294);function n(e,t){let i=(0,a.useRef)([]),[n,r]=(0,a.useState)(),[l,s]=(0,a.useReducer)(n??(()=>t),t),o=(0,a.useCallback)(t=>{n?s(t):(i.current.length||e().then(e=>{r(()=>e.default)}),i.current=[...i.current,t])},[e,n]);return(0,a.useEffect)(()=>{n&&(i.current.forEach(s),i.current=[])},[n]),[l,o]}},829407:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var a=i(667294);let n=e=>{(0,a.useEffect)(e,[])}},411465:(e,t,i)=>{"use strict";i.d(t,{G:()=>s,Z:()=>o});var a=i(667294),n=i(616550),r=i(785893);let l=(0,a.createContext)(!0);function s({children:e}){let t=(0,n.TH)(),[i,s]=(0,a.useState)(!0),o=(0,a.useRef)(t);return(0,a.useEffect)(()=>{o.current!==t&&(o.current=t,s(!1))},[t]),(0,r.jsx)(l.Provider,{value:i,children:e})}function o(){return(0,a.useContext)(l)}},458101:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var a=i(667294);let n=()=>{let e=(0,a.useRef)(!1);return(0,a.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}},307603:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var a=i(985057);function n({x:e,y:t,w:i,h:n},r){return(0,a.Z)({x:e,y:t,w:i,h:n})?{x:r?parseInt(e,10):parseFloat(e),y:r?parseInt(t,10):parseFloat(t),w:r?parseInt(i,10):parseFloat(i),h:r?parseInt(n,10):parseFloat(n)}:{x:0,y:0,w:1,h:1}}},255164:(e,t,i)=>{"use strict";function a(e){let t;switch(e){case 1:t=1;break;case 2:t=2;break;case 3:t=3;break;case 4:t=4;break;case 5:t=5;break;case 6:t=6}return t}i.d(t,{Z:()=>a})},975540:(e,t,i)=>{"use strict";function a({cropArea:{x:e,y:t,w:i,h:a},scaledWidth:n,scaledHeight:r}){return{x:e/n,y:t/r,w:i/n,h:a/r}}i.d(t,{Z:()=>a})},599611:(e,t,i)=>{"use strict";function a({cropArea:e,scaledWidth:t,scaledHeight:i}){let a=e.h||0,n=e.w||0,r=e.x||0,l=e.y||0;return{h:Math.floor(a*i),w:Math.floor(n*t),x:Math.floor(r*t),y:Math.floor(l*i)}}i.d(t,{Z:()=>a})},94047:(e,t,i)=>{"use strict";function a({cropArea:e,cropSource:t,requestParams:i,searchQuery:a,surfaceType:n,title:r,trafficSource:l}){let s=[];if(e){let{x:t,y:i,w:a,h:n}=e;t>=0&&i>=0&&a>=0&&n>=0&&s.push(`x=${t}`,`y=${i}`,`w=${a}`,`h=${n}`)}t&&s.push(`cropSource=${t}`),n&&s.push(`surfaceType=${n}`),r&&s.push(`full_feed_title=${encodeURIComponent(r)}`),a&&s.push(`q=${a}`),l&&"unknown"!==l&&s.push(`rs=${l}`),i&&s.push(`requestParams=${encodeURIComponent(i)}`);let o=s.length?`?${s.join("&")}`:"";return o}i.d(t,{Z:()=>a})},297852:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var a=i(94047);function n({cropArea:e,cropSource:t,isProductPage:i,pinId:n,requestParams:r,searchQuery:l,surfaceType:s,title:o,trafficSource:d}){let c=(0,a.Z)({cropArea:e,cropSource:t,requestParams:r,searchQuery:l,surfaceType:s,title:o,trafficSource:d}),u="";return i&&(u="products/"),`/pin/${n}/visual-search/${u}${c}`}},985057:(e,t,i)=>{"use strict";function a({x:e,y:t,w:i,h:a}){return[e,t,i,a].every(e=>""!==e&&null!=e&&Number.isFinite(Number(e)))}i.d(t,{Z:()=>a})},873476:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var a=i(667294),n=i(616550),r=i(826067),l=i(50286),s=i(829407);function o(){let e=(0,l.HG)(),{action:t}=(0,n.k6)(),{path:i}=(0,n.$B)(),o=(0,n.TH)(),{entry:d}=(0,r.mB)(o.search),c="/pin/:id/related-products/all"===i,u="/pin/:id/visual-search/products"===i,[p,h]=(0,a.useState)(()=>{if("PUSH"!==t)return null;if(e){if(c&&("flashlight"===d||"stela"===d))return"feed_module";if("shop"===d)return"shop_the_look_module"}else if(u)return"feed_module";return null});return(0,s.Z)(()=>{h(null)}),p}},487392:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var a=i(780280),n=i(784590),r=i(19121);function l(){let e=(0,a.B)(),t=(0,r.Z)(),{advertiser:i}=e,l=(0,n.Z)(i?.merchant_id?null:{name:"UserResource",options:{user_id:i?i.owner_user_id:t.isAuth&&t.id,field_set_key:"merchant_summary"}});return{merchantId:i?.merchant_id||l.data?.ppa_merchant_id||"",advertiserId:i?.id||"",ownerUserId:i?.owner_user_id||(t.isAuth?t.id:""),advertiser:i}}},306732:(e,t,i)=>{"use strict";i.d(t,{Be:()=>a,J_:()=>l,MD:()=>n,Rd:()=>s,ss:()=>r});let a={1:"All Products",2:"Best Deals",3:"Most Popular",4:"Top Sellers",5:"Back In Stock",6:"New Arrivals"},n={campaignId:"createNewCampaign",objectiveType:"CATALOG_SALES",absolutify:!0},r="US",l="activated",s="ads_create_source_param"},785352:(e,t,i)=>{"use strict";i.d(t,{I:()=>o});var a=i(667294),n=i(898781),r=i(784590),l=i(306732);let s=(e,t,i)=>{if(i===l.Be[Number(t)]){if(1===Number(t))return e.bt("All products", "All Products", "catalogs.productGroup.name.allProducts", undefined, true);if(2===Number(t))return e.bt("Best deals", "Best Deals", "catalogs.productGroup.name.bestDeals", undefined, true);if(3===Number(t))return e.bt("Most popular", "Most Popular", "catalogs.productGroup.name.mostPopular", undefined, true);if(4===Number(t))return e.bt("Top sellers", "Top Sellers", "catalogs.productGroup.name.topSellers", undefined, true);else if(5===Number(t))return e.bt("Back in stock", "Back In Stock", "catalogs.productGroup.name.inStock", undefined, true);else if(6===Number(t))return e.bt("New arrivals", "New Arrivals", "catalogs.productGroup.name.newArrivals", undefined, true)}return i};function o(e={},t=!1,i=!1){let l=(0,n.ZP)(),o=(0,r.Z)(t?null:{name:"ProductGroupsResource",options:e,enabledRouteRefresh:!0,noCache:i}),d=(0,a.useMemo)(()=>o.data&&o.isLoaded?o.data.map(e=>(e.name=s(l,e.type,e.name),e)):[],[l,o.data,o.isLoaded]);return{...o,data:d}}},869899:(e,t,i)=>{"use strict";i.d(t,{r:()=>v,K:()=>x});var a=i(667294),n=i(425288),r=i(773285),l=i(784590),s=i(19121),o=i(389643),d=i(339363),c=i(70061);let u=e=>{let t={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&("object"!=typeof e[i]||null===e[i]||Array.isArray(e[i])?t[(0,c.Z)(i)]=e[i]:t[(0,c.Z)(i)]=u(e[i]));return t},p=(e,t)=>{let i=[];for(let a in e)a!==t&&i.push({id:a,...u(e[a])});let a=i.sort(({user:{businessName:e}},{user:{businessName:t}})=>e.localeCompare(t)),n=new Map;for(let e of a)n.set(e.id,e);return n},h={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},m=(e,t)=>{switch(t.type){case"LOAD_PROFILES":return{...e,profiles:t.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:t.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:t.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:t.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:t.payload};default:return e}},g=({dispatch:e,isEnabled:t,state:i})=>{let{orbacVisibility:n,disableProfileChanger:r,headerVisible:l}=i,s=(0,a.useCallback)(i=>{t&&e({type:"SET_ACTIVE_PROFILE",payload:i})},[t,e]),o=(0,a.useCallback)(i=>{t&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:i??!n})},[t,e,n]),d=(0,a.useCallback)(i=>{t&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:i??!r})},[t,e,r]),c=(0,a.useCallback)(i=>{t&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:i??!l})},[t,e,l]);return{changeProfile:s,toggleORBACVisibility:o,toggleDisableProfileChanger:d,toggleHeaderVisibility:c}},_=e=>{let[t,i]=(0,a.useReducer)(m,h),n=g({dispatch:i,isEnabled:e,state:t}),{activeProfile:r,orbacVisibility:l}=t;(0,a.useEffect)(()=>{let e=(0,d.qn)("orbacActiveProfile",!1);e&&i({type:"SET_ACTIVE_PROFILE",payload:e})},[]),(0,a.useEffect)(()=>{let e=(0,d.qn)("orbacVisibilty",!1);e&&i({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})},[]),(0,a.useEffect)(()=>{(0,d.Nh)("orbacVisibility",l)},[l]),(0,a.useEffect)(()=>{(0,d.Nh)("orbacActiveProfile",r)},[r]);let s=(0,a.useCallback)((e,t)=>{i({type:"LOAD_PROFILES",payload:p(e,t)})},[i]);return{state:t,actions:n,receiveProfiles:s}};var y=i(785893);let{Provider:f,useMaybeHook:x}=(0,n.Z)("RoleBasedAccessControlContext"),v=({children:e})=>{let t;let{checkExperiment:i}=(0,r.F)(),n=(0,s.Z)(),d=!!(n.isAuth&&n.isPartner&&i("web_m10n_business_access_orbac_www").anyEnabled),{state:c,actions:u,receiveProfiles:p}=_(d),{activeProfile:h,headerVisible:m,profiles:g=[]}=c,x=g?Array.from(g.values()):[],v=(0,o.Z)(x),b=!!n.isAuth&&x.length>0&&v,S=n.isAuth?n.id:"",w=n.isAuth?n.username:"",{changeProfile:P,toggleORBACVisibility:I,toggleDisableProfileChanger:T,toggleHeaderVisibility:k}=u;(0,a.useEffect)(()=>{if(d){if("string"==typeof v){P(v);return}h||P(S)}},[v,S,d,P,h]),(0,a.useEffect)(()=>{d&&(b&&!m&&k(!0),!b&&m&&k(!1))},[k,b,d,m,g]);let{data:E}=(0,l.Z)(d?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),j=E?.profiles;n&&n.isAuth&&c.activeProfile===n.id?t={id:n.id,permissions:["OWNER"],user:{username:w,businessName:n.fullName,imgUrl:n.imageSmallUrl}}:h&&c.profiles&&(t=c.profiles.get(h)),(0,a.useEffect)(()=>{j&&p(j,S)},[p,j,S]);let A=c.profiles?Array.from(c.profiles.values()):[];return(0,y.jsx)(f,{value:{profiles:A,headerVisible:c.headerVisible,activeProfile:t,changeProfile:P,toggleORBACVisibility:I,toggleDisableProfileChanger:T,toggleHeaderVisibility:k},children:e})}},717615:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var a=i(773285),n=i(869899),r=i(389643);let l=()=>{let{checkExperiment:e}=(0,a.F)(),t=(0,n.K)(),{activeProfile:i}=t||{},l=e("web_m10n_business_access_orbac_www").anyEnabled,s=(0,r.Z)(t?.profiles||[]),{anyEnabled:o}=e("useorbacroutematcher_in_useorbacactingas");return l&&(!o||s)&&i&&(i.viewerMeetsMfaRequirement||(i.permissions||[]).includes("OWNER"))?i:Object.freeze({})}},389643:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var a=i(616550),n=i(53987),r=i(773285),l=i(19121),s=i(350118);let o=e=>{let t=(0,a.TH)(),i=(0,l.Z)(),o=(0,s.S6)(),{anyEnabled:d}=(0,r.F)().checkExperiment("web_m10n_business_access_orbac_www"),c=(0,a.$B)("/:username"),u=c?.params?.username,p=(0,a.$B)("/pin/:id"),h=!!p?.params?.id&&o(p.params.id)?.pinner?.id;if((0,n.ej)(t))return!1;if((0,n.RU)(t))return!0;if((0,n.mY)(t))return d;let m=e.concat(i.isAuth?{user:{username:i.username},id:i.id}:{}).find(e=>{let{user:t={},id:i}=e||{},{username:a}=t;return(!!a&&!!u||!!h&&!!i)&&(a===u||h===i)});return!!m&&m.id}},231947:(e,t,i)=>{"use strict";i.d(t,{D3:()=>d,DX:()=>s,KY:()=>c,Ms:()=>a,N1:()=>u,_P:()=>l,lJ:()=>r,nl:()=>n,q6:()=>o});let a=(e,t)=>{let i=e&&e.isAuth?e.username:"";return e&&t&&t.user&&t.user.username&&(i=t.user.username),i},n=(e,t)=>!!(t&&t.user&&e&&e.isAuth&&t.id!==e.id?t.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),r=(e,t)=>e&&e.isAuth&&t&&t.id&&t.id!==e.id?t.id:"",l=(e,t,i)=>i&&i.user&&t&&t.isAuth&&i.id!==t.id?i.user.merchantId:e.advertiser?.merchant_id,s=(e,t,i)=>i&&i.user&&e.isAuth&&i.id!==e.id?i.user.scheduledPinCount||0:e.isAuth&&t&&t.scheduled_pin_count||0,o=(e,t,i)=>{let a=e&&e.isAuth&&i&&i.id&&i.id!==e.id&&i.id===t;return!!a},d=(e,t,i)=>{let a=o(e,t,i)||e&&e.isAuth&&t===e.id;return!!a},c=(e,t,i)=>{let a=t&&t.owner&&t.owner.id||"";return d(e,a,i)};function u(e,t,i){let a=t?t.id:"";return d(e,a,i)}},225692:(e,t,i)=>{"use strict";i.d(t,{X:()=>n,Z:()=>r});var a=i(667294);let n=120;function r(e,t=0,i=n){let[r,l]=(0,a.useState)(e?"active":"inactive");return(0,a.useEffect)(()=>{if(e){if(t){let e=setTimeout(()=>l("active"),t);return()=>{clearTimeout(e)}}l("active")}else{let e=setTimeout(()=>l("inactive"),i);return()=>{clearTimeout(e)}}},[e]),r}},841509:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var a=i(883119),n=i(785893);function r({children:e,additionalStyles:t={}}){return(0,n.jsx)(a.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none",...t}},"data-test-id":"contentLayer",left:!0,position:"absolute",right:!0,top:!0,children:e})}},525199:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var a=i(883119),n=i(225692),r=i(785893);function l({children:e,fadeInDuration:t=0,fadeOutDuration:i=n.X,visibility:l}){return"none"!==l&&e?(0,r.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{hidden:{opacity:0,transition:i?`opacity ${i}ms ease`:void 0},visible:{opacity:1,transition:t?`opacity ${t}ms ease`:void 0}}[l]},children:e}):null}},833991:(e,t,i)=>{"use strict";i.d(t,{HW:()=>l,YW:()=>u,i3:()=>p,o2:()=>c});var a=i(667294),n=i(425288),r=i(785893);let l=660,s={educationId:null,paddingRight:0,zIndex:l};function o(e,t){switch(t.type){case"FOOTER_SET_EDUCATION_ID":let{educationId:i}=t.payload;return{...e,educationId:i};case"FOOTER_SET_PADDING_RIGHT":let{paddingRight:a}=t.payload;return{...e,paddingRight:a};case"FOOTER_SET_Z_INDEX":let{zIndex:n}=t.payload;return{...e,zIndex:n};default:return e}}let{Provider:d,Consumer:c,useHook:u}=(0,n.Z)("footerContext");function p({children:e}){let[t,i]=(0,a.useReducer)(o,s),n=(0,a.useCallback)(e=>i({type:"FOOTER_SET_PADDING_RIGHT",payload:{paddingRight:e}}),[]),l=(0,a.useCallback)(e=>i({type:"FOOTER_SET_EDUCATION_ID",payload:{educationId:e}}),[]),c=(0,a.useCallback)(e=>i({type:"FOOTER_SET_Z_INDEX",payload:{zIndex:e}}),[]),u=(0,a.useMemo)(()=>({...t,setEducationId:l,setPaddingRight:n,setZIndex:c}),[t,l,n,c]);return(0,r.jsx)(d,{value:u,children:e})}},427806:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var a=i(883119),n=i(785893);function r({text:e}){return(0,n.jsx)(a.xu,{display:"visuallyHidden",children:(0,n.jsx)(a.X6,{accessibilityLevel:1,children:e})})}},379764:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var a=i(883119),n=i(633988);let r=new a.H3([n.Z]),l=r},872482:(e,t,i)=>{"use strict";i.d(t,{D:()=>n,a:()=>r});var a=i(425288);let{Provider:n,useMaybeHook:r}=(0,a.Z)("unauthPageWrapperContext")},8742:(e,t,i)=>{"use strict";i.d(t,{CC:()=>u,VU:()=>h,ZP:()=>_,hW:()=>p,jz:()=>m}),i(167912);var a,n=i(240684),r=i(916117),l=i(50286),s=i(19121),o=i(202873),d=i(986901),c=i(785893);let u=(0,n.ZP)({resolved:{},chunkName:()=>"AuthDesktopPinRep",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>Promise.all([i.e(93041),i.e(60310),i.e(40706),i.e(95044),i.e(2984)]).then(i.bind(i,656226)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return i(t)},resolve:()=>656226}),p=(0,n.ZP)({resolved:{},chunkName:()=>"DefaultPinRep",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>Promise.all([i.e(97270),i.e(18352),i.e(10966),i.e(89363),i.e(39921)]).then(i.bind(i,369083)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return i(t)},resolve:()=>369083}),h=(0,d.Z)(()=>Promise.all([i.e(93041),i.e(60310),i.e(40706),i.e(95044),i.e(2984)]).then(i.bind(i,656226)),void 0,"AuthDesktopPinRep"),m=(0,d.Z)(()=>Promise.all([i.e(97270),i.e(18352),i.e(10966),i.e(89363),i.e(39921)]).then(i.bind(i,369083)),void 0,"DefaultPinRep"),g=void 0!==a?a:a=i(875666);function _(e){let t=(0,l.HG)(),i=(0,o.b)(),a=(0,s.Z)(),n=a&&a.isAuth&&t,d=(0,r.Z)(g,e.duploQueryRef);if(n&&!e.duploQueryRef){let{disableReaction:t,disableRounding:a,disableAppUpsell:n,duploDedupeVisualAnnotations:r,duploDisablePinCardPadding:l,duploFeedItemProps:s,duploIsSquarePin:o,duploLazyLoadImage:d,duploOneTapSave:p,duploPinCardDetailsMargin:m,duploPriorityFetchImage:g,duploQueryRef:_,duploShouldAddNiiSearchParamToImageUrls:y,duploShouldAllowProductPriceIndicator:f,duploConversationPin:x,topLevelTrafficSource:v,topLevelTrafficSourceDepth:b,trafficSource:S,...w}=e;return i?(0,c.jsx)(h,{...w}):(0,c.jsx)(u,{...w})}let{attributionOption:_,blockClickEvents:y,borderStyle:f,disableHover:x,imageHeightModifier:v,imageOnlyOption:b,onError:S,onLoad:w,pin:P,pinImageCrop:I,pinImageFit:T,resolution:k,rounding:E,saveButtonOptions:j,authDesktopSelectionState:A,authDesktopSurface:C,pinOwner:F,...R}=e;return i?(0,c.jsx)(m,{...R,duploQueryRef:d}):(0,c.jsx)(p,{...R,duploQueryRef:d})}},350118:(e,t,i)=>{"use strict";i.d(t,{AF:()=>s,H0:()=>o,S6:()=>d,_S:()=>c});var a=i(702664),n=i(425288),r=i(785893);let{Provider:l,useHook:s,useMaybeHook:o}=(0,n.Z)("Pins");function d(){let e=s();return t=>e[t]}function c({children:e}){let t=(0,a.useSelector)(({pins:e})=>e,a.shallowEqual);return(0,r.jsx)(l,{value:t,children:e})}},284367:(e,t,i)=>{"use strict";i.d(t,{Z:()=>g});var a=i(667294),n=i(883119),r=i(920231),l=i(444445),s=i(317254),o=i(740990),d=i(50286),c=i(829407),u=i(679031),p=i(22145),h=i(698629),m=i(785893);function g({customLayoutType:e,emptyState:t,feedItems:i,feedKey:g,maxColumns:_,pagination:{hasNext:y,isLoadingNext:f,loadNext:x,refetch:v},pullToRefresh:b,renderFeedItem:S,serverRender:w}){let P=(0,d.HG)(),[I,T]=(0,a.useState)(!1),k="userSearch"===e?window.innerWidth-16:200,E=f&&0===i.length&&!I,j="desktopFlashlight"===e?0:l.qG;return(0,c.Z)(()=>(window.addEventListener("online",x),()=>window.removeEventListener("online",x))),(0,m.jsxs)(n.xu,{"data-test-id":"MobileFeed",children:[(0,m.jsx)(p.Z,{enabled:!!b,onPull:()=>{v(),T(!0)},refreshing:I}),(0,m.jsxs)(n.xu,{"data-test-id":"grid",marginEnd:j,marginStart:j,opacity:I?.5:1,children:[(0,m.jsx)(s.Z,{isAtEndOfFeed:!y,itemCount:i.length,children:i.length?(0,m.jsx)(n.xu,{"data-test-id":"feed",marginTop:(0,u.kk)({isDesktop:P}),children:(0,m.jsx)(o.Z.Consumer,{children:t=>(0,m.jsx)(a.Fragment,{children:(0,m.jsx)(u.c$,{children:(0,m.jsx)(r.Z,{cacheKey:g,columnWidth:P?l.yF:k,gutterWidth:P?4*l.jC:void 0,id:w?g:void 0,items:i,loadItems:x,maxColumns:_,minCols:"userSearch"===e?1:2,renderItem:({data:e,itemIdx:t})=>S(e,t),scrollContainerRef:t,serverRender:w})})})})}):f?(0,m.jsx)(u.gG,{}):t??null}),E&&(0,m.jsx)(n.xu,{column:12,paddingY:2,children:(0,m.jsx)(h.Z,{partialViewportWidth:"desktopFlashlight"===e})})]})]})}},966676:(e,t,i)=>{"use strict";i.d(t,{Nb:()=>s,Of:()=>o,YO:()=>l,ZP:()=>u,x4:()=>c});var a=i(667294),n=i(499659),r=i(92261);let l=({showProductDetailPage:e,isLargerPane:t,showCloseupContentRight:i})=>e&&t?i?r.Uj:r.zT:1,s=(0,n.qe)(({paneWidth:e,pdpCarouselSlotToPaneRatio:t,showCloseupContentRight:i,showProductDetailPage:a,viewportSize:n,maxWidth:r,descriptionPaneWidth:l,isCloseupRelatedPinsAboveTheFoldEnabled:s,stackedCloseupEnabled:o,isInRemoveMagnifyingGlassVariant:d})=>({paneWidth:e,pdpCarouselSlotToPaneRatio:t,showCloseupContentRight:i,showProductDetailPage:a,viewportSize:n,maxWidth:r,descriptionPaneWidth:l,isCloseupRelatedPinsAboveTheFoldEnabled:s,stackedCloseupEnabled:o,isInRemoveMagnifyingGlassVariant:d})),o={showCloseupContentRight:!0,showProductDetailPage:!1,viewportSize:"lg",paneWidth:r.Gg,pdpCarouselSlotToPaneRatio:1,maxWidth:r.u6,descriptionPaneWidth:r.u6-r.Gg,isCloseupRelatedPinsAboveTheFoldEnabled:!1,stackedCloseupEnabled:!1,isInRemoveMagnifyingGlassVariant:!1},d=(0,a.createContext)(o);function c(){let e=(0,a.useContext)(d);if(!e)throw Error("useCloseupContext must be used within CloseupContextProvider");return e}let u=d},92261:(e,t,i)=>{"use strict";i.d(t,{$T:()=>_,CI:()=>r,Ch:()=>s,Ey:()=>f,Gb:()=>o,Gg:()=>a,Ie:()=>p,KP:()=>h,Kn:()=>l,Uj:()=>d,bx:()=>m,d2:()=>u,g9:()=>g,iB:()=>x,pw:()=>y,u6:()=>n,zT:()=>c});let a=508,n=2*a,r=488,l=992,s=672,o=1176,d=.6,c=.84,u=40,p=72,h=740,m=912,g=32,_=24,y=1612,f=1360,x={ARTICLE:"https://schema.org/Article",BRAND:"https://schema.org/Brand",PRODUCT:"https://schema.org/Product",RECIPE:"https://schema.org/Recipe",OFFER:"https://schema.org/Offer",OUT_OF_STOCK:"https://schema.org/OutOfStock",PERSON:"https://schema.org/Person"}},398061:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s,e:()=>l});var a=i(883119),n=i(780280),r=i(785893);let l=new a.Ry(1);function s({children:e,isImagePinForUnauthOnTablet:t}){let{isAuthenticated:i}=(0,n.B)();return(0,r.jsxs)(a.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{cursor:"pointer",width:t?"40vw":void 0}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!t||void 0,top:!0,zIndex:i?void 0:l,children:[(0,r.jsx)(a.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"#000",borderRadius:"6px 6px 0 0",WebkitTransition:"opacity .04s linear",transition:"opacity .04s linear"}},left:!0,opacity:.4,position:"absolute",right:!0,top:!0}),e]})}},398789:(e,t,i)=>{"use strict";i.d(t,{Z:()=>S});var a=i(667294),n=i(883119),r=i(898781),l=i(773285),s=i(523657),o=i(780280),d=i(700380),c=i(50286),u=i(411465),p=i(398061),h=i(616550),m=i(667679),g=i(622096),_=i(867820),y=i(52022),f=i(785893);function x({setShowClickthroughOverlay:e,isEligibleForPdp:t,isEligibleForDesktopSocialInviteOverlay:i,inviterFirstName:s,imageSignature:o,pinId:d}){let u=(0,r.ZP)(),p=(0,y.Z)(),x=(0,m.Z)(),{checkExperiment:v}=(0,l.F)(),b=(0,a.useRef)(),S=(0,c.ZP)(),w="desktop"===S,P=s&&i,I=w&&v("dweb_unauth_main_pin_visual_search_v2").group,T="enabled_2_no_upsell"===I||"enabled_rollout"===I||"enabled_1_nav_upsell_post_land"===I,k=P&&(u.bt("Sign up to join {{ name }} on Pinterest", "Sign up to join {{ name }} on Pinterest", "pin.closeup.wash.desktop.shareNotification", undefined, true)).replace("{{ name }}",s),E=T?u.bt("See something you like? Tap to search inside this image", "See something you like? Tap to search inside this image", "web.unauth.plp.clickable_wash.header", undefined, true):u.bt("Click to make the most of this idea with a free account", "Click to make the most out of this idea with a free account", "web.unauth.plp.clickable_wash.header", undefined, true),j=u.bt("Tap to make the most of this idea with a free account", "Tap to make the most out of this idea with a free account", "mweb.unauth.plp.clickable_wash.header", undefined, true),A=(0,h.k6)();return(0,f.jsx)(n.iP,{onMouseEnter:()=>{P&&(0,_.My)("dweb.main_pin.social.wash.view"),(0,_.My)("dweb.pin.wash.view")},onMouseLeave:()=>{P&&(0,_.My)("dweb.main_pin.social.wash.dismiss"),(0,_.My)("dweb.pin.wash.dismiss")},onTap:({event:e})=>{if(w){if(e.preventDefault(),p({action:"click",item:"pin-image"}),i&&s&&(0,_.My)("dweb.main_pin.social.wash.click"),T){let e=`/pin/${d}/visual-search/?`;o&&(e+=`imageSignature=${o}`),A.push(e),g.Z.setItem("VISUAL_SEARCH_SOURCE","MAIN_PIN_WASH")}else(0,_.My)("dweb_unauth_main_pin_image_click.signup_modal.show"),x({reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"click_closeup",desktopOptions:{modalType:"signup",modalOptions:{source:"defaultSource",container:"pinWash"}}});t&&(0,_.My)("unauth.pdp.pin.img.click",{device:S})}},children:(0,f.jsxs)(n.xu,{zIndex:new n.Ry(2),children:[(0,f.jsx)(n.xu,{ref:b,alignItems:"center",bottom:!0,"data-test-id":"main-pin-hover-overlay",direction:"column",display:"flex",height:"100%",justifyContent:i?"center":void 0,left:!0,position:"absolute",right:!0,top:!0,width:"100%",children:(0,f.jsx)(n.xu,{alignItems:"center",direction:"column",display:"flex",maxWidth:T?260:240,paddingY:10,children:(0,f.jsx)(n.xu,{marginTop:8,children:(0,f.jsx)(n.X6,{align:"center",color:"light",size:P?"500":"400",children:w?k||E:j})})})}),!w&&(0,f.jsx)(n.xu,{marginEnd:4,marginTop:4,position:"absolute",right:!0,top:!0,children:(0,f.jsx)(n.hU,{accessibilityLabel:u.bt("Close Pin clickable wash", "Close pin clickable wash", "mweb.unauth.plp.clickable_wash.close_button", undefined, true),icon:"cancel",iconColor:"white",onClick:({event:t})=>{t.stopPropagation(),e&&(e(!1),(0,_.My)("main.pin.wash.cancel"))},size:"md"})})]})})}var v=i(691720),b=i(872482);let S=e=>{let t=(0,r.ZP)(),{alt:i,clickthroughOverlayOptions:h,color:m,isFlashlightPage:g,naturalHeight:_,naturalWidth:y,placeholder:S,pinImageResizePercent:w=100,pwtElementTimingId:P,pwtSurfaceContext:I,setShowClickthroughOverlay:T,showSpinner:k,src:E,stickyFooter:j,isEligibleForPdp:A,pinId:C,imageSignature:F}=e,R=(0,u.Z)(),{checkExperiment:D}=(0,l.F)(),O=!R,{isAuthenticated:L}=(0,o.B)(),M=(0,c.ZP)(),N="desktop"===M,Z=L&&!N&&D("auth_mweb_inline_action_bar").anyEnabled,K=(0,a.useRef)(),[z,H]=(0,a.useState)(!O||!!E&&!!S&&S===E),U=(0,a.useRef)(""),B=()=>{I&&I.markConstraintComplete("PinPageMainImageRendered")};(0,a.useEffect)(()=>{let e=new Image;e.onload=()=>H(!0),e.src=E},[]);let G=(0,a.useRef)(b.a()?.setHasScrolledPastMainContent);(0,a.useEffect)(()=>{let e=(0,d.Z)(()=>{if(K.current){let t=window.scrollY>K.current.offsetTop+K.current.offsetHeight;G.current?.(t),t&&window.removeEventListener("scroll",e)}},10);window.addEventListener("scroll",e)},[]);let[$,V]=(0,a.useState)();(0,a.useEffect)(()=>{K.current&&V(K.current.scrollHeight)},[]);let W=!g&&"tablet"===M,Y=O?(0,f.jsx)(s.Z,{alt:i,color:m,elementTiming:P,naturalHeight:_,naturalWidth:y,onLoad:B,src:S}):null;return(0,f.jsxs)(n.xu,{ref:K,dangerouslySetInlineStyle:{__style:{transition:100===w?"":"width 500ms ease-in-out"}},"data-test-id":"pin-closeup-image",marginTop:"tablet"===M&&Z?12:0,maxHeight:"100%",maxWidth:"tablet"===M?v.g6:void 0,minHeight:100===w?$:void 0,overflow:j?void 0:"hidden",position:"relative",rounding:g||"phone"===M?0:6,width:g||"phone"===M?`${w}%`:N?508:v.Hg,children:[!L&&h&&"enabled_3_no_wash_upsell_post_land"!==D("dweb_unauth_main_pin_visual_search_v2").group&&(0,f.jsx)(p.Z,{isImagePinForUnauthOnTablet:!1,children:(0,f.jsx)(x,{imageSignature:F||"",inviterFirstName:U.current,isEligibleForPdp:A,pinId:C||"",setShowClickthroughOverlay:T})}),Y&&(W?(0,f.jsx)(n.xu,{overflow:"hidden",rounding:6,children:Y}):Y),(0,f.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:z?1:0,transition:z&&!N?"opacity .5s ease-in-out":void 0,backgroundColor:m}},left:!0,overflow:W?"hidden":void 0,position:O?"absolute":"relative",right:!0,rounding:W?6:5,top:!0,children:O?(0,f.jsx)(n.Ee,{alt:i,naturalHeight:_,naturalWidth:y,src:E}):(0,f.jsx)(s.Z,{alt:i,color:m,elementTiming:P,naturalHeight:_,naturalWidth:y,onLoad:B,src:E})}),k&&(0,f.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:z?0:1,transition:z?"opacity .5s ease-in-out":void 0}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:!z&&(0,f.jsx)(n.kC,{alignItems:"center",justifyContent:"start",children:(0,f.jsx)(n.$j,{accessibilityLabel:t.bt("Loading image", "Loading image", "Loading higher resolution image", undefined, true),show:!0})})}),j]})}},633988:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var a=i(883119),n=i(398061);let r=new a.H3([n.e]),l=r},435497:(e,t,i)=>{"use strict";i.d(t,{Z:()=>x});var a=i(667294),n=i(883119),r=i(729884),l=i(407043),s=i(444445),o=i(564194),d=i(391254),c=i(773285),u=i(780280),p=i(829407),h=i(785893);function m({index:e,length:t,showBadge:i}){return(0,h.jsx)(n.xu,{alignItems:"center",color:"selected",dangerouslySetInlineStyle:{__style:{opacity:i?.8:0,transition:"opacity .3s"}},display:"flex",height:35,justifyContent:"center",marginEnd:5,marginTop:5,position:"absolute",right:!0,rounding:2,width:35,zIndex:new n.Ry(1),children:(0,h.jsx)(n.xv,{color:"inverse",children:`${(e??0)+1}/${t}`})})}let g=({index:e})=>{let[t,i]=(0,a.useState)(!0),n=(0,a.useRef)(),r=(0,a.useRef)();return(0,a.useEffect)(()=>(n.current=setTimeout(()=>{i(!1)},3e3),()=>{clearTimeout(n.current)}),[]),(0,a.useEffect)(()=>{if(!r.current){r.current=e;return}clearTimeout(n.current),i(!0)},[e]),{showBadge:t}};var _=i(455024),y=i(350118);let f=`
  .horizontal-scroll-container {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  ::-webkit-scrollbar {
    display: none;
  }`;function x(e){let{children:t,componentType:i,containerRef:x,contextLogData:v,disableTransition:b,gap:S=0,height:w,id:P,impressionType:I,index:T,shouldBeDragCarousel:k,showCarouselBadge:E,styleOverrides:j,slideWidth:A,view:C,viewParameter:F,widthRatio:R=1}=e,{showBadge:D}=g({index:T}),{logContextEvent:O}=(0,l.v)(),L=(0,y.S6)()(P),M=(0,a.useRef)(),N=(0,a.useRef)(),Z=(0,a.useRef)(0),K=(0,a.useRef)(),{checkExperiment:z}=(0,c.F)(),{isAuthenticated:H}=(0,u.B)();if((0,p.Z)(()=>{let e=N.current;if(!e)return;let t=()=>{let e=z(H?"web_use_intersection_observer_for_getboundingclientrect_auth":"web_use_intersection_observer_for_getboundingclientrect_unauth").anyEnabled,t=Z.current;if(e){let e=new IntersectionObserver(([a])=>{let n=-(a.boundingClientRect.x??0);Math.abs(t-n)>=10&&O({component:i,event_type:"right"==(t<n?"right":"left")?9315:9316,view_type:C,view_parameter:F}),Z.current=n,K.current&&e.unobserve(K.current)});K.current&&e.observe(K.current)}else{let e=-(K.current?.getBoundingClientRect().x??0);Math.abs(t-e)>=10&&O({component:i,event_type:"right"==(t<e?"right":"left")?9315:9316,view_type:C,view_parameter:F}),Z.current=e}};return k&&e.addEventListener("touchend",t),()=>{k&&e.removeEventListener("touchend",t)}}),R>1||R<0)throw Error("widthRatio should be between 0 and 1 inclusive");let U=Math.floor(A*R),B=a.Children.toArray(t),G=B.length*U,$=x.current?.clientWidth||G,V=j?.justifyContent??($>G?"center":"start");return(0,h.jsx)("div",{className:"BoardMoreIdeasRep"===I?"moreIdeasBoardRepCarousel":"",children:(0,h.jsxs)(n.xu,{alignItems:"center","data-test-id":"carousel-pin",display:"flex",justifyContent:V,overflow:"hidden",width:k?"100vw":void 0,children:[E&&(0,h.jsx)(m,{index:T,length:B.length,showBadge:D}),"BoardMoreIdeasRep"!==I&&(0,h.jsx)(r.P,{pinKey:null!=L?{type:"deprecated",data:L}:null,children:e=>(0,h.jsx)(o.Z,{carouselData:e&&{...e,type:"canonical"},contextLogData:v,impressionType:"Pin",loggingId:P,slotIndex:T,trackCarousel:!0,viewParameter:F??72,viewType:C??1,children:(0,h.jsx)(n.xu,{height:w??M.current?.clientHeight??1,overflow:"hidden",position:"absolute",width:A})},`carousel-impression-key-${T}`)}),k&&(0,h.jsx)(d.Z,{unsafeCSS:f}),(0,h.jsx)("div",{ref:N,className:"horizontal-scroll-container",style:{overflowX:k?"scroll":"visible",paddingLeft:k?`${s.yt}px`:void 0,paddingRight:k?`${s.yt}px`:void 0,display:"flex",flexDirection:"row",position:"relative",scrollbarWidth:0,transition:k||b?void 0:"left .3s",left:!k&&(0,_.CU)({slotWidth:U,gap:S,numberOfSlides:B.length,index:T,containerWidth:$})},children:B.map((e,t)=>{let a=t===B.length-1,r=Math.ceil(S/4),l=0;r>=-12&&r<=12&&(l=r);let s=(0,h.jsx)(n.xu,{ref:e=>{M.current=e,0===t&&(K.current=e)},"data-carousel-indicator":"carousel-card","data-test-id":`carousel-img-${t}`,height:w??void 0,marginEnd:a?0:l,width:U,children:e},`carousel-slot-${P}-${t}`);if("BoardMoreIdeasRep"===I){let a=e.props,n={total_object_count:a?.story.objects.length,storyType:a?.story.story_type,boardIdStr:a?.item.board_id,slotIndex:a?.slotIndex,story_id:a?.story.id};return(0,h.jsx)(o.Z,{componentType:i,contextLogData:n,impressionAuxFields:n,impressionType:I??"Pin",loggingId:P,slotIndex:t,viewParameter:F??72,viewType:C??1,children:s},`carousel-slot-${P}-${t}`)}return s})})]})})}},356725:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>_});var a,n,r=i(702664);i(167912);var l=i(883119),s=i(729884),o=i(916117),d=i(357998),c=i(966676),u=i(721782),p=i(447948),h=i(350118),m=i(785893);let g=void 0!==a?a:a=i(603239);function _({carouselData:e,carouselIndex:t,componentType:a,contextLogData:_,handleCarouselSwipe:y,isCloseup:f,isEditMode:x,pinKey:v,viewParameter:b,viewType:S,variant:w}){let P;let I=(0,h.S6)();if(null==v||"graphqlRef"===v.type)P=v;else{let e=v.data;if("string"==typeof e){let t=I(e);P=null!=t?{type:"deprecated",data:t}:null}else P={type:"deprecated",data:e}}let T=(0,o.Z)(g,P),{childDataKey__DEPRECATED:k}=(0,d.Q)(void 0!==n?n:n=i(822423),T,{useLegacyAdapter:e=>({})}),E=(0,u.Z)(k,"CarouselEllipsis"),j=(0,s.Z)(k),A=e||j&&{carouselSlots:j.carouselSlots.map(({slotId:e,title:t})=>({id:e,title:t})),entityId:j.carouselId??"",index:j.index},C=(0,r.useDispatch)();if(!A)return null;let F=(e,t,i)=>{x||void 0===p.yR||(e.preventDefault(),e.stopPropagation(),C((0,p.yR)(T?.entityId??"",i))),void 0!==y&&y(i),E({pinId:T?.entityId??"",currentIndex:t??0,nextIndex:i,carouselData:{carouselSlots:A.carouselSlots?.map(e=>({id:e.id})),entityId:A.entityId},viewParameter:b,viewType:S,componentType:a,contextLogData:_,isEditMode:x})},{carouselSlots:R,index:D}=A,O="number"==typeof t?t:D,L="default"===w,M=L?"white":"#555",N=L?"rgba(255, 255, 255, 0.5)":"lightGray";return(0,m.jsx)(c.ZP.Consumer,{children:({viewportSize:e})=>"sm"===e?null:(0,m.jsx)(l.xu,{alignItems:"center","data-test-id":"carousel-ellipsis",display:"flex",justifyContent:f?"end":"center",paddingY:x?1:0,children:R&&[...Array(R.length??0).keys()].map(e=>(0,m.jsx)(l.xu,{paddingX:1,children:(0,m.jsx)(l.iP,{accessibilityLabel:(R[e]||{}).title??"",fullWidth:!1,onTap:({event:t})=>F(t,O,e),rounding:"circle",children:(0,m.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:e===O?M:N}},"data-test-id":"ellipsis-size",height:8,rounding:"circle",width:8})})},(T?.entityId??"")+e))})})}},239062:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>x});var a,n,r=i(702664);i(167912);var l=i(883119),s=i(729884),o=i(916117),d=i(357998),c=i(898781),u=i(356725),p=i(721782),h=i(447948),m=i(350118),g=i(785893);let _={cursor:"pointer",padding:"30px 16px",position:"relative",zIndex:1},y=(e,t,i,a,n,r)=>{r||void 0===a||(e.preventDefault(),e.stopPropagation(),a(t,i)),void 0!==n&&n(i)},f=void 0!==a?a:a=i(717246);function x({addEllipsis:e,alwaysShowNavigationArrows:t,carouselIndex:a,carouselData:x,ellipsisVariant:v,handleCarouselSwipe:b,isShowingLastSlide:S,pinKey:w,contextLogData:P,viewParameter:I,viewType:T,componentType:k,isEditMode:E,itemsPerPage:j,forwardNode:A,backNode:C,sliderStyleOverride:F,hideNavigationArrows:R}){let D;let O=(0,c.ZP)(),L=(0,r.useDispatch)(),M=(0,m.S6)();if(null==w||"graphqlRef"===w.type)D=w;else{let e=M(w.data);D=null==e?null:{type:"deprecated",data:e}}let N=(0,o.Z)(f,D),{childDataKey__DEPRECATED:Z}=(0,d.Q)(void 0!==n?n:n=i(671704),N,{useLegacyAdapter:e=>({})}),K=(0,p.Z)(Z,"CarouselSliders"),z=(0,s.Z)(Z),H=x||z&&{carouselSlots:z.carouselSlots.map(({slotId:e,title:t})=>({id:e,title:t})),entityId:z.carouselId??"",index:z.index};if(!H)return null;let U=(e,t)=>L((0,h.yR)(e,t)),{carouselSlots:B,index:G}=H,$=void 0!==a?a:G??0,V=Math.max(0,$-(j??1)),W=Math.min((B??[]).length-1,$+(j??1)),Y=0===$,q=S||$===(B??[]).length-1,X=(e,t)=>{y(e,N?.entityId??"",t,U,b,E),K({pinId:N?.entityId??"",currentIndex:$,nextIndex:t,carouselData:{carouselSlots:B?.map(({id:e})=>({id:e})),entityId:H.entityId},viewParameter:I,viewType:T,componentType:k,contextLogData:P,isEditMode:E,isEligibleForPdp:N?.isEligibleForPdp??!1})},Q=C||(0,g.jsx)(l.JO,{accessibilityLabel:O.bt("View previous", "View Previous", "Button to advance carousel to the previous image", undefined, true),color:"inverse",icon:"arrow-back"}),J=R?null:A||(0,g.jsx)(l.JO,{accessibilityLabel:O.bt("View next", "View Next", "Button to advance carousel to the next image", undefined, true),color:"inverse",icon:"arrow-forward"});return(0,g.jsxs)(l.xu,{alignItems:"center",bottom:!0,display:"flex",justifyContent:R?"center":"between",left:!0,position:"absolute",right:!0,top:!0,children:[!R&&(0,g.jsx)("div",{"data-test-id":"carousel-slider-left",onClick:e=>{X(e,V)},onKeyUp:e=>{X(e,V)},role:"presentation",style:{..._,...F,pointerEvents:Y?"none":"auto"},children:(0,g.jsx)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{visibility:Y&&!t?"hidden":"visible",opacity:Y&&t?"50%":"100%"}},display:"flex",height:"100%",justifyContent:"center",width:"100%",children:Q})}),e&&(0,g.jsx)(u.default,{carouselData:{carouselSlots:H.carouselSlots?.map(({id:e,title:t})=>({id:e,title:t})),entityId:H.entityId,index:H.index},carouselIndex:a,componentType:k,handleCarouselSwipe:b,pinKey:Z,variant:v||"default",viewParameter:I,viewType:T}),!R&&(0,g.jsx)("div",{"data-test-id":"carousel-slider-right",onClick:e=>{X(e,W)},onKeyUp:e=>{X(e,W)},role:"presentation",style:{..._,...F,pointerEvents:q?"none":"auto"},children:(0,g.jsx)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{visibility:q&&!t?"hidden":"visible",opacity:q&&t?"50%":"100%"}},display:"flex",height:"100%",justifyContent:"center",width:"100%",children:J})})]})}},751191:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var a=i(667294),n=i(883119),r=i(898781),l=i(785893);let s=({iconType:e,showFab:t,backgroundColor:i,hoverColor:s,iconColor:o,size:d})=>{let c=(0,r.ZP)(),[u,p]=(0,a.useState)(!1);return(0,l.jsx)(n.zd,{rounding:6,children:(0,l.jsx)(n.xu,{"data-test-id":"navigation-fab-container",onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),opacity:u?1:.8,rounding:"circle",children:(0,l.jsx)(n.xu,{alignItems:"center",color:u?s:i,dangerouslySetInlineStyle:{__style:{transition:"opacity 0.3s linear"}},"data-test-id":"navigation-fab",display:"flex",height:d||48,justifyContent:"center",opacity:t?1:0,width:d||48,children:"forward"===e?(0,l.jsx)(n.JO,{accessibilityLabel:c.bt("View next", "View Next", "Button to advance carousel to the next image", undefined, true),color:o,icon:"arrow-forward"}):(0,l.jsx)(n.JO,{accessibilityLabel:c.bt("View previous", "View Previous", "Button to advance carousel to the previous image", undefined, true),color:o,icon:"arrow-back"})})})})}},721782:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d}),i(167912);var a,n=i(407043),r=i(916117),l=i(999018),s=i(67347);let o=void 0!==a?a:a=i(270643);function d(e,t){let{logContextEvent:i}=(0,n.v)(),a=(0,r.Z)(o,e);null!=e&&"deprecated"===e.type&&e.data&&"pin"!==e.data.type&&(0,s.nP)("web.graphql.debug.useLogSwipeError",{sampleRate:1,tags:{parent:t,rootType:e.data.type}});let d=(0,l.Z)(a);return function({pinId:e,currentIndex:t,nextIndex:a,carouselData:n,viewParameter:r,viewType:l,componentType:s,contextLogData:o,isEditMode:c,isEligibleForPdp:u}){if(!c){let{carouselSlots:c,entityId:p}=n;i({event_type:108,object_id_str:e,component:s,view_type:l,view_parameter:r,event_data:{pinCarouselSlotEventData:{carouselSlotId:c?.[t]&&Number(c[t].id),carouselDataId:Number(p),carouselSlotIndex:t,toCarouselSlotIndex:a}},aux_data:{...o,...d({isPdpPlus:u})}})}}}},998651:(e,t,i)=>{"use strict";i.d(t,{L:()=>o,r:()=>s});var a=i(385740),n=i(595371),r=i(909499);let l=["search_articles_story","search_for_you_upsell","search_story_separator","search_story_landing_page_header","shop_tab_upsell","story_pins_search_upsell","structured_search_bubble","user_style_story_v2","guided_search_entry_points_story"];function s({query:e,rs:t,scope:i},l){let s=(0,a.BE)(),o=!s?.viewType&&!s?.viewParameter,d=(0,r.wF)(i);if(!o&&d){let{viewType:i,viewParameter:a}=s??{};l({event_type:d,view_type:i,view_parameter:a,aux_data:{query:e,rs:t||n.i.UNKNOWN}})}t===n.i.HASHTAG_CLOSEUP?l({event_type:101,component:13065,element:10273,view_type:142}):t===n.i.HASHTAG_PINREP&&l({event_type:101,component:0,element:10349,view_type:142})}let o=(e=[])=>{let t=!0;return e.reduce((e,i)=>(t&&i.story_type&&l.includes(i.story_type)&&i.display_options?.num_columns_requested===0?e.searchFullWidthStories.push(i):(t=!1,e.filteredResults.push(i)),e),{searchFullWidthStories:[],filteredResults:[]})}},96939:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var a=i(883119),n=i(65675),r=i(785893);function l({coverImages:e,height:t,isHovered:i,onClick:l,onMouseEnter:s,onMouseLeave:o,textType:d,text:c,url:u,width:p}){let h=e&&(e["236x"]||e["280x280"]);return(0,r.jsx)(n.Z,{backgroundColor:"gray",coverImage:h,height:t,isHovered:i,onClick:l,onMouseEnter:s,onMouseLeave:o,url:u,width:p,children:(0,r.jsx)(a.xu,{alignItems:"center",display:"flex",height:t,justifyContent:"center",padding:3,position:"absolute",top:!0,width:p||"100%",children:"text"===d?(0,r.jsx)(a.xu,{alignItems:"center",display:"flex",height:48,padding:3,children:(0,r.jsx)(a.X6,{align:"center",color:"light",size:"500",children:c})}):(0,r.jsx)(a.xu,{alignItems:"center",color:"secondary",display:"flex",height:48,padding:3,rounding:"pill",children:(0,r.jsx)(a.xv,{align:"center",weight:"bold",children:c})})})})}},65675:(e,t,i)=>{"use strict";i.d(t,{A:()=>l,Z:()=>s});var a=i(667294),n=i(883119),r=i(785893);let l={bubbleOverlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},hoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.6)"},lightHoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.1)"}};function s({backgroundColor:e,children:t,coverImage:i,disableTabIndex:s,height:o,id:d,isHovered:c,onClick:u,onMouseDown:p,onMouseEnter:h,onMouseLeave:m,searchBoxRenderStopwatch:g,url:_,width:y}){let[f,x]=(0,a.useState)(!1),v=()=>{h?h():x(!0)},b=()=>{m?m():x(!1)},S=c||f,w=S?l.hoverOverlay:l.bubbleOverlay;return(0,r.jsx)(n.Tg,{href:_,onBlur:b,onFocus:v,onMouseDown:p,onMouseEnter:v,onMouseLeave:b,onTap:()=>{u?.(d)},rounding:4,tabIndex:s?-1:void 0,children:(0,r.jsx)(n.zd,{height:o,rounding:4,width:y||"100%",children:i?.url?(0,r.jsxs)(n.Ee,{alt:"",color:e,fit:"cover",naturalHeight:i.height??1,naturalWidth:i.width??1,onLoad:()=>{g?.stop()},role:"presentation",src:i.url,children:[(0,r.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:w},height:"100%",width:"100%"}),"function"==typeof t?t({isHovered:S}):t]}):(0,r.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:e}},height:"100%",width:"100%"})})})}},272984:(e,t,i)=>{"use strict";i.d(t,{Z:()=>ev});var a,n,r,l=i(167912),s=i(616550),o=i(883119),d=i(934494),c=i(898781),u=i(773285),p=i(784590),h=i(280446),m=i(667294),g=i(363957),_=i(362810),y=i(356997),f=i(916117),x=i(349700),v=i(867820),b=i(785893);let S=void 0!==a?a:a=i(405410),w=()=>{(0,v.NC)("click_best_pin_board",!0)},P=()=>{(0,v.NC)("click_best_pin_profile",!0)},I=({pin:e})=>{let{pinner:t}=e,{username:i,fullName:a}=t??{},n=t?.imageMediumUrl||t?.imageSmallUrl,r=`/${i??""}/`;return(0,b.jsx)(o.Tg,{fullWidth:!1,href:r,onTap:P,rounding:"circle",children:(0,b.jsx)(y.qE,{name:a??"",outline:!0,size:"sm",src:n??""})})},T=({pin:e})=>{let t=(0,c.ZP)(),{board:i,pinner:a}=e,{name:n,privacy:r,url:l}=i??{},s=i?.entityId||"",{username:d,fullName:u}=a??{},p=`/${d??""}/`,h=(0,b.jsx)(o.xv,{inline:!0,size:"200",weight:"bold",children:(0,b.jsx)(o.rU,{display:"inlineBlock",href:p,onClick:P,underline:"hover",children:u})},u);return"protected"===r?(0,x.nk)(t.bt("{{ pinnerName }} saved this Pin", "{{ pinnerName }} saved this Pin", "Showing who saved this pin, but not which board (private board), on closeup", undefined, true),{pinnerName:h}):(0,x.nk)(t.bt("{{ pinnerName }} saved to {{ boardName }}", "{{ pinnerName }} saved to {{ boardName }}", "Showing who saved this pin to which board on closeup", undefined, true),{pinnerName:h,boardName:(0,b.jsx)(o.xv,{inline:!0,size:"200",weight:"bold",children:(0,b.jsx)(o.rU,{href:l??"",onClick:w,children:n},"board")},s)})},k=({pinKey:e})=>{let t=(0,f.Z)(S,e);return(0,b.jsxs)(o.xu,{alignItems:"center","data-test-id":"pin-attribution",direction:"row",display:"flex",marginTop:3,children:[(0,b.jsx)(I,{pin:t}),(0,b.jsx)(o.xu,{marginEnd:2}),(0,b.jsx)(o.xv,{size:"200",children:(0,b.jsx)(T,{pin:t})})]})};var E=i(112690);function j({pageType:e,pinCreditPrefix:t,pin:i,pinLink:a,viewParameter:n}){let r=(0,c.ZP)(),l=(0,E.Z)();if("topic"!==e.page&&(!i.domain||"Uploaded by user"===i.domain))return null;let s="topic"!==e.page||e.isAuth?"100":"200",d="topic"===e.page&&!!i.nativeCreator,u=d?i.nativeCreator?.fullName:i.domain;return(0,b.jsx)(o.xu,{display:"flex",flex:"none",justifyContent:"start",marginBottom:2,children:(0,b.jsx)(o.rU,{display:"inlineBlock",href:d?`/${i.nativeCreator?.username||""}/`:a,onClick:()=>{"topic"===e.page?(0,v.NC)("click_topic_best_pin_link"):l({event_type:12,view_type:3,object_id_str:i.entityId,component:85,view_parameter:n})},rel:"nofollow",target:"blank",underline:"hover",children:(0,b.jsx)(o.xv,{size:s,children:(0,x.nk)(r.bt("{{ pinCreditPrefix }} {{ pinCredit }}", "{{ pinCreditPrefix }} {{ pinCredit }}", "Tells the user where the pin is from in the form of \"Saved from <website>\"", undefined, true),{pinCreditPrefix:t,pinCredit:(0,b.jsx)(o.xv,{inline:!0,size:s,weight:"bold",children:(e.page,u)},d?"creatorProfile":"pinLinkDomain")})})})})}var A=i(782534),C=i(694379),F=i(248975),R=i(153209),D=i(992750),O=i(269051),L=i(53199),M=i(692627),N=i(220306),Z=i(910164),K=i(780280);let z=void 0!==n?n:n=i(327620),H=e=>{let t=null;e.lastRepinDate&&(t=new Date(e.lastRepinDate));let i=null;return(e.createdAt&&(i=new Date(e.createdAt)),t)?i?t>i?t:i:t:i},U=e=>{let t="";if(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished)return t;let i=H(e);if(i&&i.getFullYear()===new Date().getFullYear()){let a=new Set(["film_music_books","art","home_decor","food_drink","womens_fashion","travel","weddings","hair_beauty","holidays_events","mens_fashion","products","celebrities","technology"]),{category:n}=e;a.has(n)&&(t=i?(0,b.jsx)(A.Z,{dateFormatType:A.k.LONG_MONTH_YEAR,useUTC:!1,value:i}):"")}return t},B=e=>!!(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished),G=(e,t)=>{let i=new Date((e.richMetadata??{}).article?.datePublished??Date.now()),a=i.getTime(),n=new Date().getTime();return null==t||n-a<=31536e6*t?(0,b.jsx)(A.Z,{dateFormatType:A.k.LONG_MONTH_YEAR,useUTC:!1,value:i}):""};function $(e){let{pinKey:t,viewportSize:i,pageType:a}=e,n=(0,f.Z)(z,t),{pinCreditPrefix:r,pinLink:l}=(0,O.Z)(n),s=(0,L.Z)(n),{description:d}=(0,D.eK)({richMetadataDescription:n.richMetadata?.description,richSummaryDisplayName:n.richSummary?.displayName,closeupUnifiedDescription:n.closeupUnifiedDescription});"videos_category"===a.page&&(d=(0,D.kt)(d,n.nativeCreator?.username||""));let c="wide"===i,u=(0,D.Ly)({pinTitle:n.title,gridTitle:n.gridTitle,richSummaryDisplayName:n.richSummary?.displayName??"",richMetadataTitle:n.richMetadata?.title??"",storyPinDataId:n.storyPinDataId,storyPinDataMetadataPinTitle:n.storyPinData?.metadata?.pinTitle,pinJoinVisualAnnotation:n.pinJoin?.visualAnnotation});(n.gridTitle||"").trim()&&u!==n.gridTitle&&(u=(0,D.EU)(n.gridTitle,200));let p=(0,R.r)(n.richMetadata?.recipe?.name,!!n.richMetadata?.recipe?.categorizedIngredients,n.richMetadata?.recipe?.fromAggregatedData??!1)?n.richMetadata?.recipe:null,h=B(n)&&G(n,2),m=U(n)||h,{isBot:g,isSocialBot:_}=(0,K.B)();return(0,b.jsx)(o.xu,{alignContent:"between","data-test-id":"UnauthBestPinCardBodyContainer",direction:"column",display:"flex",flex:"grow",padding:8,position:"relative",width:"100%",children:(0,b.jsxs)(o.xu,{direction:"column",display:"flex",flex:"grow",position:"relative",children:[(0,b.jsx)(j,{pageType:a,pin:{entityId:n.entityId,domain:n.domain||"",nativeCreator:n.nativeCreator&&{fullName:n.nativeCreator.fullName,username:n.nativeCreator.username}},pinCreditPrefix:"topic"===a.page&&n.nativeCreator?"Created by":r,pinLink:l??"",viewParameter:(0,M.Z)({hasPin:!0,hasPinRichMetadata:!!n.richMetadata,hasPinRichMetadataProducts:!!n.richMetadata?.products,hasPinRichMetadataArticle:!!n.richMetadata?.article,hasPinRichMetadataRecipe:!!n.richMetadata?.recipe,hasPinStoryPinData:!!n.storyPinData})}),(0,b.jsx)(o.kC,{direction:"row",justifyContent:"between",children:(0,b.jsx)(o.xu,{display:"flex",marginEnd:c?0:3,marginTop:c?3:0,overflow:"hidden",children:u&&(0,b.jsx)("h2",{"data-test-id":"UnauthBestPinCardTitle",style:{fontWeight:"600",fontSize:"28px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:u})})}),m?(0,b.jsx)(o.xu,{marginTop:1,children:(0,b.jsx)(o.xv,{color:"subtle",children:m})}):null,d&&(0,b.jsx)(o.xu,{display:"flex",marginTop:3,overflow:"hidden",children:(0,b.jsxs)("h3",{style:{fontWeight:"normal",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",fontSize:"14px"},children:[p&&(0,b.jsx)(Z.Z,{recipeKey:p}),d]})}),p&&(0,b.jsx)(N.Z,{marginOverrides:p?{outerMarginTop:32,ingredientMarginBottom:4}:null,recipeProps:{recipe:{categorizedIngredients:p.categorizedIngredients,name:p.name,image:(0,F.Z)({imagesUrls:s,embedSrc:n.embed?.src,embedType:n.embed?.type,excludeOriginals:!g&&!_})}}}),(0,b.jsxs)(o.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginTop:2,children:[(0,b.jsx)(k,{pinKey:n}),(0,b.jsx)(o.kC,{alignItems:"stretch",justifyContent:"end",children:!n.repinCount||n.repinCount<1?null:(0,b.jsxs)(o.kC,{alignItems:"center",justifyContent:"start",children:[(0,b.jsx)(o.JO,{accessibilityLabel:"Pin",color:"subtle",icon:"pin",size:12}),(0,b.jsx)(o.xv,{color:"default",inline:!0,size:"100",children:(0,b.jsx)(C.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:n.repinCount})})]})})]})]})})}var V=i(485019),W=i(352870),Y=i(53987),q=i(223008),X=i(430323),Q=i(501338),J=i(826067),ee=i(829407),et=i(975540),ei=i(599611),ea=i(94047),en=i(297852),er=i(8742),el=i(404508),es=i(284367);let eo=0,ed="";function ec(e){let{images:t,image_signature:i}=e,a=t?.["564x"]&&t.orig,{url:n}=a??{},{width:r=1,height:l}=a??{};return"number"==typeof r&&"number"==typeof l&&r>564&&(l*=564/r,r=564),{width:r,height:l,url:n,imageSignature:i}}let eu=({data:e,index:t,viewParameter:i,productsURL:a})=>{switch(e.type){case"pin":return(0,b.jsx)(er.ZP,{duploQueryRef:null,pinId:e.id,slotIndex:t,viewParameter:i,viewType:72});case"story":return a&&(0,b.jsx)(_.Z,{dangerouslySetActionUrl:a,slotIndex:t,story:e});default:return null}},ep=({resourceOptions:e})=>{let t=(0,c.ZP)(),{data:i,isAtEnd:a,isFetching:n,fetchMore:r}=(0,p.Z)({name:"VisualLiveSearchResource",options:e}),l=(0,s.TH)(),d=`${l.pathname}products/${l.search}`;return(0,b.jsxs)(m.Fragment,{children:[i&&(0,b.jsx)(es.Z,{customLayoutType:"desktopFlashlight",feedItems:i.results||[],feedKey:"flashlight-dweb-unauth",pagination:{loadNext:r,hasNext:a,isLoadingNext:n,refetch:()=>void 0},renderFeedItem:(e,t)=>eu({data:e,index:t,viewParameter:3050,productsURL:d})}),(0,b.jsx)(o.$j,{accessibilityLabel:t.bt("Loading visual search results...", "Loading visual search results...", "unauthDesktopVisualSearch.flashlightFeed.loading", undefined, true),show:n})]})},eh=({resourceOptions:e})=>{let t=(0,c.ZP)(),{data:i,isAtEnd:a,isFetching:n,fetchMore:r}=(0,p.Z)({name:"VisualLiveSearchProductFeedResource",options:e});return(0,b.jsxs)(m.Fragment,{children:[i&&(0,b.jsx)(es.Z,{customLayoutType:"desktopFlashlight",feedItems:i||[],feedKey:"flashlight-products-dweb-unauth",pagination:{loadNext:r,hasNext:a,isLoadingNext:n,refetch:()=>void 0},renderFeedItem:(e,t)=>eu({data:e,index:t,viewParameter:3334})}),(0,b.jsx)(o.$j,{accessibilityLabel:t.bt("Loading visual search product results...", "Loading visual search product results...", "unauthDesktopVisualSearch.flashlightProductFeed.loading", undefined, true),show:n})]})};function em({pinResponse:e}){let t=(0,c.ZP)(),{isRTL:i}=(0,K.B)(),a=(0,E.Z)(),n=(0,s.k6)(),r=(0,s.TH)(),l=(0,s.$B)(),d=(0,m.useRef)(),{pin:u,isLoaded:p}=e,{pinId:_}=(0,h.Z)(l.params.id||""),y=(0,J.mB)(r.search),f=(0,g.Z)(r),x=function(e){let t=parseInt(e,10);switch(t){case 1:case 2:case 3:case 4:case 5:case 6:return t;default:return}}(y.cropSource),S=(0,Y.hd)(r),{getNormalizedPinImage:w}=(0,q.Z)({pinKey:null!=u?{type:"deprecated",data:u}:null});if((0,m.useEffect)(()=>{if(!f&&u){let{width:e,height:t}=w(),i=(0,en.Z)({cropArea:{h:t-2*V.S,w:e-2*V.S,x:V.S,y:V.S},isProductPage:S,pinId:_,surfaceType:"flashlight"});n.replace(i)}},[w,n,f,S,u,_]),(0,ee.Z)(()=>{a({event_type:13,view_type:72,view_parameter:3050,view_data:{pin_id:_}}),(0,v.My)("unauth.flashlight_page")}),(0,m.useEffect)(()=>{let e=d.current;return e&&ed===_&&(e.scrollTop=eo),()=>{e&&(eo=e.scrollTop,ed=_)}}),!p)return(0,b.jsx)(X.Z,{objectId:"",view:72,children:(0,b.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{top:Q.Pw}},position:"relative",children:(0,b.jsx)(o.$j,{accessibilityLabel:t.bt("Loading visual search...", "Loading visual search...", "Accessibility label for loading visual search page", undefined, true),show:!0})})});if(!u)return null;let{image_signature:P,description:I}=u,{width:T,height:k,url:j}=ec(u),A=function({initialCropArea:e,pin:t}){let i;if(e)i={...e};else{let{visual_objects:e}=t,{width:a=1,height:n=1}=ec(t);if(e&&e.length){let{x:t,y:r,w:l,h:s}=e[0];i=(0,ei.Z)({cropArea:{x:t,y:r,w:l,h:s},scaledWidth:a,scaledHeight:n})}else{let[e,t]=[a/6,n/6],[r,l]=[a-2*e,n-2*t];i={x:e,y:t,w:r,h:l}}}return{x:Math.floor(i.x??0),y:Math.floor(i.y??0),w:Math.floor(i.w??0),h:Math.floor(i.h??0)}}({initialCropArea:f,pin:u}),C=r.state&&r.state.internalNavigation,F=T+20,R=(F??1)+24,D={pin_id:_,image_signature:P,crop:(0,et.Z)({cropArea:A,scaledWidth:T,scaledHeight:k}),crop_source:x||5},O={__style:{top:140}};return(0,b.jsx)(X.Z,{objectId:"",view:72,children:(0,b.jsxs)(m.Fragment,{children:[(0,b.jsxs)(o.xu,{alignItems:"center",color:"light",dangerouslySetInlineStyle:{__style:{top:80}},display:"flex",height:60,position:"fixed",width:"100%",zIndex:new o.Ry(4),children:[(0,b.jsx)(o.xu,{left:!0,position:"absolute",children:(0,b.jsx)(el.Z,{})}),(0,b.jsx)(o.xu,{flex:"grow",children:(0,b.jsx)(o.X6,{align:"center",size:"400",children:S?t.bt("Shop for similar items", "Shop similar items", "unauthDesktopFlashlightPage.flashlightProductsFeed.header", undefined, true):t.bt("Visually similar results", "Visually similar results", "unauthDesktopFlashlightPage.flashlightFeed.header", undefined, true)})})]}),S?(0,b.jsx)(o.xu,{dangerouslySetInlineStyle:O,position:"relative",children:(0,b.jsx)(eh,{resourceOptions:D})}):(0,b.jsxs)(o.xu,{display:"flex",paddingX:12,children:[(0,b.jsxs)(o.xu,{ref:d,dangerouslySetInlineStyle:O,height:"calc(100% - 140px)",marginEnd:3,marginStart:3,overflow:"auto",position:"fixed",width:F,zIndex:new o.Ry(4),children:[(0,b.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{width:T,height:k}},"data-test-id":"flashlight-enabled-image",children:(0,b.jsxs)(o.zd,{height:k,rounding:2,width:T,children:[(0,b.jsx)(o.Ee,{alt:I??"",naturalHeight:k??1,naturalWidth:T??1,src:j??""}),(0,b.jsx)(W.Z,{customCropper:function({origCrop:e,cropSource:t}){let i=window.location.pathname+window.location.search,a=(0,en.Z)({cropArea:e,cropSource:t??6,isProductPage:S,pinId:_,surfaceType:"flashlight"});(0,v.My)("unauth.flashlight_page.cropper_changed"),a!==i&&_&&n.replace({pathname:`/pin/${_}/visual-search/`,search:(0,ea.Z)({cropArea:e,cropSource:t??6,surfaceType:"flashlight"}),state:{internalNavigation:!0}})},imageSignature:P,imageSize:{h:k,w:T},initialCropArea:A,pinKey:{type:"deprecated",data:u},showAnimation:!C,viewParameter:3050,viewType:72})]})}),(0,b.jsx)(o.xu,{"data-test-id":"closeupDescription",direction:"column",display:"flex",margin:5,maxWidth:T??1,position:"relative",children:(0,b.jsx)($,{pageType:{isAuth:!1,page:"flashlight"},pinKey:{type:"deprecated",data:u},viewportSize:"narrow"})})]}),(0,b.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{...O.__style,...i?{marginRight:`${R}px`}:{marginLeft:`${R}px`}}},position:"relative",width:"100%",children:(0,b.jsx)(ep,{resourceOptions:D})})]})]})})}let eg=void 0!==r?r:r=i(676684);function e_(e){return e?.map(e=>{var t,i;return{name:e.name??"",offer_summary:{in_stock:e.offerSummary?.inStock??!1},additional_images:function(e){let t=[];return e.forEach(({additionalImagesSpec:e,spec:i})=>{t.push(...function({additionalImagesSpec:e,spec:t}){return e?.map(e=>({canonical_images:{[t]:{height:e.canonicalImage?.height??0,url:e.canonicalImage?.url??"",width:e.canonicalImage?.width??0}},image_signature:e.imageSignature??""}))}({additionalImagesSpec:e,spec:i})??[])}),t}([{additionalImagesSpec:e.additionalImageOrig,spec:"orig"},{additionalImagesSpec:e.additionalImage736x,spec:"736x"},{additionalImagesSpec:e.additionalImage564x,spec:"564x"},{additionalImagesSpec:e.additionalImage474x,spec:"474x"},{additionalImagesSpec:e.additionalImage236x,spec:"236x"}])??[],variant_set:(t=e.variantSet,{variants:(i=t?.variants,i?.map(e=>{var t;return{additional_images:(t=e.additionalImages,t?.map(e=>({canonical_images:e.canonicalImages??{},image_signature:e.imageSignature??""}))??[])}})??[])}??{})}})}function ey(e){return{username:e?.username??"",full_name:e?.fullName??"",image_medium_url:e?.imageMediumUrl,image_small_url:e?.imageSmallUrl}}function ef(e){return{id:e?.entityId??"",username:e?.username??"",full_name:e?.fullName??"",image_medium_url:e?.imageMediumUrl,image_small_url:e?.imageSmallUrl,type:"user"}}let ex=(0,d.Z)({useGraphQLAdapter:function({pinId:e}){var t,i,a,n,r,s,o;let d=(0,l.useLazyLoadQuery)(eg,{pinId:e}),c=d.v3GetPinQuery?.data;if(!c)return null;let u={id:c.entityId??"",is_eligible_for_related_products:c.isEligibleForRelatedProducts??!1,description:c.description??"",image_signature:c.imageSignature??"",images:function(e){let t={};return e.forEach(e=>{let{image:i,spec:a}=e;i&&(t[a]={width:i.width??0,url:i.url??"",type:i.type??"",height:i.height??0,dominant_color:i.dominantColor??""})}),t}([{image:c.imageOrig,spec:"orig"},{image:c.image736x,spec:"736x"},{image:c.image564x,spec:"564x"},{image:c.image474x,spec:"474x"},{image:c.image236x,spec:"236x"}])??{},rich_metadata:(t=c.richMetadata,{products:e_(t?.products)??[],description:t?.description??"",title:t?.title??"",recipe:(i=t?.recipe,{name:i?.name??"",from_aggregated_data:i?.fromAggregatedData??!1,categorized_ingredients:i?.categorizedIngredients?.map(e=>({category:e.category??""}))}??{}),article:{date_published:t?.article?.datePublished??""},tutorial:{id:t?.tutorial?.name??"",type:"makecardtutorialmetadata"}}),rich_summary:(a=c.richSummary,{products:e_(a?.products)??[],display_name:a?.displayName??""}),visual_objects:(n=c.visualObjects,n?.map(e=>({detection:e.detection??!1,h:e.h??0,index:e.index??0,is_stela:e.isStela??!1,label:e.label??"",label_id:null==e.labelId?e.labelId:Number(e.labelId),label_x:e.labelX??0,label_y:e.labelY??0,max_annotation_num_documents:e.maxAnnotationNumDocuments??0,score:e.score??0,show_on_closeup:e.showOnCloseup??!1,w:e.x??0,x:e.w??0,y:e.y??0}))??[]),closeup_unified_description:c.closeupUnifiedDescription,grid_title:c.gridTitle??"",story_pin_data_id:c.storyPinDataId,repin_count:c.repinCount??0,tracked_link:c.trackedLink,link:c.link,domain:c.domain??"",closeup_attribution:ey(c.closeupAttribution),link_domain:{official_user:ey(c.linkDomain?.officialUser)},native_creator:ef(c.nativeCreator),pinner:ef(c.pinner),origin_pinner:ef(c.originPinner),board:(r=c.board,{id:r?.entityId??"",image_thumbnail_url:r?.imageThumbnailUrl??"",name:r?.name??"",privacy:"protected"===(s=r?.privacy)||"public"===s||"secret"===s?s:"secret",url:r?.url??"",type:"board"}),pin_join:{annotations_with_links_array:(o=c.pinJoin?.annotationsWithLinksArray,o?.map(e=>({name:e.name,url:e.url}))??[]),visual_annotation:c.pinJoin?.visualAnnotation??[]},story_pin_data:{metadata:{pin_title:c.storyPinData?.metadata?.pinTitle}},type:"pin"};return{pin:u,isLoaded:!0}},useLegacyAdapter:function({pinId:e}){let{data:t,isLoaded:i}=(0,p.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0}});return{pin:t,isLoaded:i}}});function ev(){let{checkExperiment:e}=(0,u.F)(),t=(0,c.ZP)(),i=(0,s.$B)(),{pinId:a}=(0,h.Z)(i.params.id||"");return(0,b.jsx)(ex,{input:e("unauth_dweb_graphql_flashlight_pinResource").anyEnabled?{enabled:!0,data:{pinId:a},suspense:{fallback:(0,b.jsx)(o.$j,{accessibilityLabel:t.bt("Loading Pin data", "Loading Pin data", "unauthDesktopFlashlightPage.loadingPinData", undefined, true),show:!0})}}:{enabled:!1,data:{pinId:a}},children:({data:e})=>!!e&&(0,b.jsx)(em,{pinResponse:e})})}},245376:(e,t,i)=>{"use strict";function a(e){return e&&5!==e?4===e?"stela":null:"related_products"}i.d(t,{Z:()=>a})},691720:(e,t,i)=>{"use strict";i.d(t,{D5:()=>s,Hg:()=>n,T_:()=>l,g6:()=>r,w6:()=>a});let a=(e,t)=>Array.from({length:t-e},(t,i)=>i+e),n=508,r=600;function l(e,t){if(!t.startsWith("en"))return e;let i=e.split(" ").map(e=>{let t=e===e.toUpperCase();return t?e:e.toLowerCase()});return i.join(" ")}let s=()=>{let e=new URL(window.location.href),t=e.hostname.replace("www.",""),i=e.pathname;return`${t}${i=i.replace(/\/\d+\//,"/").replace(/\/$/,"")}`}},594379:(e,t,i)=>{"use strict";i.d(t,{ZP:()=>es,Bi:()=>en,gv:()=>er});var a,n,r,l=i(167912),s=i(616550),o=i(883119),d=i(934494),c=i(898781),u=i(773285),p=i(418614),h=i(280446),m=i(667294),g=i(363957),_=i(862670),y=i(865686),f=i(288562),x=i(407043),v=i(485019),b=i(352870),S=i(916117),w=i(223008),P=i(42447),I=i(276602),T=i(780280),k=i(483205),E=i(430323),j=i(826067),A=i(829407),C=i(975540),F=i(297852),R=i(873476),D=i(724617),O=i(444445),L=i(317254),M=i(784590),N=i(8742),Z=i(785893);let K=({data:e,itemIdx:t})=>(0,Z.jsx)(N.ZP,{authDesktopSurface:"RelatedProductsFeed",duploQueryRef:null,pin:e,pinId:e.id,slotIndex:t,viewParameter:3334,viewType:72});function z({resourceOptions:e}){let t=(0,c.ZP)(),i=(0,M.Z)({name:"VisualLiveSearchProductFeedResource",options:e}),{data:a,isAtEnd:n,isLoaded:r,isFetching:l,fetchMore:s}=i,d=(0,m.useRef)(null);if(!r)return(0,Z.jsx)(o.kC,{alignItems:"stretch",alignSelf:"center",justifyContent:"center",children:(0,Z.jsx)(o.$j,{accessibilityLabel:t.bt("Loading related products", "Loading related products", "Label for loading spinner", undefined, true),show:!0})});let u=Array.isArray(a)?a:a?.results;return(0,Z.jsx)(o.xu,{ref:d,display:"flex",justifyContent:"center",maxWidth:"100%",children:u&&(0,Z.jsx)(L.Z,{isAtEndOfFeed:n,itemCount:u.length,children:(0,Z.jsx)(D.default,{columnWidth:O.yF,isFetching:l,items:u,loadItems:()=>{l||n||s()},renderItem:e=>(0,Z.jsx)(K,{...e}),scrollContainerRef:d,virtualize:!1})})})}var H=i(361259),U=i(83053),B=i(647945),G=i(362810);let $=void 0!==a?a:a=i(378605);function V({resourceOptions:e,onSearchIdChange:t,hasSimplifiedPinGridExpLoaded:i,viewParameter:a}){let n=(0,c.ZP)(),r=(0,M.Z)({name:"VisualLiveSearchResource",options:e}),{image_signature:l}=e,{data:s,isFetching:d,fetchMore:u}=r,p=s?.results,h=s?.search_identifier;return(0,m.useEffect)(()=>{h&&t(h)},[t,h]),(0,Z.jsxs)(o.xu,{children:[p&&h&&(0,Z.jsx)(o.xu,{children:(0,Z.jsx)(o.Rk,{columnWidth:O.yF,gutterWidth:O.P2,items:p,loadItems:u,minCols:1,renderItem:({data:e,itemIdx:t})=>(function({data:e,itemIdx:t}){let i=`${window.location.pathname}products/${window.location.search}`;return"story"===e.type?(0,Z.jsx)(G.Z,{dangerouslySetActionUrl:i,slotIndex:t,story:e}):"pin"===e.type?(0,Z.jsx)(N.ZP,{authDesktopSurface:"FlashlightResultGrid",auxData:{search_identifier:h,image_signature:l},duploQueryRef:null,pin:e,pinId:e.id,slotIndex:t,viewData:{search_identifier:h},viewParameter:a,viewType:72}):null})({data:e,itemIdx:t}),scrollContainer:()=>window})}),(0,Z.jsx)(o.$j,{accessibilityLabel:n.bt("Loading search results...", "Loading search results...", "FlashlightResultGrid.spinner", undefined, true),show:d||!h||!i})]})}function W(e){let{pinKey:t,onSearchIdChange:i,resourceOptions:a,viewParameter:n}=e,{hasSimplifiedPinGridExpLoaded:r}=(0,H.$)(),{checkExperiment:l}=(0,u.F)(),s=(0,S.Z)($,t),{anyEnabled:o}=l("web_flashlight_unified_feed"),{visualSearchFlashlightUnifiedResource:d}=(0,B.Z)({resourceOptions:a,setFlashlightSearchId:i});return(0,Z.jsx)(m.Fragment,{children:o?(0,Z.jsx)(U.Z,{isProductOnlyFeed:!1,pinKey:s,surfaceType:"flashlight",viewParameter:n,viewType:72,visualSearchFlashlightUnifiedResource:d}):(0,Z.jsx)(V,{hasSimplifiedPinGridExpLoaded:r,onSearchIdChange:i,resourceOptions:a,viewParameter:n})})}var Y=i(427806),q=i(697335);let X=0,Q="",J=void 0!==n?n:n=i(568189);function ee({pinKey:e}){let t=(0,c.ZP)(),i=(0,s.k6)(),a=(0,T.B)(),{logContextEvent:n}=(0,x.v)(),{checkExperiment:r}=(0,u.F)(),l=(0,I.E)(),{anyEnabled:d}=r("web_flashlight_unified_feed"),[p,D]=(0,m.useState)(""),{id:O}=(0,s.UO)(),{pinId:L}=(0,h.Z)(O||""),M=(0,S.Z)(J,e),N=M.imageSignature||"",K=(0,R.Z)(),H=(0,s.TH)(),U=(0,j.mB)(H.search),{cropSource:B}=Object.keys(U).reduce((e,t)=>({...e,[t]:parseInt(U[t],10)}),{}),G=(0,g.Z)(H),$=H.pathname.includes("/products"),{getInitialCropArea:V}=(0,_.Z)({pinKey:M}),ee=V({initialCropArea:G}),et=(0,m.useRef)();(0,m.useEffect)(()=>(et.current&&Q===L&&(et.current.scrollTop=X),()=>{et.current&&(X=et.current.scrollTop,Q=L)}));let ei=B||5,ea=$?"shopping":"flashlight",en=d&&4===ei?3462:3050,{getNormalizedPinImage:er}=(0,w.Z)({pinKey:M,maxWidth:k.RZ});(0,A.Z)(()=>{if(!G&&M){let{width:e,height:t}=er(),a=(0,F.Z)({cropArea:{h:(t??1)-2*v.S,w:(e??1)-2*v.S,x:v.S,y:v.S},pinId:L,isProductPage:$,surfaceType:"flashlight"});i.replace(a)}d||n({event_type:13,view_type:72,view_parameter:3050,view_data:{pin_id:L}})});let{width:el,height:es,url:eo}=er(),ed={pin_id:L,image_signature:N,crop:(0,C.Z)({cropArea:ee,scaledWidth:el,scaledHeight:es}),crop_source:ei,is_shopping:$,entry_source:ea,entrypoint:K},ec=H&&H.state&&H.state.internalNavigation,eu=!ec,ep=a&&a.isRTL||!1,eh=el+20,em=$?t.bt("Shop for similar items", "Shop similar items", "Header explaining results of flashlight products search", undefined, true):t.bt("More ideas", "More Ideas", "Header explaining results of flashlight search", undefined, true);return M?(0,Z.jsx)(P.Z,{constraints:["shoppingModuleRender","visualSearchMainPinImageRender"],measureGridVisuallyComplete:!0,surface:"visual_search",children:(0,Z.jsx)(E.Z,{objectId:p,view:72,children:(0,Z.jsxs)(m.Fragment,{children:[(0,Z.jsx)(Y.Z,{text:t.bt("Visual search page", "Visual Search Page", "pin.flashlight.accessibilityhiddenheading", undefined, true)}),(0,Z.jsx)(f.Z,{pinId:L,title:!d||d&&(5===ei||6===ei)?em:"",variant:"flashlight",viewParameter:en,viewType:72}),(0,Z.jsx)(q.c,{children:e=>$?(0,Z.jsxs)(o.xu,{dangerouslySetInlineStyle:{__style:{marginTop:60}},children:[(0,Z.jsx)(z,{resourceOptions:ed}),";"]}):(0,Z.jsxs)(o.xu,{display:"flex",paddingX:12,children:[(0,Z.jsx)(o.xu,{ref:et,bottom:!0,dangerouslySetInlineStyle:{__style:{width:eh,height:"inherit",top:e+60,marginBottom:10}},overflow:"auto",position:"fixed",children:(0,Z.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{width:el,height:es}},"data-test-id":"flashlight-enabled-image",children:(0,Z.jsxs)(o.zd,{height:es,rounding:4,width:el,children:[(0,Z.jsx)(o.Ee,{alt:M.description??"",naturalHeight:es,naturalWidth:el,onLoad:()=>l?.markConstraintComplete("visualSearchMainPinImageRender"),src:eo}),(0,Z.jsx)(b.Z,{imageSignature:N,imageSize:{h:es,w:el},initialCropArea:ee,pinKey:M,showAnimation:eu,viewParameter:en})]})})}),(0,Z.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:(0,y.Z)({top:60,cropperWidth:eh,isRTL:ep,isFlashlightPage:!0})},position:"relative",width:"100%",children:(0,Z.jsx)(W,{onSearchIdChange:D,pinKey:M,resourceOptions:ed,viewParameter:en})})]})})]})})}):null}let et=void 0!==r?r:r=i(490644);function ei(e){return{width:e.width??0,url:e.url??"",height:e.height??0}}function ea(e){return e?.map(e=>{var t,i;return{additional_images:function(e){let t=[];return e.forEach(({additionalImages:e,spec:i})=>{t.push(...function({additionalImages:e,spec:t}){let i=[];return e?.forEach(e=>{e.canonicalImage&&i.push({canonical_images:{[t]:ei(e.canonicalImage)},image_signature:e.imageSignature??""})}),i}({additionalImages:e,spec:i})??[])}),t}([{additionalImages:e.additionalImageOrig,spec:"orig"},{additionalImages:e.additionalImage736x,spec:"736x"},{additionalImages:e.additionalImage564x,spec:"564x"},{additionalImages:e.additionalImage474x,spec:"474x"},{additionalImages:e.additionalImage236x,spec:"236x"}])??[],variant_set:(t=e.variantSet,{variants:(i=t?.variants,i?.map(e=>{var t;return{additional_images:(t=e.additionalImages,t?.map(e=>({canonical_images:e.canonicalImages??{},image_signature:e.imageSignature??""}))??[])}})??[])}??{})}})}function en(e){var t,i,a;let{id:n}=(0,s.UO)(),{pinId:r}=(0,h.Z)(n||""),o=function({pinId:e}){return{query:et,variables:{pinId:e}}}({pinId:r}),d=(0,l.useLazyLoadQuery)(et,o.variables),c=d.v3GetPinQuery?.data;if(!c)return null;let u={id:c.entityId??"",is_eligible_for_related_products:c.isEligibleForRelatedProducts??!1,description:c.description??"",image_signature:c.imageSignature??"",visual_objects:(t=c.visualObjects,t?.map(e=>({detection:e.detection??!1,h:e.h??0,index:e.index??0,is_stela:e.isStela??!1,label:e.label??"",label_id:null==e.labelId?e.labelId:Number(e.labelId),label_x:e.labelX??0,label_y:e.labelY??0,max_annotation_num_documents:e.maxAnnotationNumDocuments??0,score:e.score??0,show_on_closeup:e.showOnCloseup??!1,title:e.title??"",w:e.x??0,x:e.w??0,y:e.y??0}))??[]),images:function(e){let t={};return e.forEach(e=>{let{image:i,spec:a}=e;i&&(t[a]=ei(i))}),t}([{image:c.imageOrig,spec:"orig"},{image:c.image736x,spec:"736x"},{image:c.image564x,spec:"564x"},{image:c.image474x,spec:"474x"},{image:c.image236x,spec:"236x"}])??{},rich_metadata:(i=c.richMetadata,{products:ea(i?.products)??[]}),rich_summary:(a=c.richSummary,{products:ea(a?.products)??[]}),type:"pin"};return u}function er(e){let{data:t,isLoaded:i}=(0,p.Z)({name:"PinResource",getOptions:({routeData:{params:{id:e}}})=>({id:e,field_set_key:"detailed",fetch_visual_search_objects:!0})});return i&&t?t:null}let el=(0,d.Z)({useGraphQLAdapter:en,useLegacyAdapter:er});function es(){let{checkExperiment:e}=(0,u.F)(),t=(0,c.ZP)();return(0,Z.jsx)(el,{input:e("auth_dweb_graphql_flashlight_pinResource").anyEnabled?{enabled:!0,data:null,suspense:{fallback:(0,Z.jsx)(o.$j,{accessibilityLabel:t.bt("Loading Pin data", "Loading Pin data", "authDesktopFlashlightPage.loadingPinData", undefined, true),show:!0})}}:{enabled:!1,data:null},children:({data:e})=>!!e&&(0,Z.jsx)(ee,{pinKey:{type:"deprecated",data:e}})})}},215425:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u});var a=i(883119),n=i(515631),r=i(934494),l=i(898781),s=i(773285),o=i(594379),d=i(785893);let c=(0,r.Z)({useGraphQLAdapter:o.Bi,useLegacyAdapter:o.gv});function u(){let{checkExperiment:e}=(0,s.F)(),t=(0,l.ZP)();return(0,d.jsx)(c,{input:e("auth_dweb_graphql_closeup_shop_pinResource").anyEnabled?{enabled:!0,data:null,suspense:{fallback:(0,d.jsx)(a.$j,{accessibilityLabel:t.bt("Loading Pin data", "Loading Pin data", "RelatedProductsPage.loadingPinData", undefined, true),show:!0})}}:{enabled:!1,data:null},children:({data:e})=>!!e&&(0,d.jsx)(n.Z,{pinKey:{type:"deprecated",data:e}})})}},23195:(e,t,i)=>{"use strict";i.d(t,{Z:()=>O});var a=i(702664),n=i(616550),r=i(558068),l=i(898781),s=i(773285),o=i(784590),d=i(501338),c=i(826067),u=i(280446),p=i(50286),h=i(19121),m=i(307603),g=i(255164),_=i(873476),y=i(883119),f=i(407043),x=i(766935),v=i(444445),b=i(313047),S=i(542554),w=i(829407),P=i(156637),I=i(743203),T=i(679031),k=i(8742),E=i(422946),j=i(404508),A=i(284367),C=i(785893);function F({fixedHeaderOverrideTop:e,handleBackClick:t,inUnifiedFeedExp:i,pageTitle:a,searchResourceOptions:n,visualSearchFlashlightUnifiedResource:r}){let{logContextEvent:l}=(0,f.v)(),s=i?40:48,o=i?void 0:-v.D6,{data:d,fetchMore:c,isAtEnd:u,isFetching:p}=r||{},h=d?.results||[],m=h.reduce((e,t)=>"pin"===t.type?[...e,t]:e,[]),g=JSON.stringify({is_product_only_feed:!0}),_={name:"VisualLiveSearchProductFeedResource",options:n};return(0,w.Z)(()=>{let e=(0,x.Z)(()=>{l({event_type:110,view_parameter:3462,view_type:427})},1e3);return i&&window.addEventListener("scroll",e),()=>{i&&window.removeEventListener("scroll",e)}}),(0,C.jsx)(P.Z,{auxData:i?{commerce_data:g}:void 0,viewParameter:3462,viewType:427,children:(0,C.jsxs)(S.default,{hasFixedHeader:!0,children:[(0,C.jsx)(b.FixedHeader,{height:i?60:void 0,overrideTop:e,children:(0,C.jsxs)(y.kC,{alignItems:"center",justifyContent:"between",children:[(0,C.jsx)(y.xu,{alignItems:"center",display:"flex",height:s,justifyContent:"center",marginStart:o,width:s,children:(0,C.jsx)(j.Z,{color:i?"darkGray":void 0,disableRedirect:!0,icon:"arrow-back",onTouch:t,size:i?"sm":void 0,viewParameter:3462,viewType:427})}),(0,C.jsx)(y.X6,{accessibilityLevel:1,size:"300",children:a}),(0,C.jsx)(y.xu,{marginEnd:o,width:s})]})}),i?(0,C.jsx)(A.Z,{feedItems:m,feedKey:(0,E.J)("VisualSearchFlashlightUnifiedResource",n)??"",pagination:{loadNext:c||(()=>void 0),hasNext:!u,isLoadingNext:p||!1,refetch:()=>void 0},renderFeedItem:(e,t)=>(0,C.jsx)(T.cn,{children:(0,C.jsx)(k.ZP,{auxData:{commerce_data:g},componentType:0,duploQueryRef:null,pinId:e.id,slotIndex:t,trackingParams:e.trackingParams||void 0,trafficSource:"shop_feed",viewParameter:3462,viewType:427})})}):(0,C.jsx)(I.ZP,{feedItemProps:{viewParameter:3462,viewType:427},feedKey:(0,E.J)(_.name,_.options)??"",resourceConfig:_,trafficSource:"shop_feed"})]})})}var R=i(350118);function D(e){let{searchResourceOptions:t}=e,i=(0,o.Z)({name:"VisualSearchFlashlightUnifiedResource",options:t});return(0,C.jsx)(F,{...e,visualSearchFlashlightUnifiedResource:i})}function O(){let{checkExperiment:e}=(0,s.F)(),t=(0,l.ZP)(),i=(0,p.ZP)(),y=(0,n.k6)(),{previous:f}=(0,r.Hv)(),x=(0,_.Z)(),v=(0,n.TH)(),{isAuth:b}=(0,h.Z)(),S=(0,n.$B)(),{pinId:w}=(0,u.Z)(S.params.id||""),{data:P}=(0,o.Z)({name:"PinResource",options:{id:w,field_set_key:"detailed",fetch_visual_search_objects:!0,is_mobile_fork:!0}}),I=(0,R.S6)()(w),T=(0,a.useSelector)(e=>e.flashlight.cropSource||5);if(!(P??I))return null;let{anyEnabled:k}=e("mweb_flashlight_unified_feed"),{cropbox_dimensions:E,crop_source:j,x:A,y:O,w:L,h:M}=(0,c.mB)(v.search),[N,Z,K,z]=E?E.replace(/\{|\}/g,"").split(","):[],H=k?(0,m.Z)({x:N,y:Z,w:K,h:z}):(0,m.Z)({x:A,y:O,w:L,h:M}),U=k?(0,g.Z)(Number(j)):T,B=k?t.bt("Shop for similar", "Shop similar", "mobileFlashlightPage.heading", undefined, true):t.bt("Shop for similar items", "Shop similar items", "mobileFlashlightPage.heading", undefined, true),G={fixedHeaderOverrideTop:(0,d.ZP)(i,b),handleBackClick:()=>{if(0===f.length){y.replace(`/pin/${w}/visual-search/`);return}y.goBack()},inUnifiedFeedExp:k,pageTitle:B,searchResourceOptions:{pin_id:w,crop:H,crop_source:U,is_shopping:!0,entry_source:"shopping",entrypoint:x}};return k?(0,C.jsx)(D,{...G}):(0,C.jsx)(F,{...G})}},35066:(e,t,i)=>{"use strict";i.d(t,{S:()=>c,w:()=>u});var a=i(667294),n=i(425288),r=i(311541),l=i(632448),s=i(785893);let o=()=>i.e(6819).then(i.bind(i,6819)),{Provider:d,useHook:c}=(0,n.Z)("MerchantStorefrontSettings");function u({children:e}){let[t,i]=(0,r.Z)(o,l.Z),n=(0,a.useMemo)(()=>({merchantStorefrontSettings:t,updateLocaleStorefrontSetting:(e,t,a)=>{i({type:"UPDATE_LOCALE_STOREFRONT_SETTING",payload:{country:e,language:t,feedProfileId:a}})},updateStorefrontLastUpdated:e=>{i({type:"UPDATE_STOREFRONT_LAST_UPDATED",payload:e})}}),[i,t]);return(0,s.jsx)(d,{value:n,children:e})}},632448:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});let a={currentViewingLocale:{country:"",language:"",feedProfileId:""},lastUpdated:0}},239682:(e,t,i)=>{"use strict";function a(e,t,i){return{privacy_filter:t?"secret":"public",sort:i||"last_pinned_to",field_set_key:"profile_grid_item",username:e}}i.d(t,{Z:()=>a})},59644:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});let a=(e,t)=>`${e}:${t||""}`},240265:(e,t,i)=>{"use strict";i.d(t,{O:()=>s,Q:()=>o});var a=i(414327),n=i(59644),r=i(956800);let l=["alphabetical","last_pinned_to","oldest","newest","group_boards_at_top","custom"],s={name:"BoardsResource",key:"boardsResource",options:({boardOrder:e,filterStories:t,mixPublicSecret:i,username:a},n)=>({privacy_filter:"all",sort:e||"last_pinned_to",field_set_key:"profile_grid_item",filter_stories:t,username:a,page_size:25,group_by:i?"mix_public_private":"visibility",include_archived:!0,redux_normalize_feed:!0,...n?{orbac_subject_id:n}:Object.freeze({})})},o=e=>l.reduce((t,i)=>{let l=[(0,r.N8)("profileBoards",(0,n.Z)(e,i))];return[!0,!1].forEach(t=>{[!0,!1].forEach(n=>{l.push((0,a.jB)(s.name,s.options({username:e,boardOrder:i,mixPublicSecret:t,filterStories:n})))})}),t.concat(l)},[])},151645:(e,t,i)=>{"use strict";function a({user:e,viewer:t}){return!!(t.isAuth&&e?.username===t.username)}i.d(t,{Z:()=>a})},390598:(e,t,i)=>{"use strict";i.d(t,{PRODUCT_GROUP_COVER_IMAGE_DIMENSIONS:()=>o,Z:()=>d});var a=i(667294),n=i(883119),r=i(407043),l=i(970023),s=i(785893);let o={HEIGHT:362,WIDTH:362};function d({productGroup:e,preferredPreviewPinSizes:t=[],coverFit:i=!1}){let d;let{logContextEvent:c}=(0,r.v)(),u=e.coverImages?.[0]&&(0,l.cB)(e.coverImages[0]),{WIDTH:p,HEIGHT:h}=o,m=(e.previewPins?.[0]||{}).images,[g,_]=(0,a.useState)(!u);m&&g&&(d=t.concat("orig").map(e=>m[e]).find(e=>!!e));let y=g?d?.height:h,f=g?d?.width:p,x=g?d?.url:u;return y&&f&&x?(0,s.jsx)(n.Ee,{alt:"",fit:i?"cover":"contain",naturalHeight:y,naturalWidth:f,onError:()=>{g||(c({event_type:10048,component:14004,aux_data:{product_group_cover_image_url:u}}),_(!0))},src:x}):null}},970023:(e,t,i)=>{"use strict";i.d(t,{yh:()=>a,QE:()=>n,cB:()=>r}),i(214494),i(186656);let a="ALL_PRODUCTS",n=5e3,r=e=>{if(!e)return"";let t=["488x488","976x976","368x368","736x","474x","originals","orig",Object.keys(e)[0]];for(let i of t)if(e[i])return e[i].url??"";return""}},436395:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var a=i(616550),n=i(784590);function r(){let{username:e}=(0,a.UO)();return(0,n.Z)(null==e?null:{name:"UserResource",options:{username:e,field_set_key:"profile"}})}},254176:(e,t,i)=>{"use strict";i.d(t,{Br:()=>h,Cr:()=>T,K8:()=>x,L1:()=>O,Tq:()=>y,YQ:()=>D,YV:()=>I,ZP:()=>k,aX:()=>E,eo:()=>g,fJ:()=>M,md:()=>m,oG:()=>_,oL:()=>j,of:()=>v,xH:()=>f,xQ:()=>b,xR:()=>R,xk:()=>w,yT:()=>p,zS:()=>L});var a=i(214494),n=i(27255),r=i(186656),l=i(248327),s=i(414327),o=i(239682),d=i(240265),c=i(956800),u=i(492583);function p(e){return{type:"BOARD_UPDATE_COMPLETE",payload:{board:e}}}function h(e){return{type:"BOARD_PIN_COUNT_CHANGED",payload:e}}function m(e,t){return{type:"BOARD_FOLLOW",payload:{boardId:e,value:t}}}function g({viewingUserId:e,viewingUsername:t,boardId:i,boardPinCount:a}){return{type:"BOARD_DELETE",payload:{viewingUserId:e,viewingUsername:t,boardId:i,boardPinCount:a}}}let _=(e,t)=>i=>i((0,l.U)("BoardResource",{options:{board_id:e,field_set_key:t}}));function y(e,t,i){return(0,l.U)("BoardResource",{options:{board_id:e,field_set_key:t,...i?{orbac_subject_id:i}:{}}})}function f(e,t,i){return a=>(0,r.Z)({url:`/v3/boards/${e}/merge/${t}/`,method:"POST",data:i?{orbac_subject_id:i}:{}}).then(()=>Promise.all([a(g({boardId:e})),a(y(t,"pin_count")),a((0,c.N8)(u.Z.BOARD_SECTIONS,t))]))}function x(e){return t=>{e&&(0,d.Q)(e).forEach(e=>{t(e)})}}let v=e=>({type:"BOARD_DISMISS_SENSITIVITY_SCREEN",payload:{boardId:e}}),b=e=>_(e,"pin_count");function S(e,t){return{type:"BOARD_ARCHIVE",payload:{boardId:e,username:t}}}function w(e,t){return i=>(i(S(e)),a.Z.create("BoardArchiveResource",{boardId:e,orbacSubjectId:t}).callUpdate())}function P(e){return{type:"BOARD_UNARCHIVE",payload:{boardId:e}}}function I(e,t){return i=>(i(P(e)),a.Z.create("BoardArchiveResource",{boardId:e,orbacSubjectId:t}).callDelete())}let T=(e,t)=>({type:"BOARD_COVER_IMAGE_UPDATED",payload:{boardId:e,coverPin:t}}),k=e=>({type:"BOARD_DISABLE_MORE_IDEAS_BADGING",payload:{boardId:e}});function E(e,t,i){let r={name:e,privacy:n.Z.BoardPrivacy.PUBLIC,username:t,...i?{orbac_subject_id:i}:Object.freeze({})};return e=>a.Z.create("BoardResource",r).callCreate().then(i=>{let a=i.resource_response.data;return e(t&&(0,s.jB)("BoardsResource",(0,o.Z)(t,!1))),a})}function j(e={},t,i){return{type:"BOARD_CREATE_COMPLETE",payload:{options:e,board:t},error:i}}let A=(e,t)=>({type:"BOARD_INVITE_DENIED_BY_VIEWER",payload:{boardId:e,userId:t}}),C=(e,t,i)=>({type:"BOARD_COLLABORATOR_DELETE",payload:{boardId:e,userId:t,viewingUser:i}}),F=(e,t,i,a)=>({type:"BOARD_COLLABORATOR_ADD",payload:{boardId:e,viewingUser:t,status:i,collaboratingUsers:a}}),R=(e,t,i)=>async n=>{n(A(e,t));let r=await a.Z.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callDelete();return r.resource_response.error||i({event_type:29,object_id_str:e}),r},D=(e,t,i,n,r,l)=>async s=>{let o="accepted"===t?"BoardCollaboratorResource":"BoardInviteResource";s(C(e,n?.id??"",i));try{let i=await a.Z.create(o,{board_id:e,field_set_key:"boardEdit",invited_user_id:n?.id??"",...l?{orbac_subject_id:l}:{}}).callDelete();i.resource_response.error||r({event_type:"accepted"===t?25:29,object_id_str:e})}catch(a){s(F(e,i,t,[n]))}},O=(e,t,i,n)=>r=>{let l=a.Z.create("BoardResource",{board_id:i}).callDelete();return r(g({viewingUserId:e,viewingUsername:t,boardId:i,boardPinCount:n})),l},L=(e,t)=>i=>a.Z.create("BoardArchiveResource",{boardId:e}).callUpdate().then(a=>(i((0,c.Qv)("archived-boards",[{id:e,type:"board"}])),i(S(e,t)),a)),M=(e,t)=>i=>a.Z.create("BoardArchiveResource",{boardId:e}).callDelete().then(a=>(i((0,c.Qv)(`profile-boards:${t}`,[{id:e,type:"board"}])),i(P(e)),a))},956800:(e,t,i)=>{"use strict";function a(e){return{type:"FEED_ITEM_REORDERED",payload:e}}function n(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}i.d(t,{EX:()=>l,N8:()=>n,Qv:()=>r,_f:()=>a,vX:()=>s});let r=(e,t,i=Object.freeze({}))=>({type:"APPEND_FEED_ITEMS",payload:{id:e,options:i,items:t}});function l(e){return{type:"FEED_ITEMS_REMOVED",payload:e}}function s(e){return{type:"FEED_ITEMS_ADDED",payload:e}}},447948:(e,t,i)=>{"use strict";function a(e,t){return{type:"CHANGE_CAROUSEL_SLOT_INDEX",payload:{id:e,index:t}}}function n(e,t){return{type:"SET_PIN_COMMENTS_DISABLED",payload:{id:e,pinCommentsDisabled:t}}}function r(e){return{type:"PIN_SAVE",payload:e}}function l(e,t){return{type:"PIN_UNSAVE",payload:{id:e,nodeId:t}}}function s(e){return{type:"PIN_SHOW_SUGGESTED_CREATOR_RECS",payload:{id:e,value:!0}}}function o(e){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e,value:!1}}}function d({id:e,text:t}){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e,value:!0,text:t}}}function c(e){return{type:"PIN_SHOW_FEEDBACK_OVERLAY",payload:{id:e,value:!0}}}function u(e){return{type:"PIN_SHOW_FEEDBACK_OVERLAY",payload:{id:e,value:!1}}}function p(e){return{type:"PIN_SHOW_AD_REASONS_MODAL",payload:{id:e,value:!0}}}function h(e){return{payload:{id:e,value:!1},type:"PIN_SHOW_AD_REASONS_MODAL"}}i.d(t,{Gb:()=>l,I1:()=>o,Ib:()=>c,Ur:()=>r,Vw:()=>s,b9:()=>p,i0:()=>u,mO:()=>n,q1:()=>d,yR:()=>a,yj:()=>h})},884183:(e,t,i)=>{"use strict";i.d(t,{By:()=>m,IT:()=>p,N6:()=>o,br:()=>d,lU:()=>u,mk:()=>c});var a=i(186656);let n=e=>({type:"CLEAR_RECENT_SEARCH",payload:{query:e}}),r=()=>({type:"CLEAR_RECENT_SEARCHES"}),l=e=>({type:"CLEAR_RECENT_PERSONAL_SEARCH",payload:{query:e}}),s=()=>({type:"CLEAR_RECENT_PERSONAL_SEARCHES"}),o=(e,t)=>({type:"UPDATE_CURRENT_SEARCH",payload:{query:e,scope:t}}),d=(e,t)=>({type:"UPDATE_RECENT_SEARCHES",payload:{query:e,scope:t}}),c=e=>({type:"SET_ANIMATION_ON_BODY_FILTER",payload:{animated:e}}),u=(e,t,i)=>n=>{(0,a.Z)({url:"/v3/search/recent/",method:"DELETE",data:{vertical:e}}).then(t,i),n("PERSONAL"===e?s():r())},p=(e,t,i,r)=>s=>{(0,a.Z)({url:"/v3/search/recent/",method:"DELETE",data:{query:e,vertical:t}}).then(i,r),s("PERSONAL"===t?l(e):n(e))},h=e=>({type:"RELOAD_VISUAL_SEARCH_ANNOTATIONS",payload:{pinId:e}}),m=e=>t=>{t(h(e))}},492583:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});let a={AGGREGATED_COMMENTS:"aggregatedComments",AGGREGATED_COMMENT_REPLIES:"aggregated-comment-replies",BOARDFEED:"boardfeed",BOARDLESS_PINS:"boardless-pins",BOARD_SECTIONS:"board-sections",BOARD_SECTION_PINS:"board-section-pins",STORY_PINS_FEED:"story-pins-feed",PROFILE_PINS_FEED:"profile-pins-feed",PROFILE_BOARDS:"profileBoards",SEARCH_PINS:"searchPins",STORY_PIN_DATA:"storyPinData",TODAY_ARTICLE_INTEREST_FEED:"todayArticleInterestFeed",TODAY_TAB:"todayTabFeed",UNIFIED_COMMENTS:"unified-comments",TRIED_IT_FEED:"trieditfeed"}},422946:(e,t,i)=>{"use strict";i.d(t,{J:()=>y,Z:()=>w});var a=i(932995),n=i(338739),r=i(648284),l=i(998651),s=i(59644),o=i(483025),d=i(819063),c=i(492583);let u=new Set(["PinResource","RepinResource"]),p={ApiResource:e=>e?.url==="/v3/orientation/nux_creator_recommendations/"?"nux-creator-recommendations":e?.url==="/v3/users/me/interests/"?`recommended-interests:${e.data?.blend_type}`:"",AggregatedActivityFeedResource:e=>`trieditfeed:${e.aggregated_pin_data_id}`,AggregatedCommentFeedResource:e=>`aggregated-comments:${e.objectId}`,AggregatedCommentReplyFeedResource:e=>`${c.Z.AGGREGATED_COMMENT_REPLIES}:${e.objectId}`,BoardlessPinsResource:e=>`boardless-pins:${e.userId}`,BestPinsFeedAltResource:e=>`idea-page-best-pins:${e.interest}`,BoardArchiveResource:()=>"archived-boards",BoardContentRecommendationResource:e=>`recommendation-feed:${e.id}`,BoardFeedResource:e=>`boardfeed:${e.board_id}`,BoardSectionsRepinResource:e=>`board-sections:${e.board_id}`,BoardSectionsResource:e=>`board-sections:${e.board_id}`,BoardSectionPinsResource:e=>`board-section-pins:${e.section_id}`,BoardsFeedResource:e=>`profile-boards:${e.username}`,BoardToolsFeedResource:e=>`board-tools:${e.boardId}`,ConversationsResource:()=>"conversations",DidItLikedByResource:e=>`triedit-likes:${e.didItDataId}`,DidItUserFeedResource:e=>`profile-tried:${e.username}`,HolidaySpotlightResource:e=>`holiday-spotlight:${e.storyType}`,InterestResource:e=>`klp-pins:${e.interest}`,MoreIdeasTabsBoardsResource:()=>"homefeed-more-ideas-tabs",NewsHubResource:()=>"notifications",NewsHubDetailsResource:e=>`newshubdetail:${e.news_id}`,NuxInterestsResource:()=>"nuxTopics",PinsFromBrandResource:e=>`brand-pins:${e.pin}`,ReactionsResource:e=>`reactions:${e.pin_id}`,RelatedArticlesResource:e=>`related-articles:${e.article_id}`,RelatedModulesResource:e=>`related-modules:${e.pin_id}`,RelatedPinFeedResource:e=>`related-pins:${e.pin}`,RelatedProductFeedResource:e=>"pin"===e.shop_source?`closeup-related-products:${e.pin}`:`related-products:${e.pin}`,RelatedStreamResource:e=>`related-story-pins:${e.pinId}`,SearchResource:e=>{let t=`search:${e.scope}:${e.query}:${e.filters||""}:${e.article||""}`;return e.auto_correction_disabled?`${t}:auto-correction-disabled`:t},BaseSearchResource:e=>{let t=`search:${e.scope}:${e.query}:${e.filters||""}:${e.appliedProductFilters}:${e.article||""}`;return e.auto_correction_disabled?`${t}:auto-correction-disabled`:t},SectionToolsFeedResource:e=>`section-tools:${e.sectionId}`,ShareSuggestionsTypeaheadResource:e=>`share-suggestions:${e.board||e.user}:${e.term}`,ShoppingFeedModularizedResource:e=>e.saved_products_only?`board-shop-saved:${e.board_id}`:`board-shop-related:${e.board_id}`,StoryFeedResource:e=>`story-feed:${e.feed_type}:${e.request_params}`,SuggestedCreatorFollowsResource:()=>"suggested-creator-follows",StoryPinTaggedProductsResource:()=>"story-pin-tagged-products",TodayArticleFeedResource:e=>`today-article:${e.id}`,IdeasHubTodayArticlesResource:e=>`today-article:${e.interest_id}`,TodayTabInterestFeedResource:e=>`today-article-interestfeed:${e.interest_id}`,TodayTabResource:()=>"today-tab",SeoTier1CandidateResource:()=>"tier1-feed",UnifiedCommentsResource:e=>`unified-comments:${e.aggregated_pin_id}`,UserActivityPinsResource:e=>`profile-pins-feed:${e.user_id}`,UserHomefeedResource:e=>e.pin_quiz?"pin-quiz":"homefeed",UserFollowingResource:e=>`user-following:${e.username}`,UserRecentActivityResource:e=>`user-recent-activity:${e.filter_type}`,UserStoryPinsFeedResource:e=>`story-pins-feed:${e.user_id}`,VideosFeedResource:()=>"videos-feed",VisualLiveSearchResource:e=>`visual-search:${e.pin_id}:${e.crop.x}${e.crop.y}${e.crop.w}${e.crop.h}`,VisualLiveSearchProductFeedResource:e=>`visual-search-products:${e.pin_id}:${e.crop.x}${e.crop.y}${e.crop.w}${e.crop.h}`,VisualSearchFlashlightUnifiedResource:e=>`related-products-unified:${e.pin_id}`,BoardFollowingResource:e=>`board-following:${e.username}`,InterestFollowingResource:e=>`topic-following:${e.username}`,UserPinsResource:e=>`profile-pins:${e.username}`,TopicFeedResource:e=>e.best_pins?`best-topic-pins:${e.interest}`:`topic-pins:${e.interest}`},h={AggregatedActivityFeedResource:({options:{aggregated_pin_data_id:e}})=>({type:c.Z.TRIED_IT_FEED,id:e}),AggregatedCommentFeedResource:({options:{objectId:e}})=>({type:c.Z.AGGREGATED_COMMENTS,id:e}),AggregatedCommentReplyFeedResource:({options:{isUnifiedComment:e,objectId:t}})=>({type:e?c.Z.AGGREGATED_COMMENT_REPLIES:c.Z.AGGREGATED_COMMENTS,id:t,reversed:!0}),BoardFeedResource:({options:{board_id:e}})=>({type:c.Z.BOARDFEED,id:e}),BoardlessPinsResource:({options:{userId:e}})=>({type:c.Z.BOARDLESS_PINS,id:e}),BoardSectionPinsResource:({options:{section_id:e}})=>({type:c.Z.BOARD_SECTION_PINS,id:e}),BoardSectionsResource:({options:{board_id:e}})=>({type:c.Z.BOARD_SECTIONS,id:e}),BoardsResource:({options:{username:e,sort:t}})=>({type:c.Z.PROFILE_BOARDS,id:(0,s.Z)(e,t)}),BaseSearchResource:({options:{auto_correction_disabled:e,appliedProductFilters:t,scope:i,filters:a,query_pin_sigs:n,query:s,user:o},response:d})=>({type:c.Z.SEARCH_PINS,id:(0,r.Tb)({appliedProductFilters:t,autoCorrectionDisabled:e,filters:a,query:s,selectedPinImgSig:n,scope:i,user:o}),items:d.resource_response.data?.results?(0,l.L)(d.resource_response.data.results).filteredResults:[]}),DidItCommentsResource:({options:{objectId:e}})=>({type:c.Z.AGGREGATED_COMMENTS,id:e,reversed:!0}),DidItUserFeedResource:({options:{username:e}})=>({type:c.Z.TRIED_IT_FEED,id:e}),IdeasHubTodayArticlesResource:({options:{interest_id:e}})=>({type:c.Z.TODAY_TAB,id:e}),RelatedArticlesResource:({options:{article_id:e}})=>({type:c.Z.TODAY_TAB,id:e}),StoryPinDraftsResource:({options:{userId:e}})=>({type:c.Z.STORY_PIN_DATA,id:e}),TodayTabInterestFeedResource:({options:{interest_id:e}})=>({type:c.Z.TODAY_ARTICLE_INTEREST_FEED,id:e}),TodayTabResource:()=>({type:c.Z.TODAY_TAB,id:"todayTab"}),UnifiedCommentsPreviewResource:({options:{aggregated_pin_id:e}})=>({type:c.Z.UNIFIED_COMMENTS,id:e}),UnifiedCommentsResource:({options:{aggregated_pin_id:e,is_reversed:t}})=>({type:c.Z.UNIFIED_COMMENTS,id:e,reversed:t}),UserActivityPinsResource:({options:{user_id:e}})=>({type:c.Z.PROFILE_PINS_FEED,id:e}),UserStoryPinsFeedResource:({response:e,options:{user_id:t}})=>({type:c.Z.STORY_PINS_FEED,id:t,items:e.resource_response.data||[]})},m=(e,{pinId:t,feedId:i})=>e[i]?{...e,[i]:e[i].filter(e=>!("pin"===e.type&&e.id===t))}:e,g=(e,{pinId:t,feedId:i})=>e[i]?{...e,[i]:[{type:"pin",id:t},...e[i]]}:e,_=(e,{pinId:t,oldFeedId:i,newFeedId:a})=>i===a?e:g(m(e,{pinId:t,feedId:i}),{pinId:t,feedId:a}),y=(e,t)=>e in p?p[e](t):null,f=(e,t)=>{switch(e.type){case"story":return{id:e.id,type:"story",story_type:e.story_type};case"module":return{id:e.id,type:"module",name:e.name};case"user":return{id:e.id,type:"user"};case"board":return t===c.Z.PROFILE_BOARDS?{id:e.id,type:"board",onProfile:!0,profileGroup:e.archived_by_me_at?"archived":e.privacy||"public"}:{id:e.id,type:"board",onProfile:!1};case"board_section":return{type:"boardsection",id:e.id};case"triedit":return{type:"triedit",id:e.id};case"aggregatedcomment":return{type:"aggregatedcomment",id:e.id};case"home_feed_tab":return{type:"home_feed_tab",id:e.id,name:e.name};case"storypindata":return{id:e.id,type:"storypindata"};case"todayarticle":return{type:"todayarticle",id:e.id};case"unifiedcommentspreview":return"userdiditdata"===e.unified_comment.type?{type:"triedit",id:e.unified_comment.id}:{type:"aggregatedcomment",id:e.unified_comment.id};default:return{type:"pin",id:e.id}}},x=(e,t)=>t?`board-section-pins:${t}`:`boardfeed:${e}`,v=(e,t,i)=>{let a=i||o.Z[e];if(a===d.LR)return t.result;if(a===d.sN)return t.result.map(e=>({id:e,schema:"board"}));if(a===d.Gn)return t.result.map(e=>({id:e,schema:"user"}));if(a===d.Ht)return t.result.map(e=>({id:e,schema:"invite"}));if(a===d.fE)return t.result.map(e=>({id:e,schema:"reaction"}));if("object"==typeof a){let e=Object.entries(a).find(([,e])=>e===d.LR);if(e)return t.result[e[0]]}return null},b=(e,t)=>e.map(e=>{let{id:i,schema:a,type:n}=e;return"home_feed_tabs"===n?e:a?{id:i,type:a,trackingParams:"pin"===a?t.pins[i].tracking_params:void 0,user_id:void 0}:null}).filter(Boolean),S=(e,t,i)=>Object.keys(e).reduce((a,n)=>{let r=e[n]||[],l=r.filter(e=>!(e.type===t&&e.id===i));return r.length!==l.length&&(a[n]=l),a},{...e}),w=(e={},t)=>{switch(t.type){case n.zP:case n.aW:{let{payload:i}=t,{resource:a,options:r,normalizedResponse:l,schema:s}=i;if(l&&a in p){let i=v(a,l,s);if(i&&Array.isArray(i)){let s=p[a](r);if("ShoppingFeedModularizedResource"===a){let{board_id:t,saved_products_only:a}=r??{},n=`board-shop-related:${t}`,s=`board-shop-saved:${t}`,o=`board-shop-saved-preview:${t}`,d=[...e[n]||[]],c=[...e[s]||[]],u=[...e[o]||[]],p=b(i,l.entities);return p.forEach(e=>{a?c.push(e):l.entities.pins&&l.entities.pins[e.id]?.board===t?u.push(e):d.push(e)}),{...e,[n]:d,[s]:c,[o]:u}}if("BoardToolsFeedResource"===a||"SectionToolsFeedResource"===a)return{...e,[s]:i};if("UnifiedCommentsResource"===a){let a=((t.type===n.aW||n.zP)&&e[s]||[]).concat(b(i,l.entities));return{...e,[s]:a}}{let a=(t.type===n.aW&&e[s]||[]).concat(b(i,l.entities));return{...e,[s]:a}}}}else{let{data:a}=i.response.resource_response;if(!i.options?.redux_normalize_feed)return e;let r=h[i.resource]({options:i.options,response:i.response});if(r){let{type:i,id:l,items:s,reversed:o}=r,d=(s||a||[]).map(e=>f(e,i));o&&(d=d.reverse());let c=`${i}:${l}`,u=e[c];if(u||t.type!==n.aW){let i=u||[],a=d;return t.type===n.aW&&(a=o?d.concat(i):i.concat(d)),{...e,[c]:a}}}}break}case"FEED_ITEM_REORDERED":{let{payload:{feedType:i,feedId:n,itemType:r,targetItemId:l,sourceItemId:s}}=t,o=`${i}:${n}`,d=e[o]||[],u=-1,p=-1;if([c.Z.BOARDFEED,c.Z.BOARD_SECTION_PINS,c.Z.BOARD_SECTIONS,"profileBoards"].includes(i)&&(u=d.findIndex(e=>e.type===r&&e.id===s),p=d.findIndex(e=>e.type===r&&e.id===l)),-1!==u&&-1!==p)return{...e,[o]:(0,a.Z)(d,u,p)};break}case"FEED_ITEMS_REMOVED":{let{payload:{feedType:i,feedId:a,inverseSelection:n,itemType:r,itemIds:l=[]}}=t,s=`${i}:${a}`,o=e[s]||[];if(o&&o.length>0&&(i===c.Z.BOARD_SECTION_PINS||i===c.Z.BOARDFEED)){let t=o.filter(e=>{let t=l.includes(e.id),i=e.type===r&&(n&&!t||!n&&t);return!i}),i=!!t.find(e=>"pin"===e.type);return{...e,[s]:i?t:[]}}if(o&&o.length>0&&i===c.Z.BOARD_SECTIONS){let t=o.filter(e=>{let t=l.includes(e.id);return!(e.type===r&&t)});return{...e,[s]:t}}if(o&&o.length>0&&(i===c.Z.AGGREGATED_COMMENTS||i===c.Z.BOARDLESS_PINS||i===c.Z.PROFILE_PINS_FEED||i===c.Z.STORY_PINS_FEED||i===c.Z.UNIFIED_COMMENTS||i===c.Z.TRIED_IT_FEED||i===c.Z.STORY_PIN_DATA)){let t=o.filter(e=>{let t=l.includes(e.id);return!(e.type===r&&t)});return{...e,[s]:t}}break}case"FEED_ITEMS_ADDED":{let{payload:{feedType:i,feedId:a,itemType:n,itemIds:r=[],prepend:l}}=t,s=`${i}:${a}`,o=e[s]||[];if(o&&(i===c.Z.BOARD_SECTION_PINS||i===c.Z.BOARDFEED||i===c.Z.BOARDLESS_PINS)){let t=r.map(e=>({id:e,type:n})),i=0;"story"===(o[0]||{}).type&&(i=1),"story"===(o[1]||{}).type&&(i=2);let a=[...o.slice(0,i),...t,...o.slice(i)];return{...e,[s]:a}}if(o&&i===c.Z.BOARD_SECTIONS){let t=[...r].reverse().map(e=>({id:e,type:"boardsection"})),i=o?[...t,...o]:[...t];return{...e,[s]:i}}if(i===c.Z.AGGREGATED_COMMENTS||i===c.Z.AGGREGATED_COMMENT_REPLIES||i===c.Z.PROFILE_PINS_FEED||i===c.Z.STORY_PINS_FEED||i===c.Z.UNIFIED_COMMENTS){let t=r.map(e=>({id:e,type:n})),i=o?[...l?t:o,...l?o:t]:t;return{...e,[s]:i}}if(i===c.Z.TRIED_IT_FEED){let t=r.map(e=>({id:e,type:n})),i=o?[...t,...o]:t;return{...e,[s]:i}}break}case"FEED_INVALIDATE":{let{payload:{feedType:i,feedId:a}}=t,n=`${i}:${a}`,r=e[n]||[];if(r)return{...e,[n]:null};break}case"APPEND_FEED_ITEMS":{let{payload:{id:i,items:a,options:n}}=t,r=e[i];if(!r)return{...e,[i]:a};{let t;return t=n.isPrepend?r[0]&&"story"===r[0].type?[].concat(r[0],a,r.slice(1)):a.concat(r):r.concat(a),{...e,[i]:t}}}case"PIN_DELETE":{let{payload:{pinId:i}}=t;return S(e,"pin",i)}case"BOARD_ARCHIVE":{let{payload:{boardId:i,username:a}}=t,n=`profile-boards:${a??""}`;if(e[n])return{...e,[n]:e[n].filter(e=>e.id!==i)};break}case"BOARD_UNARCHIVE":{let{payload:{boardId:i}}=t,a="archived-boards";if(e[a])return{...e,[a]:e[a].filter(e=>e.id!==i)};break}case"BOARD_DELETE":{let{payload:{boardId:i}}=t;return S(e,"board",i)}case"BOARD_SECTION_DELETE":{let{payload:{boardSectionId:i}}=t;return S(e,"boardsection",i)}case"PINS_MOVE":{let{payload:{source:i,target:a,pinIds:n,userId:r}}=t,l=i.boardlessPins&&r&&`boardless-pins:${r}`||i.boardId&&x(i.boardId,i.sectionId),s=x(a.boardId,a.sectionId);return n.reduce((e,t)=>_(e,{pinId:t,oldFeedId:l,newFeedId:s}),e)}case"PINS_MOVE_ALL":{let{payload:{source:i,target:a,excludePinIds:n}}=t,r=x(i.boardId,i.sectionId),l=x(a.boardId,a.sectionId),s={...e,[r]:n.map(e=>({type:"pin",id:e}))};return delete s[l],s}case"PIN_EDIT":{let{payload:{pinId:i,boardId:a,sectionId:n="",source:{boardId:r,sectionId:l}}}=t,s=x(r,l),o=x(a,n);return _(e,{pinId:i,oldFeedId:s,newFeedId:o})}case n.AF:if(u.has(t.payload.resource)){let i;let a=t.payload.response.resource_response.data,{board:n}=a;if("quick_saves"===n.layout)i=`boardless-pins:${t.payload.options.user_id}`;else{let e=t.payload.options.section;i=e?`board-section-pins:${e}`:`boardfeed:${n.id}`}if(e[i]){let t={...e},n={id:a.id,type:"pin",trackingParams:a?.tracking_params};return t[i]=[n].concat(e[i]),t}}if("BoardSectionResource"===t.payload.resource&&t.payload.normalizedResponse){let i=t.payload.normalizedResponse.result,a=t.payload.normalizedResponse.entities.boardsections[i].board,n=`board-sections:${a}`;if(e[n]){let t={...e};return t[n]=[{id:i,type:"boardsection"}].concat(e[n]),t}}if("AggregatedCommentResource"===t.payload.resource&&t.payload.normalizedResponse){let i=t.payload.normalizedResponse.result,a={id:i,type:"aggregatedcomment"},n={...e};for(let i of["aggregated-comments","unified-comments"]){let r=`${i}:${t.payload.options.objectId}`;e[r]&&(n={...n,[r]:[a].concat(n[r])})}return n}if("AggregatedCommentReplyResource"===t.payload.resource&&t.payload.normalizedResponse){let i=`${c.Z.AGGREGATED_COMMENT_REPLIES}:${t.payload.options.objectId}`;return{...e,[i]:[...e[i]||[],{id:t.payload.normalizedResponse.result,type:"aggregatedComment"}]}}if("ReactionsResource"===t.payload.resource&&t.payload.normalizedResponse){let{reaction_pin_id:i,reaction_type:a}=t.payload.options;if("reaction"===t.payload.options.action_type){let n=`reactions:${t.payload.options.pin_id}`,r={...e},l={id:`${i}:${t.payload.options.user_id}:${a}`,type:"reaction",trackingParams:void 0};return r[n]=[l].concat(e[n]),r}if("unreaction"===t.payload.options.action_type){let a=`${i}:${t.payload.options.user_id}`;return S(e,"reaction",a)}}break;case"COMPLETE_STORY":{let{payload:{storyId:i}}=t;return S(e,"story",i)}}return e}},761881:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});let a=(e,t)=>"string"==typeof e?e:e(t),n=e=>(t,i)=>t.feeds[a(e,i)],r=e=>n(e)},404508:(e,t,i)=>{"use strict";i.d(t,{Z:()=>_});var a=i(702664),n=i(616550),r=i(883119),l=i(464232),s=i(112690),o=i(385740),d=i(898781),c=i(773285),u=i(957161),p=i(867820),h=i(52022),m=i(50286),g=i(785893);function _({alignIconLeft:e,bgColor:t,color:i,disableRedirect:_=!1,fallbackUrl:y,icon:f="arrow-back",onTouch:x,padding:v,placement:b,shouldUseFallbackUrl:S,size:w="lg",viewParameter:P,viewType:I,fallbackUrlForExp:T}){let k=(0,d.ZP)(),E=(0,m.HG)(),{checkExperiment:j}=(0,c.F)(),A=(0,n.k6)(),C=(0,n.TH)(),F=(0,a.useSelector)(e=>e.session.isAuthenticated),R=(0,s.Z)(),D=(0,h.Z)(),O=!F&&T&&"/ideas"===y,{viewType:L,viewParameter:M}=(0,o.SU)(),[N,Z]=I?[I,P]:[L,M],K=()=>C.search&&C.search.includes("?nativeShouldDismiss=true"),z=()=>{let e=u.Z.getItem(l.pm);C.key||"/ideas"!==y?(0,p.My)(`pinner_conversion.back_button.${String(e?.[0].pageType)}`):(0,p.My)("pinner_conversion.back_button.no_history"),(0,p.My)(`web_back_button_click.${String(b)}.is_auth_${String(F)}`),D({action:"click",item:"back-button"}),N&&R({view_type:N,view_parameter:Z,element:34,event_type:102}),x&&x(),_||((!C.key||C.state&&"redirect"===C.state.referrer||S)&&y?O?E&&j("web_unauth_backbutton_navigation").anyEnabled?(A.push(T||y),(0,p.My)("web.unauth.back_button.l1interest")):!E&&j("mweb_unauth_backbutton_navigation").anyEnabled?(A.push(T||y),(0,p.My)("mweb.unauth.back_button.l1interest")):A.push(y):A.push(y):C.pathname.includes("/password/reset/")&&K()?A.push("/login/?dismissWebview=true"):A.goBack())};return(0,g.jsx)(r.xu,{"data-test-id":"back-button",children:e?(0,g.jsx)(r.xu,{alignItems:"center",display:"flex",height:48,marginStart:"cancel"===f?-1:-2,width:48,children:(0,g.jsx)(r.hU,{accessibilityLabel:k.bt("Back", "Back", "navigation button", undefined, true),bgColor:t,icon:f,iconColor:!i&&(!t||["white","lightGray","transparent"].includes(t))?"gray":i,onClick:z,padding:"auto"!==v?v:2,size:w})}):(0,g.jsx)(r.hU,{accessibilityLabel:k.bt("Back", "Back", "navigation button", undefined, true),bgColor:t,icon:f,iconColor:!i&&(!t||["white","lightGray","transparent"].includes(t))?"gray":i,onClick:z,padding:"auto"!==v?v:2,size:w})})}},144226:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var a=i(883119),n=i(785893);function r({children:e}){return(0,n.jsx)(a.xu,{paddingY:4,children:e})}},12755:(e,t,i)=>{"use strict";i.d(t,{VF:()=>n,pG:()=>a,vc:()=>r});let a=348,n=7,r=4},143649:(e,t,i)=>{"use strict";function a({cropSource:e,viewType:t}){return 2===t?"search":e&&5!==e?4===e?"stela":null:"related_products"}i.d(t,{Z:()=>a})},652519:(e,t,i)=>{"use strict";i.d(t,{Z:()=>en});var a=i(667294),n=i(542473),r=i.n(n),l=Math.sqrt(50),s=Math.sqrt(10),o=Math.sqrt(2);function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,a)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach(function(t){var a;a=i[t],t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function u(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function p(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e,t,i){return t&&p(e.prototype,t),i&&p(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,a=g(e);if(t){var n=g(this).constructor;i=Reflect.construct(a,arguments,n)}else i=a.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return y(e)}(this,i)}}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i,a,n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r=[],l=!0,s=!1;try{for(n=n.call(e);!(l=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(s)throw a}}return r}}(e,t)||b(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return S(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if("Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return S(e,t)}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=Array(t);i<t;i++)a[i]=e[i];return a}var w="react-compound-slider:";function P(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,i){return t.val>i.val?e?-1:1:i.val>t.val?e?1:-1:0}}function I(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=e.findIndex(function(e){return e.key===t});if(-1!==n){var r=e[n],l=r.key;return r.val===i?e:[].concat(v(e.slice(0,n)),[{key:l,val:i}],v(e.slice(n+1))).sort(P(a))}return e}function T(e,t){if(!e)return[0,0];var i=e.getBoundingClientRect();return[t?i.top:i.left,t?i.bottom:i.right]}function k(e){var t=e.type,i=e.touches;return!i||i.length>1||"touchend"===(void 0===t?"":t).toLowerCase()&&i.length>0}function E(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,n=0;return{handles:e.map(function(e){var t=i.getValue(e);return e!==t&&(n+=1,r()(!a,"".concat(w," Invalid value encountered. Changing ").concat(e," to ").concat(t,"."))),t}).map(function(e,t){return{key:"$$-".concat(t),val:e}}).sort(P(t)),changes:n}}function A(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return t.forEach(function(t){return t&&t(e)})}}var C=function(){return{value:0,percent:0}},F=function(e){m(i,e);var t=f(i);function i(){var e;u(this,i);for(var a=arguments.length,n=Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).getRailProps=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.props,a=i.emitMouse,n=i.emitTouch;return c(c({},t),{},{onMouseDown:A(t&&t.onMouseDown,a),onTouchStart:A(t&&t.onTouchStart,n)})},e}return h(i,[{key:"render",value:function(){var e=this.getRailProps,t=this.props,i=t.getEventData,n=t.activeHandleID,r=(0,t.children)({getEventData:i||C,activeHandleID:void 0===n?"":n,getRailProps:e});return r&&a.Children.only(r)}}]),i}(a.Component),R=function(e){m(i,e);var t=f(i);function i(){var e;u(this,i);for(var a=arguments.length,n=Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).autofocus=function(e){e.target instanceof HTMLElement&&e.target.focus()},e.getHandleProps=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.props,n=a.emitKeyboard,r=a.emitMouse,l=a.emitTouch;return c(c({},i),{},{onKeyDown:A(i&&i.onKeyDown,function(e){return n&&n(e,t)}),onMouseDown:A(i&&i.onMouseDown,e.autofocus,function(e){return r&&r(e,t)}),onTouchStart:A(i&&i.onTouchStart,function(e){return l&&l(e,t)})})},e}return h(i,[{key:"render",value:function(){var e=this.getHandleProps,t=this.props,i=t.activeHandleID,n=t.children,r=t.handles,l=n({handles:void 0===r?[]:r,activeHandleID:void 0===i?"":i,getHandleProps:e});return l&&a.Children.only(l)}}]),i}(a.Component),D=function(){function e(){u(this,e),this.interpolator=void 0,this.domain=[0,1],this.range=[0,1],this.domain=[0,1],this.range=[0,1],this.interpolator=null}return h(e,[{key:"createInterpolator",value:function(e,t){var i=this,a=e[0],n=e[1],r=t[0],l=t[1];return n<a?function(e){return i.interpolateValue(l,r)(i.deinterpolateValue(n,a)(e))}:function(e){return i.interpolateValue(r,l)(i.deinterpolateValue(a,n)(e))}}},{key:"interpolateValue",value:function(e,t){return t-=e=+e,function(i){return e+t*i}}},{key:"deinterpolateValue",value:function(e,t){return(t-=e=+e)?function(i){return(i-e)/t}:function(){return t}}},{key:"rescale",value:function(){return this.interpolator=null,this}},{key:"getValue",value:function(e){var t=this.domain,i=this.range;return(this.interpolator||(this.interpolator=this.createInterpolator(t,i)))(+e)}},{key:"setDomain",value:function(e){return this.domain=[e[0],e[1]],this.rescale(),this}},{key:"getDomain",value:function(){return this.domain}},{key:"setRange",value:function(e){return this.range=[e[0],e[1]],this}},{key:"getRange",value:function(){return this.range}},{key:"getTicks",value:function(e){var t=this.domain;return function(e,t,i){var a,n,r,d,c,u,p,h=-1;if(i=+i,(e=+e)==(t=+t)&&i>0)return[e];if((d=t<e)&&(c=e,e=t,t=c),0==(n=Math.floor(Math.log(a=(t-e)/Math.max(0,i))/Math.LN10),r=a/Math.pow(10,n),p=n>=0?(r>=l?10:r>=s?5:r>=o?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(r>=l?10:r>=s?5:r>=o?2:1))||!isFinite(p))return[];if(p>0){let i=Math.round(e/p),a=Math.round(t/p);for(i*p<e&&++i,a*p>t&&--a,u=Array(c=a-i+1);++h<c;)u[h]=(i+h)*p}else{let i=Math.round(e*(p=-p)),a=Math.round(t*p);for(i/p<e&&++i,a/p>t&&--a,u=Array(c=a-i+1);++h<c;)u[h]=(i+h)/p}return d&&u.reverse(),u}(t[0],t[t.length-1],e||10)}}]),e}(),O=function(){return{value:0,percent:0}},L=function(e){m(i,e);var t=f(i);function i(){return u(this,i),t.apply(this,arguments)}return h(i,[{key:"render",value:function(){var e=this.props,t=e.children,i=e.values,n=e.scale,r=void 0===n?new D:n,l=e.count,s=e.getEventData,o=e.activeHandleID,d=t({getEventData:void 0===s?O:s,activeHandleID:void 0===o?"":o,ticks:(i||r.getTicks(void 0===l?10:l)).map(function(e){return{id:"$$-".concat(e),value:e,percent:r.getValue(e)}})});return d&&a.Children.only(d)}}]),i}(a.Component),M=function(){return{value:0,percent:0}},N=function(e){m(i,e);var t=f(i);function i(){var e;u(this,i);for(var a=arguments.length,n=Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).getTrackProps=function(t){var i=e.props,a=i.emitMouse,n=i.emitTouch;return c(c({},t||{}),{},{onMouseDown:A(t&&t.onMouseDown,a),onTouchStart:A(t&&t.onTouchStart,n)})},e}return h(i,[{key:"render",value:function(){for(var e=this.getTrackProps,t=this.props,i=t.children,n=t.left,r=void 0===n||n,l=t.right,s=void 0===l||l,o=t.scale,d=void 0===o?new D:o,c=t.handles,u=void 0===c?[]:c,p=t.getEventData,h=t.activeHandleID,m=d.getDomain(),g=[],_=0;_<u.length+1;_++){var y=u[_-1],f=u[_];0===_&&!0===r?y={id:"$",value:m[0],percent:0}:_===u.length&&!0===s&&(f={id:"$",value:m[1],percent:100}),y&&f&&g.push({id:"".concat(y.id,"-").concat(f.id),source:y,target:f})}var x=i({getEventData:void 0===p?M:p,activeHandleID:void 0===h?"":h,tracks:g,getTrackProps:e});return x&&a.Children.only(x)}}]),i}(a.Component);function Z(e,t,i){return Math.min(Math.max(e,t),i)}var K=h(function e(){var t=this;u(this,e),this.step=1,this.domain=[0,1],this.range=[0,1],this.setDomain=function(e){return t.domain=[e[0],e[1]],t},this.setRange=function(e){return t.range=[e[0],e[1]],t},this.setStep=function(e){return t.step=e,t},this.getValue=function(e){var i=x(t.domain,2),a=i[0],n=i[1],r=x(t.range,2),l=r[0],s=r[1],o=t.step,d=o*Math.round((Z(e,a,n)-a)/(n-a)*(s-l)/o)+l;return Z(d,l<s?l:s,s>l?s:l)}}),z="undefined"!=typeof window&&"undefined"!=typeof document,H=function(){},U=function(e){if(!(0,a.isValidElement)(e))return!1;var t=e.type,i=t?t.name:"";return i===R.name||i===F.name||i===L.name||i===N.name},B=function(e,t,i,a){var n=a?e-t:e+t;return a?Math.max(i[0],n):Math.min(i[1],n)},G=function(e,t,i,a){var n=a?e+t:e-t;return a?Math.min(i[1],n):Math.max(i[0],n)},$=[0,100],V=function(e){m(i,e);var t=f(i);function i(){var e;u(this,i);for(var n=arguments.length,r=Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={step:.1,values:[],domain:$,handles:[],reversed:!1,activeHandleID:"",valueToPerc:null,valueToStep:null,pixelToStep:null},e.slider=a.createRef(),e.onKeyDown=function(t,i){var a=["ArrowRight","ArrowUp"],n=["ArrowDown","ArrowLeft"],r=y(e),l=r.state.handles,s=r.props,o=s.step,d=void 0===o?.1:o,c=s.reversed,u=void 0!==c&&c,p=s.vertical,h=s.domain,m=void 0===h?[0,100]:h,g=t.key||"".concat(t.keyCode);if(a.concat(n).includes(g)){if(void 0!==p&&p){var _=[n,a];a=_[0],n=_[1]}t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault();var f=l.find(function(e){return e.key===i});if(f){var x=f.val,v=x;a.includes(g)?v=B(x,d,m,u):n.includes(g)&&(v=G(x,d,m,u));var b=l.map(function(e){return e.key===i?{key:e.key,val:v}:e});e.submitUpdate(b,!0)}}},e.onMouseDown=function(t,i){e.onStart(t,i,!1)},e.onTouchStart=function(t,i){k(t)||e.onStart(t,i,!0)},e.getEventData=function(t,i){var a,n=y(e),r=n.state,l=r.pixelToStep,s=r.valueToPerc,o=n.props.vertical;return l.setDomain(T(e.slider.current,o)),i&&t instanceof TouchEvent?a=l.getValue(E(o,t)):t instanceof MouseEvent&&(a=l.getValue(o?t.clientY:t.pageX)),{value:a,percent:s.getValue(a)}},e.onMouseMove=function(t){var i=y(e),a=i.state,n=a.handles,r=a.pixelToStep,l=a.activeHandleID,s=void 0===l?"":l,o=i.props,d=o.vertical,c=o.reversed,u=void 0!==c&&c;r.setDomain(T(e.slider.current,d));var p=I(n,s,r.getValue(d?t.clientY:t.pageX),u);e.submitUpdate(p)},e.onTouchMove=function(t){var i=y(e),a=i.state,n=a.handles,r=a.pixelToStep,l=a.activeHandleID,s=i.props,o=s.vertical,d=s.reversed;if(!(null===r||k(t))){r.setDomain(T(e.slider.current,o));var c=I(n,l,r.getValue(E(o,t)),d);e.submitUpdate(c)}},e.onMouseUp=function(){var t=y(e),i=t.state,a=i.handles,n=void 0===a?[]:a,r=i.activeHandleID,l=t.props,s=l.onChange,o=void 0===s?H:s,d=l.onSlideEnd,c=void 0===d?H:d;o(n.map(function(e){return e.val})),c(n.map(function(e){return e.val}),{activeHandleID:r}),e.setState({activeHandleID:""}),z&&(document.removeEventListener("mousemove",e.onMouseMove),document.removeEventListener("mouseup",e.onMouseUp))},e.onTouchEnd=function(){var t=y(e),i=t.state,a=i.handles,n=i.activeHandleID,r=t.props,l=r.onChange,s=void 0===l?H:l,o=r.onSlideEnd,d=void 0===o?H:o;s(a.map(function(e){return e.val})),d(a.map(function(e){return e.val}),{activeHandleID:n}),e.setState({activeHandleID:""}),z&&(document.removeEventListener("touchmove",e.onTouchMove),document.removeEventListener("touchend",e.onTouchEnd))},e}return h(i,[{key:"componentDidMount",value:function(){var e=this.state.pixelToStep,t=this.props.vertical;e.setDomain(T(this.slider.current,t))}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"removeListeners",value:function(){z&&(document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"onStart",value:function(e,t,i){var a=this.state.handles,n=this.props.onSlideStart,r=void 0===n?H:n;!i&&e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),a.find(function(e){return e.key===t})?(this.setState({activeHandleID:t}),r(a.map(function(e){return e.val}),{activeHandleID:t}),i?this.addTouchEvents():this.addMouseEvents()):(this.setState({activeHandleID:""}),this.handleRailAndTrackClicks(e,i))}},{key:"handleRailAndTrackClicks",value:function(e,t){var i,a=this,n=this.state,r=n.handles,l=n.pixelToStep,s=this.props,o=s.vertical,d=s.reversed,c=void 0!==d&&d,u=this.slider;l.setDomain(T(u.current,o)),i=t?l.getValue(E(o,e)):l.getValue(o?e.clientY:e.pageX);for(var p="",h=1/0,m=0;m<r.length;m++){var g=r[m],_=g.key,y=Math.abs(g.val-i);y<h&&(p=_,h=y)}var f=I(r,p,i,c);this.setState({activeHandleID:p},function(){a.submitUpdate(f,!0),t?a.addTouchEvents():a.addMouseEvents()})}},{key:"addMouseEvents",value:function(){z&&(document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp))}},{key:"addTouchEvents",value:function(){z&&(document.addEventListener("touchmove",this.onTouchMove),document.addEventListener("touchend",this.onTouchEnd))}},{key:"submitUpdate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.props,a=i.mode,n=void 0===a?1:a,l=i.step,s=void 0===l?.1:l,o=i.onUpdate,d=void 0===o?H:o,c=i.onChange,u=void 0===c?H:c,p=i.reversed,h=void 0!==p&&p,m=this.state.valueToStep.getValue;this.setState(function(i){var a=i.handles,l=[];if("function"==typeof n)l=n(a,e,s,h,m),r()(Array.isArray(l),"Custom mode function did not return an array.");else switch(n){case 1:l=e;break;case 2:l=function(e,t){for(var i=0;i<e.length;i++)if(e[i].key!==t[i].key||t[i+1]&&t[i].val===t[i+1].val)return e;return t}(a,e);break;case 3:l=function e(t,i,a,n,r){for(var l=-1,s=!0,o=0;o<t.length;o++){var d=t[o],c=i[o];if(!c||c.key!==d.key)return t;c.val!==d.val&&(l=o,s=c.val-d.val>0)}if(-1===l)return t;for(var u=s?a:-a,p=0;p<i.length;p++){var h=i[p],m=i[p+1];if(m&&h.val===m.val){if(p===l){var g=m.val+u;if(r(g)!==g)return t;var _=I(i,m.key,m.val+u,n),y=e(i,_,a,n,r);if(y===i)return t;return y}var f=h.val+u;if(r(f)!==f)return t;var x=I(i,h.key,h.val+u,n),v=e(i,x,a,n,r);if(v===i)return t;return v}}return i}(a,e,s,h,m);break;default:l=e,r()(!1,"".concat(w," Invalid mode value."))}return d(l.map(function(e){return e.val})),t&&u(l.map(function(e){return e.val})),{handles:l}})}},{key:"render",value:function(){var e=this,t=this.state,i=t.handles,n=t.valueToPerc,r=t.activeHandleID,l=this.props,s=l.className,o=l.rootStyle,d=void 0===o?{}:o,u=l.rootProps,p=void 0===u?{}:u,h=l.component,m=void 0===h?"div":h,g=l.disabled,_=void 0!==g&&g,y=l.flatten,f=i.map(function(e){var t=e.key,i=e.val;return{id:t,value:i,percent:n.getValue(i)}}),x=a.Children.map(this.props.children,function(t){return!0===U(t)?a.cloneElement(t,{scale:n,handles:f,activeHandleID:r,getEventData:e.getEventData,emitKeyboard:_?H:e.onKeyDown,emitMouse:_?H:e.onMouseDown,emitTouch:_?H:e.onTouchStart}):t});return void 0!==y&&y?a.createElement(a.Fragment,null,a.createElement(m,c(c({},p),{},{style:d,className:s,ref:this.slider})),x):a.createElement(a.Fragment,null,a.createElement(m,c(c({},p),{},{style:d,className:s,ref:this.slider}),x))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var i,a,n=e.step,l=void 0===n?.1:n,s=e.values,o=e.domain,d=void 0===o?$:o,c=e.reversed,u=void 0!==c&&c,p=e.onUpdate,h=void 0===p?H:p,m=e.onChange,g=void 0===m?H:m,_=e.warnOnChanges,y=void 0!==_&&_,f=t.valueToPerc,b=t.valueToStep,S=t.pixelToStep,P={};if(f&&b&&S||(f=new D,b=new K,S=new K,P.valueToPerc=f,P.valueToStep=b,P.pixelToStep=S),t.domain===$||null===t.step||null===t.domain||null===t.reversed||l!==t.step||d[0]!==t.domain[0]||d[1]!==t.domain[1]||u!==t.reversed){var I=x(d,2),T=I[0],k=I[1];b.setStep(l).setRange([T,k]).setDomain([T,k]),!0===u?(f.setDomain([T,k]).setRange([100,0]),S.setStep(l).setRange([k,T])):(f.setDomain([T,k]).setRange([0,100]),S.setStep(l).setRange([T,k])),r()(k>T,"".concat(w," Max must be greater than min (even if reversed). Max is ").concat(k,". Min is ").concat(T,"."));var E=j(s||t.values,u,b,y),A=E.handles;(E.changes||void 0===s||s===t.values)&&(h(A.map(function(e){return e.val})),g(A.map(function(e){return e.val}))),P.step=l,P.values=s,P.domain=d===$?v(d):d,P.handles=A,P.reversed=u}else{if(!((i=s)===(a=t.values)||i.length===a.length&&i.reduce(function(e,t,i){return e&&a[i]===t},!0))){var C=j(s,u,b,y),F=C.handles;C.changes&&(h(F.map(function(e){return e.val})),g(F.map(function(e){return e.val}))),P.values=s,P.handles=F}}return Object.keys(P).length?P:null}}]),i}(a.PureComponent),W=i(883119),Y=i(112690),q=i(643010),X=i(898781),Q=i(892819),J=i(780280),ee=i(245376),et=i(785893);let ei=({domain:[e,t],handle:{id:i,value:a,percent:n},getHandleProps:r,touched:l,activeHandleID:s})=>(0,et.jsx)("div",{"aria-valuemax":t,"aria-valuemin":e,"aria-valuenow":a,role:"slider",style:{left:`${n}%`,position:"absolute",marginLeft:"-11px",marginTop:"-5px",border:"1px solid white",zIndex:2,width:15,height:15,cursor:"pointer",borderRadius:"50%",boxShadow:"1px 1px 1px 1px rgba(0, 0, 0, 0.2)",backgroundColor:"black",transform:l&&s===i?"scale(2)":""},...r(i)}),ea=({source:e,target:t,getTrackProps:i,backgroundColor:a})=>(0,et.jsx)("div",{style:{position:"absolute",height:5,zIndex:1,backgroundColor:a||"black",borderRadius:7,cursor:"pointer",left:`${e.percent}%`,width:`${t.percent-e.percent}%`},...i()}),en=function({cropSource:e,currencyType:t,minPrice:i,maxPrice:n,lowerBound:r,upperBound:l,handlePriceChange:s,withTitle:o,instructions:d}){let c=(0,X.ZP)(),u=(0,Q.Z)(),p=(0,Y.Z)(),{locale:h}=(0,J.B)(),m={position:"absolute",width:"100%",height:5,borderRadius:7,cursor:"pointer",backgroundColor:(0,q.Yc)()?"#454545":"lightGrey"},g=[Math.ceil(r),Math.ceil(l)],_=[Math.ceil(i),Math.ceil(n)],[y,f]=(0,a.useState)([!1,!1]);(0,a.useEffect)(()=>{p({event_type:120,component:13468,view_parameter:3396,view_type:72,aux_data:{commerce_data:JSON.stringify({source:(0,ee.Z)(e)})}})},[]);let x={currency:t,style:"currency",minimum_fraction_digits:0,maximum_fraction_digits:2};return(0,et.jsxs)(a.Fragment,{children:[o&&(0,et.jsx)(W.xu,{"data-test-id":"price-filter-label",paddingY:4,children:(0,et.jsx)(W.xv,{children:c.bt("Price range", "Price range", "FeedFiltering.PriceFilter.PriceRange", undefined, true)})}),(0,et.jsxs)(W.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:3,children:[(0,et.jsx)(W.xv,{weight:"bold",children:(0,et.jsx)(W.xu,{dangerouslySetInlineStyle:{__style:{transform:y[0]?"translateZ(0) translateY(0) scale(1.25)":""}},"data-test-id":"min-price-filter",children:u(h,_[0],x)})}),(0,et.jsx)(W.xv,{weight:"bold",children:(0,et.jsx)(W.xu,{dangerouslySetInlineStyle:{__style:{transform:y[1]?"translateZ(0) translateY(0) scale(1.25)":"",textAlign:"right"}},"data-test-id":"max-price-filter",children:u(h,_[1],{...x,uplimit:l})})})]},"priceSliderValues"),(0,et.jsxs)(V,{domain:g,mode:2,onChange:()=>{f([!1,!1])},onUpdate:e=>{s(e);let[t,i]=_,[a,n]=e;t!==a?f([!0,!1]):i!==n&&f([!1,!0])},rootStyle:{margin:"5%",position:"relative",width:"90%"},step:1,values:_,children:[(0,et.jsx)(F,{children:({getRailProps:e})=>(0,et.jsx)("div",{style:m,...e()})}),(0,et.jsx)(R,{children:({handles:e,getHandleProps:t,activeHandleID:i})=>(0,et.jsx)("div",{className:"slider-handles","data-test-id":"slider-handles",children:e.map((e,a)=>(0,et.jsx)(ei,{activeHandleID:i,domain:g,getHandleProps:t,handle:e,touched:y[a]},e.id))})}),(0,et.jsx)(N,{left:!1,right:!1,children:({tracks:e,getTrackProps:t})=>(0,et.jsx)("div",{className:"slider-tracks",children:e.map(({id:e,source:i,target:a})=>(0,et.jsx)(ea,{backgroundColor:(0,q.Yc)()?"white":"black",getTrackProps:t,source:i,target:a},e))})})]}),(0,et.jsx)(W.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",marginTop:12,children:(0,et.jsx)(W.xv,{children:d||c.bt("Drag to change price", "Drag to change price", "FeedFiltering.PriceFilter.PriceDragText", undefined, true)})})]})}},434788:(e,t,i)=>{"use strict";i.d(t,{Z:()=>eV});var a,n,r=i(616550),l=i(826067),s=i(50286),o=i(19121),d=i(167912),c=i(883119),u=i(934494),p=i(898781),h=i(773285),m=i(42447),g=i(784590),_=i(280446),y=i(667294),f=i(702664),x=i(792182),v=i(407043),b=i(916117),S=i(444445),w=i(558068),P=i(391254),I=i(542554),T=i(276602),k=i(217149),E=i(430323),j=i(501338),A=i(829407);function C(e,t){let i=0,a=!1,n=-1;return e.forEach((e,r)=>{let{x:l=0,y:s=0,h:o=0,w:d=0}=e,c=function(e,t){let{x:i,y:a,w:n,h:r}=e,{x:l,y:s,w:o,h:d}=t,c=Math.max(i,l),u=Math.min(i+n,l+o),p=Math.max(a,s),h=Math.min(a+r,s+d),m=c<u&&p<h?(u-c)*(h-p):0;return m/(n*r+o*d-m)}(t,{x:l,y:s,h:o,w:d});c>=.9&&c>i&&(i=c,a=!0,n=r)}),{isCropAreaOnDotArea:a,dotIndexToHide:n}}var F=i(255164),R=i(156637),D=i(743203),O=i(679031),L=i(643010),M=i(404508),N=i(785893);function Z({handleBackClick:e,viewParameter:t,viewType:i}){let a=(0,L.vs)();return(0,N.jsx)(c.xu,{"data-test-id":"cancelButton",left:!0,margin:2,position:"fixed",top:!0,children:(0,N.jsx)(M.Z,{color:a?"darkGray":"white",disableRedirect:!0,icon:"cancel",onTouch:e,padding:3,size:"lg",viewParameter:t,viewType:i})})}var K=i(112690),z=i(458101),H=i(585913),U=i(913574),B=i(49808),G=i(957435),$=i(398789);function V({pinDominantColor:e,url:t,closeupImageWidth:i,closeupImageHeight:a}){let n=(0,p.ZP)();return(0,N.jsx)($.Z,{alt:n.bt("Pin image", "Pin image", "flashlight.cropper.closeupImage", undefined, true),color:e,isFlashlightPage:!0,naturalHeight:a,naturalWidth:i,placeholder:t,showSpinner:!1,src:t})}let W=e=>{let{alt:t,src:i,top:a,left:n}=e;return(0,N.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{top:a,left:n}},height:24,position:"absolute",width:24,children:(0,N.jsx)(c.Ee,{alt:t,color:"transparent",naturalHeight:24,naturalWidth:24,src:i})})},Y={backgroundColor:"#000000",opacity:"0.4"};function q({closeupImageUrl:e,closeupImageDims:t,cropArea:{x:i,y:a,w:n,h:r},disableBorder:l,disableHandles:s,handleBackClick:o,onTouchEnd:d,onTouchMove:u,onTouchStart:h,pinDominantColor:m,showBackButton:g,viewParameter:_}){let y=(0,p.ZP)(),{closeupImageWidth:f,closeupImageHeight:x}=t,v=Math.floor(x*a),b=Math.floor(f*i),S=Math.floor(x*r),w=Math.floor(f*n),P=b+w,I=v+S;return(0,N.jsxs)(c.xu,{"data-test-id":"cropper-container",onTouchEnd:d,onTouchMove:u,onTouchStart:h,position:"relative",children:[(0,N.jsx)(V,{closeupImageHeight:x,closeupImageWidth:f,pinDominantColor:m,url:e??""}),(0,N.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:Y},height:v,left:!0,position:"absolute",top:!0,width:"100%"}),(0,N.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{...Y,top:v}},height:S,left:!0,position:"absolute",width:b}),(0,N.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{...Y,top:v,left:P}},height:S,position:"absolute",right:!0}),(0,N.jsx)(c.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...Y,top:I}},left:!0,position:"absolute",width:"100%"}),g&&(0,N.jsx)(Z,{handleBackClick:o,viewParameter:_,viewType:427}),!s&&(0,N.jsxs)(c.xu,{"data-test-id":"CropperHandles",children:[(0,N.jsx)(W,{alt:y.bt("Top left cropper handle", "Top left cropper handle", "flashlight.cropper.topLeftHandle", undefined, true),left:b-9,src:B,top:v-9}),(0,N.jsx)(W,{alt:y.bt("Top right cropper handle", "Top right cropper handle", "flashlight.cropper.topRightHandle", undefined, true),left:P-15,src:G,top:v-9}),(0,N.jsx)(W,{alt:y.bt("Bottom left cropper handle", "Bottom left cropper handle", "flashlight.cropper.bottomLeftHandle", undefined, true),left:b-9,src:H,top:I-15}),(0,N.jsx)(W,{alt:y.bt("Bottom right cropper handle", "Bottom right cropper handle", "flashlight.Cropper.BottomLeftHandle", undefined, true),left:P-15,src:U,top:I-15})]}),(0,N.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{top:v-2,left:b-2,border:l?void 0:"2px solid #ffffff"}},"data-test-id":"CroppedArea",height:S+4,position:"absolute",rounding:2,width:w+4})]})}var X=i(599611);function Q({auxData:e,onClick:t,shouldLogDotRender:i,showNoHalo:a,style:n,viewParameter:r,x:l,y:s}){let o=(0,p.ZP)(),d=(0,K.Z)();return(0,A.Z)(()=>{i&&d({aux_data:e,element:1221,event_type:120,view_parameter:r,view_type:72})}),(0,N.jsx)("div",{"aria-label":o.bt("Select a specific item on image", "Select a specific item on image", "dot.accessibilityLabel", undefined, true),"data-test-id":"dot",onClick:t,onKeyPress:t,role:"button",style:{position:"absolute",top:s-16,left:l-16,outline:"none",...n},tabIndex:"0",children:(0,N.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:a?void 0:"rgba(0, 0, 0, 0.1)",width:32,height:32,border:"none",borderRadius:32,cursor:t?"pointer":"default"}},children:(0,N.jsx)(c.xu,{alignItems:"center",color:"light",dangerouslySetInlineStyle:{__style:{boxShadow:"none",width:16,height:16,border:"none",borderRadius:16,top:8,left:8}},display:"flex",justifyContent:"center",padding:0,position:"absolute"})})})}var J=i(100183);let ee="flashlightDotPop",et=(0,J.Ll)([`
  ${ee} {
      0% {
          opacity: 0;
          transform: scale(0);
      }

      100% {
          opacity: 1;
          transform: scale(1);
      }
  }
`,`labelReveal {
    0% {
      transform: scale(0, 1)
    }

    100% {
      transform: scale(1, 1)
    }
  }
`]),ei=e=>{let t=parseFloat((.1*e).toFixed(2));return{animation:`${ee} 0.3s ease-out ${t}s both`}};function ea({closeupImageTop:e,imageHeight:t,imageTop:i,imageWidth:a,onDotTap:n,pinId:r,pinImageSignature:l,setCropArea:s,shouldLogDotRender:o,showNoHalo:d,viewParameter:c,visualObjects:u,visualObjectToHide:p}){let h=(0,K.Z)();return(0,N.jsxs)(y.Fragment,{children:[(0,N.jsx)(P.Z,{unsafeCSS:et}),u.map((m,g)=>{if(g===p)return null;let{x:_=0,y=0,w:f=0,h:x=0}=m,v={x:_,y,h:x,w:f},b=(0,X.Z)({cropArea:{x:_,y,w:f,h:x},scaledWidth:a,scaledHeight:t}),S=Math.floor(b.x+b.w/2),w=Math.floor(b.y+i+b.h/2),P=ei(g),I={pin_id:r,image_signature:l,visual_objects:JSON.stringify([v]),commerce_data:JSON.stringify({entrypoint:"flashlight",pin_is_stela:"false"})};return(0,N.jsx)(Q,{auxData:I,onClick:function(){h({aux_data:I,element:1221,event_type:102,view_parameter:c,view_type:72}),n({cropArea:v,cropSource:4,visualObjects:u}),s?.(v)},shouldLogDotRender:o,showNoHalo:d,style:P,viewParameter:c,x:S,y:w-e},JSON.stringify(v))})]})}var en=i(691720);let er={OUTSIDE:0,INSIDE:1,LEFT_CROPPER:2,RIGHT_CROPPER:3,TOP_CROPPER:4,BOTTOM_CROPPER:5,TOP_LEFT_HANDLE:6,TOP_RIGHT_HANDLE:7,BOTTOM_LEFT_HANDLE:8,BOTTOM_RIGHT_HANDLE:9,NONE:10};function el({closeupImageUrl:e,closeupImageDims:t,cropArea:i,handleBackClick:a,handleChangeCloseupImageTop:n,handleCropperChange:r,headerHeight:l,inUnifiedFeedExp:s,pinDominantColor:o,pinId:d,pinImageSignature:u,showBackButton:p,viewParameter:h,visualObjects:m,visualObjectToHide:g}){let _=(0,K.Z)(),f=(0,y.useRef)(),[x,v]=(0,y.useState)(0),[b,S]=(0,y.useState)(0),[w,P]=(0,y.useState)(er.NONE),[I,T]=(0,y.useState)(i),{current:k}=(0,z.Z)(),{x:E,y:j,w:A,h:C}=I,{closeupImageTop:F,closeupImageMinTop:R,closeupImageWidth:D,closeupImageHeight:O,minCropperWidthRatio:L,minCropperHeightRatio:M}=t,Z=l||0,H=(e,t)=>{let i=t-F,a=e-(f.current?f.current.getBoundingClientRect().left:0),n=O*j,r=O*(j+C),l=D*E,s=D*(A+E);if(i>n+12&&i<r-12&&a>l+12&&a<s-12)return er.INSIDE;if(a<=l+12&&a>=l-12&&i>=n+15&&i<=r-15)return er.LEFT_CROPPER;if(a<=s+12&&a>=s-12&&i>=n+15&&i<=r-15)return er.RIGHT_CROPPER;if(a<=s-15&&a>=l+15&&i>=n-12&&i<=n+12)return er.TOP_CROPPER;if(a<=s-15&&a>=l+15&&i>=r-12&&i<=r+12)return er.BOTTOM_CROPPER;if(a<=l-9+24&&a>=l-12&&i>=n-12&&i<=n+24-9)return er.TOP_LEFT_HANDLE;if(a<=s+12&&a>=s-15&&i>=n-12&&i<=n+24-9)return er.TOP_RIGHT_HANDLE;else if(a<=l-9+24&&a>=l-12&&i>=r-15&&i<=r+12)return er.BOTTOM_LEFT_HANDLE;else if(a<=s+12&&a>=s-15&&i>=r-15&&i<=r+12)return er.BOTTOM_RIGHT_HANDLE;else return er.OUTSIDE};return(0,N.jsx)(c.kC,{justifyContent:"center",width:"100vw",children:(0,N.jsxs)(c.xu,{ref:f,dangerouslySetInlineStyle:{__style:{top:F,touchAction:"none"}},maxWidth:en.g6,overflow:"hidden",position:"fixed",width:"100%",children:[(0,N.jsx)(q,{closeupImageDims:t,closeupImageUrl:e,cropArea:I,handleBackClick:a,onTouchEnd:()=>{if(![er.NONE,er.OUTSIDE].includes(w)){let e=w===er.INSIDE?7603:7604;_({event_type:e,view_parameter:h,view_type:72}),r({cropArea:I,cropSource:6,visualObjects:m})}},onTouchMove:e=>{let{clientX:t,clientY:i}=e.touches[0];if(v(t),S(i),w===er.NONE){let e=H(t,i);P(e)}if(null!=L&&null!=M&&null!=R){let e=i-b,a=t-x,r=a/D,l=e/O,s=Math.min(E+A-L,Math.max(0,E+r)),o=A+(E-s),d=Math.min(j+C-M,Math.max(0,j+l)),c=C+(j-d),u=Math.min(1-E,Math.max(L,A+r)),p=Math.min(1-j,Math.max(M,C+l));switch(w){case er.OUTSIDE:n(Math.floor(Math.max(R,Math.min(Z,F+e))));break;case er.INSIDE:T(e=>({...e,x:Math.max(0,Math.min(1-A,E+r)),y:Math.max(0,Math.min(1-C,j+l))}));break;case er.LEFT_CROPPER:T(e=>({...e,x:s,w:o}));break;case er.RIGHT_CROPPER:T(e=>({...e,w:u}));break;case er.TOP_CROPPER:T(e=>({...e,y:d,h:c}));break;case er.BOTTOM_CROPPER:T(e=>({...e,h:p}));break;case er.TOP_LEFT_HANDLE:T({x:s,w:o,y:d,h:c});break;case er.TOP_RIGHT_HANDLE:T(e=>({...e,w:u,y:d,h:c}));break;case er.BOTTOM_LEFT_HANDLE:T(e=>({...e,h:p,x:s,w:o}));break;case er.BOTTOM_RIGHT_HANDLE:T(e=>({...e,h:p,w:u}))}}},onTouchStart:e=>{let{clientX:t,clientY:i}=e.touches[0];v(t),S(i),P(er.NONE)},pinDominantColor:o,showBackButton:p,viewParameter:h}),!!m.length&&0!==O&&0!==D&&(0,N.jsx)(c.xu,{"data-test-id":"FlashlightDots",children:(0,N.jsx)(ea,{closeupImageTop:F,imageHeight:O,imageTop:F,imageWidth:D,onDotTap:r,pinId:d,pinImageSignature:u,setCropArea:T,shouldLogDotRender:!k,showNoHalo:s,viewParameter:h,visualObjects:m,visualObjectToHide:g})})]})})}var es=i(427806),eo=i(8742);let ed=e=>({type:"SET_FLASHLIGHT_CROP_SOURCE",payload:{cropSource:e}});var ec=i(884183),eu=i(422946),ep=i(761881),eh=i(284367),em=i(594736),eg=i(984225),e_=i(124580),ey=i(780280),ef=i(223815),ex=i(867820),ev=i(245376);function eb(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:String(a))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let eS={modal:{baseStyles:{transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",transformOrigin:"bottom",touchAction:"none"}}},ew={NONE:0,UP:1,DOWN:2};class eP extends y.Component{constructor(...e){super(...e),eb(this,"state",{currentDistanceFromTop:this.props.maxDistanceFromTop?this.props.maxDistanceFromTop:-1,headerHeight:this.props.headerHeight||0,isAtTop:!1,scrollDirection:ew.NONE,shouldAnimate:!1,startY:0,canScrollOnChildren:!1}),eb(this,"onTouchStart",e=>{let{clientY:t}=e.touches[0];this.setState({startY:t,shouldAnimate:!1,scrollDirection:ew.NONE})}),eb(this,"onTouchMove",e=>{let{clientY:t}=e.touches[0],{startY:i,currentDistanceFromTop:a}=this.state,{canMoveModal:n,maxDistanceFromTop:r}=this.props,l=t-i;n&&void 0!==r&&(l>0&&a>=0&&a<r&&window.scrollY<=0||l<0&&a<=r&&a>=0)&&this.setModalPosition(t)}),eb(this,"onTouchEnd",()=>{let{entryPoint:e,minDistanceFromTop:t,canMoveModal:i}=this.props;this.props.shouldSnapToEnds&&this.state.scrollDirection===ew.DOWN?(this.header&&e_.Z.removeObstruction("top",this.header),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:this.props.maxDistanceFromTop,shouldAnimate:!0,isAtTop:!1}),e&&(0,ex.My)(`mweb.${e}.snap_to_bottom`)):this.props.shouldSnapToEnds&&this.state.scrollDirection===ew.UP&&(this.state.isAtTop?this.setState({currentDistanceFromTop:0,shouldAnimate:!0}):this.setState({canScrollOnChildren:i,currentDistanceFromTop:t||0,shouldAnimate:!0,isAtTop:!0}),this.header&&e_.Z.addObstruction("top",this.header),e&&(0,ex.My)(`mweb.${e}.sliding_modal.snap_to_top`))}),eb(this,"handleHandleMove",e=>{let{clientY:t}=e.touches[0],{canMoveModal:i,maxDistanceFromTop:a,minDistanceFromTop:n}=this.props,{startY:r,currentDistanceFromTop:l}=this.state;i&&l<=(n||0)&&t-r>0&&(e.stopPropagation(),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:a,isAtTop:!1,scrollDirection:ew.NONE,shouldAnimate:!0,startY:0}))}),eb(this,"handleHeaderTouch",()=>{let{maxDistanceFromTop:e,minDistanceFromTop:t,entryPoint:i,canMoveModal:a}=this.props,{currentDistanceFromTop:n,scrollDirection:r}=this.state;r===ew.NONE&&(n===e?(this.setState({canScrollOnChildren:a,currentDistanceFromTop:t||0,shouldAnimate:!0,isAtTop:!0}),(0,ex.My)(`mweb.${i}.sliding_modal.header_touch.snap_to_top`)):e&&(this.setState({canScrollOnChildren:!1,currentDistanceFromTop:e,shouldAnimate:!0,isAtTop:!1}),(0,ex.My)(`mweb.${i}.sliding_modal.header_touch.snap_to_bottom`)))}),eb(this,"handleCloseIconTouch",e=>{let{currentDistanceFromTop:t}=this.state,{onDismiss:i,logContextEvent:a,maxDistanceFromTop:n,viewParameter:r,viewType:l}=this.props;e.stopPropagation(),i&&(a({aux_data:{commerce_data:JSON.stringify({snapped_top:0===t})},element:75,event_type:102,view_parameter:r,view_type:l}),this.setState({currentDistanceFromTop:n,startY:0,scrollDirection:ew.NONE},()=>i(e)))}),eb(this,"getModalStyles",()=>{let{shouldSnapToEnds:e}=this.props,{currentDistanceFromTop:t,shouldAnimate:i,canScrollOnChildren:a}=this.state,{baseStyles:n}=eS.modal;return{...n,animation:"modalReveal 0.3s ease-out both",position:a?"absolute":"fixed",top:t>-1?t:void 0,bottom:0,width:"100vw",...e&&i?{transitionDuration:"500ms",transitionProperty:"transform, opacity, top"}:Object.freeze({})}}),eb(this,"setModalPosition",e=>{let{startY:t,currentDistanceFromTop:i}=this.state,{maxDistanceFromTop:a,snapToEndThreshold:n,entryPoint:r}=this.props;if(a){let l=e-t,s=Math.floor("CloseupShop"===r||"CloseUpMainPinDrawer"===r?Math.max(0,i+l):Math.min(a,Math.max(0,i+l))),o=ew.NONE;void 0!==n&&n>=0&&(l<0?o=s>Math.floor((1-n)*a)?ew.DOWN:ew.UP:l>0&&(o=s>Math.floor(n*a)?ew.DOWN:ew.UP)),this.setState({startY:e,currentDistanceFromTop:s,scrollDirection:o})}})}componentDidMount(){let{isOpen:e}=this.props;e&&e_.Z.pause()}componentDidUpdate(e,t){let{domainFilters:i,priceFilters:a,cropSource:n,isOpen:r,logContextEvent:l,maxDistanceFromTop:s,setHasDraggedDrawerToFullScreen:o,minDistanceFromTop:d,entryPoint:c}=this.props,{currentDistanceFromTop:u}=this.state;if(r&&!e.isOpen?e_.Z.pause():!r&&e.isOpen&&e_.Z.resume(),"CloseUpMainPinDrawer"===c&&s<e.maxDistanceFromTop&&u>s&&this.handleHeaderTouch(),t.currentDistanceFromTop!==(e.minDistanceFromTop||0)&&u===(d||0)&&o&&o(!0),i&&a&&(!(0,em.ZP)(i,e.domainFilters)||!(0,em.ZP)(a,e.priceFilters))){let e=(0,ev.Z)(n);l({event_type:13,view_parameter:"related_products"===e?3455:3456,view_type:72,element:11735})}}componentWillUnmount(){let{isOpen:e}=this.props;this.header&&e_.Z.removeObstruction("top",this.header),e&&e_.Z.resume()}render(){let{children:e,headerChildren:t,heading:i,inUnifiedFeedExp:a,isOpen:n,isRTL:r,mobileAccessibilityCloseIconLabel:l,mobileHideCloseIcon:s,noDivider:o,showHandle:d}=this.props,{headerHeight:u,canScrollOnChildren:p}=this.state,h=!p&&a?"32px 32px 0 0":"0";return n?(0,N.jsx)(ef.Z,{children:(0,N.jsx)(c.xu,{"aria-label":i,role:"dialog",children:(0,N.jsx)(c.xu,{color:"default",dangerouslySetInlineStyle:{__style:{...this.getModalStyles(),borderRadius:h}},onTouchEnd:this.onTouchEnd,onTouchMove:this.onTouchMove,onTouchStart:this.onTouchStart,children:(0,N.jsxs)(c.iP,{accessibilityLabel:this.props.i18n.bt("View all search results", "View all search results", "SlidingModal.Header.a11yLabel", undefined, true),onTap:this.handleHeaderTouch,children:[(0,N.jsxs)(c.Le,{top:u||0,children:[d&&(0,N.jsx)(c.xu,{color:"default",dangerouslySetInlineStyle:{__style:{padding:"8px 0 24px 0",borderRadius:h}},"data-test-id":"slidingModalHandle",display:"flex",justifyContent:"center",onTouchMove:this.handleHandleMove,children:eg.Z}),!s&&(0,N.jsxs)(c.xu,{ref:e=>{this.header=e},color:"default",rounding:2,children:[(0,N.jsxs)(c.kC,{alignItems:"center",flex:"grow",justifyContent:"start",children:[(0,N.jsx)(c.kC,{alignItems:"center",justifyContent:"start",children:(0,N.jsx)(c.hU,{accessibilityLabel:l||"Close visual search results",icon:"arrow-back",iconColor:"gray",onClick:({event:e})=>this.handleCloseIconTouch(e),padding:5,size:"lg"})}),(0,N.jsx)(c.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:function({filterIconShown:e,isRTL:t}){let i=t?"marginRight":"marginLeft",a=t?"marginLeft":"marginRight";return e?{[i]:38,[a]:50,marginTop:15,marginBottom:15}:{[i]:-10,[a]:50,marginTop:15,marginBottom:15}}({isRTL:r})},"data-test-id":"slidingModalHeader",display:"flex",flex:"grow",justifyContent:"center",children:(0,N.jsx)(c.X6,{accessibilityLevel:2,align:"center",size:"400",children:i})})]}),t||null,!o&&(0,N.jsx)(c.iz,{})]})]}),(0,N.jsx)(c.xu,{overflow:p?"auto":"visible",children:e})]})})})}):null}}function eI(e){let t=(0,p.ZP)(),i=(0,K.Z)(),{isRTL:a}=(0,ey.B)();return(0,N.jsx)(eP,{...e,i18n:t,isRTL:a,logContextEvent:i})}let eT=`
  html, body {
    overscroll-behavior: none;
  }
`;function ek(){return Math.min(en.g6,window.innerWidth)}function eE(e,t){return Math.floor(ek()/t*e)}function ej(e,t){let i=0,a=0,n=0;if(e&&e.imageSpec_736x){let t=e?e.imageSpec_736x:null;i=ek(),a=eE(t?.height??1,t?.width??1),n=function(e,t){let i=Math.floor(.6*window.innerHeight);return Math.min(i,eE(e,t))}(t?.height??1,t?.width??1)}return{closeupImageWidth:i,closeupImageHeight:a,closeupImageMinTop:n-a,closeupImageTop:t||0,minCropperWidthRatio:i?50/i:0,minCropperHeightRatio:a?50/a:0,modalTop:n}}function eA(e,t,i,a){let n=i?Number(i):.4,r=a?Number(a):.1;e>0&&t>0&&(i||(n=(t-2*t*.1)/e),a||(r=.1*t/e));let l={h:n,y:r};return l}let eC=(0,ep.Z)(e=>`visual-search:${e}`);function eF({cropArea:e,cropSource:t,headerHeight:i,inUnifiedFeedExp:a,pin:n,pinId:l,queryH:s,queryY:d,searchResourceOptions:u,setCropSource:m,setState:g,state:_,visualSearchFlashlightUnifiedResource:b}){let j=(0,T.E)(),F=(0,p.ZP)(),{logContextEvent:L}=(0,v.v)(),M=(0,f.useDispatch)(),K=(0,r.k6)(),{previous:z}=(0,w.Hv)(),{checkExperiment:H}=(0,h.F)(),U=(0,r.TH)(),{isAuth:B}=(0,o.Z)(),{width:G=0}=(0,x.Z)()||{},$=(n?.visualObjects??[]).filter(e=>e.isStela),V=(n?.visualObjects??[]).filter(e=>!!e.label),W=$.length>0||V.length>0,Y=W&&(H("mweb_flashlight_show_more_stela_dots").anyEnabled?$:V)||[],q=Y.map(e=>{let{isStela:t,title:i,label:a,labelId:n,labelX:r,labelY:l,maxAnnotationNumDocuments:s,score:o,showOnCloseup:d,x:c,y:u,h:p,w:h}=e;return{is_stela:t??!1,title:i??"",label:a??"",label_id:n??"",label_x:r??0,label_y:l??0,max_annotation_num_documents:s??0,score:o??0,show_on_closeup:d??!1,x:c??0,y:u??0,h:p??0,w:h??0}}),[X,Q]=(0,y.useState)(C(q,e)),{isCropAreaOnDotArea:J,dotIndexToHide:ee}=X,et=e=>M((0,ec.By)(e)),ei=e=>M(ed(e)),ea=(0,f.useSelector)(e=>eC(e,l)),{data:en,fetchMore:er,isAtEnd:ep,isFetching:em,isLoaded:eg}=b||{},e_=en?.results||[],ey=e_.find(e=>"story"===e.type&&"unified_visual_feed_product_upsell"===e.story_type),ef=e_.filter(e=>"pin"===e.type),ex=ey?.action,{url:ev=`/pin/${l}`,title:eb=""}=ex||{},eS=F.bt("Shop for similar", "Shop similar", "mobileFlashlight.productUpsellTitle", undefined, true),ew=F.bt("Image search", "Image search", "mobileFlashlight.organicFeedTitle", undefined, true),eP=F.bt("Visual search", "Visual search", "Visual search results", undefined, true),ek=a&&(4===t||J)?3462:3050,eE=JSON.stringify({is_product_only_feed:!1}),{closeupImageWidth:eF,modalTop:eR}=_.closeupImageDims,eD=n?.imageSpec_736x?.url??"",eO=G-60<eF&&a;function eL(){L({component:14339,element:179,event_type:102,view_parameter:ek,view_type:72})}function eM(){if(0===z.length){K.replace(`/pin/${l}/`);return}K.goBack()}let[eN,eZ]=(0,y.useState)(0),[eK,ez]=(0,y.useState)(0),[eH,eU]=(0,y.useState)(!1),[eB,eG]=(0,y.useState)(!1),[e$,eV]=(0,y.useState)(void 0);function eW(){eG(!1),eU(!1),eV(void 0)}function eY(e,t){"vertical"!==t&&e.stopPropagation()}let eq=!!n,eX=(0,y.useMemo)(()=>ej(n,i),[n?.entityId,i]);return((0,y.useEffect)(()=>{if(eq){let{closeupImageHeight:e,modalTop:t=0}=eX,i=eA(e,t,Number(s),Number(d));g(e=>({...e,closeupImageDims:eX,...i}))}},[eq,eX]),(0,y.useEffect)(()=>{(ea&&ea.length>0||a&&eg)&&j&&j.markConstraintComplete("VisualSearchFeedLoaded")}),(0,A.Z)(()=>{ei(t)}),n&&0!==eR)?(0,N.jsxs)(y.Fragment,{children:[(0,N.jsx)(P.Z,{unsafeCSS:eT}),(0,N.jsx)(R.Z,{auxData:a?{commerce_data:eE}:void 0,viewParameter:a?3462:3050,viewType:72,children:(0,N.jsx)(E.Z,{view:72,children:(0,N.jsxs)(I.default,{hasFixedHeader:!0,hasGutter:!1,children:[(0,N.jsx)(es.Z,{text:F.bt("Visual search page", "Visual Search Page", "flashlight.accessibilityhiddenheading.fullpage", undefined, true)}),(0,N.jsx)(c.xu,{color:"dark",height:"100vh",width:"100vw"}),(0,N.jsx)(el,{closeupImageDims:_.closeupImageDims,closeupImageUrl:eD,cropArea:e,handleBackClick:eM,handleChangeCloseupImageTop:function(e){g(t=>({...t,closeupImageDims:{...t.closeupImageDims,closeupImageTop:e}}))},handleCropperChange:function({cropArea:e,cropSource:t,visualObjects:i}){ei(t),et(l),Q(C(i,e)),m(t),g(t=>({...t,...e})),K.replace(`/pin/${l}/visual-search/?x=${e.x}&y=${e.y}&h=${e.h}&w=${e.w}&cropSource=${t}`)},headerHeight:i,inUnifiedFeedExp:a,pinDominantColor:n.dominantColor||"#efefef",pinId:l,pinImageSignature:n.imageSignature,showBackButton:eO,viewParameter:ek,visualObjects:q,visualObjectToHide:ee}),!eO&&a&&(0,N.jsx)(Z,{handleBackClick:eM,viewParameter:ek,viewType:427}),(0,N.jsxs)(eI,{canMoveModal:!0,cropSource:t,entryPoint:"flashlight",headerHeight:i,heading:eP,inUnifiedFeedExp:a,isOpen:!0,location:U,maxDistanceFromTop:eR||0,minDistanceFromTop:B?60:i,mobileAccessibilityCloseIconLabel:F.bt("Close visual search results", "Close visual search results", "close visual search results and go back to pin", undefined, true),mobileHideCloseIcon:a,noBorder:!0,noDivider:!0,noMaskOnBackground:!0,onDismiss:eM,pinId:l,shouldSnapToEnds:!0,showHandle:a,snapToEndThreshold:.3,viewParameter:ek,viewType:72,children:[(0,N.jsx)(c.$j,{accessibilityLabel:F.bt("Loading visual search results", "Loading visual search results", "mobileFlashlightPage.loadingSpinner", undefined, true),show:a&&!eg}),a&&eg&&(0,N.jsxs)(y.Fragment,{children:[ey&&(0,N.jsxs)(y.Fragment,{children:[(0,N.jsxs)(c.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginBottom:2,paddingX:4,children:[(0,N.jsx)(c.Tg,{href:ev,onTap:({event:e})=>{e.stopPropagation(),eL()},tapStyle:"compress",children:(0,N.jsx)(c.X6,{accessibilityLevel:2,size:"400",children:eS})}),(0,N.jsx)(c.I_,{accessibilityLabel:eb||F.bt("See more", "See more", "headerModule.headerModuleActionButton.iconButton", undefined, true),bgColor:"transparent",dataTestId:"product-upsell-action-button",href:ev,icon:"arrow-forward",iconColor:"darkGray",onClick:eL,size:"sm"})]}),(0,N.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{touchAction:"pan-x",overflowY:"hidden"}},onTouchEnd:function(e){eY(e,e$),eW()},onTouchMove:function(e){let{clientX:t,clientY:i}=e.touches[0];Math.abs(i-eK)>10&&eU(!0),Math.abs(t-eN)>10&&eG(!0),eB&&eH?eV(e=>e||"vertical"):eB?eV(e=>e||"horizontal"):eH?eV(e=>e||"vertical"):eV(void 0),eY(e,e$)},onTouchStart:function(e){let{clientX:t,clientY:i}=e.touches[0];eZ(t),ez(i),eW()},children:(0,N.jsx)(k.default,{component:14339,disableHeader:!0,story:ey,storyGraphqlRef:null,surface:"ShoppingDynamicHeightGrid",view:72,viewParameter:3462})})]}),(0,N.jsx)(c.xu,{marginBottom:3,paddingX:4,children:(0,N.jsx)(c.X6,{accessibilityLevel:2,size:"400",children:ew})}),(0,N.jsx)(c.xu,{color:"default",dangerouslySetInlineStyle:{__style:{touchAction:"pan-y"}},paddingX:S.D6,children:(0,N.jsx)(eh.Z,{feedItems:ef,feedKey:(0,eu.J)("VisualSearchFlashlightUnifiedResource",u)??"",pagination:{loadNext:er||(()=>void 0),hasNext:!ep,isLoadingNext:em||!1,refetch:()=>void 0},renderFeedItem:(e,t)=>(0,N.jsx)(O.cn,{children:(0,N.jsx)(eo.ZP,{auxData:{commerce_data:eE},componentType:0,duploQueryRef:null,pinId:e.id,slotIndex:t,trackingParams:e.trackingParams||void 0,viewParameter:3462,viewType:72})})})})]}),!a&&(0,N.jsx)(c.xu,{color:"default",paddingX:S.D6,children:(0,N.jsx)(D.ZP,{feedItemProps:{viewParameter:3050,viewType:72},feedKey:(0,eu.J)("VisualLiveSearchResource",u)??"",resourceConfig:{name:"VisualLiveSearchResource",options:u},trafficSource:"flashlight"})})]})]})})})]}):null}function eR(e){let{searchResourceOptions:t}=e,i=(0,g.Z)({name:"VisualSearchFlashlightUnifiedResource",options:t});return(0,N.jsx)(eF,{...e,visualSearchFlashlightUnifiedResource:i})}let eD=void 0!==a?a:a=i(781426);function eO({pinKey:e}){let{checkExperiment:t}=(0,h.F)(),{anyEnabled:i}=t("mweb_flashlight_unified_feed"),a=(0,r.$B)(),{pinId:n}=(0,_.Z)(a.params.id||""),d=(0,r.TH)(),c=(0,l.mB)(d.search),{cropSource:u,x:p,y:m,h:g,w:f}=c,{isAuth:x}=(0,o.Z)(),v=(0,s.ZP)(),S=!x&&(0,j.x9)(v)||void 0,w=(0,b.Z)(eD,e),[P,I]=(0,y.useState)(()=>{let e=ej(w,S);e.closeupImageTop=0;let{closeupImageHeight:t,modalTop:i=0}=e,a=eA(t,i,Number(g),Number(m));return{closeupImageDims:e,x:p?Number(p):.1,w:f?Number(f):.8,y:a.y,h:a.h}}),[T,k]=(0,y.useState)(()=>{let e=(0,F.Z)(Number(u));return e||(p&&m&&g&&f?6:5)}),E={x:P.x,y:P.y,w:P.w,h:P.h},A={cropArea:E,cropSource:T,headerHeight:S,inUnifiedFeedExp:i,pin:w,pinId:n,queryH:g,queryY:m,searchResourceOptions:{pin_id:n,crop:E,crop_source:T,is_shopping:!1,entry_source:"flashlight",entrypoint:null},setCropSource:k,setState:I,state:P};return i?(0,N.jsx)(eR,{...A}):(0,N.jsx)(eF,{...A})}var eL=i(350118);let eM=void 0!==n?n:n=i(43027);function eN(e){return{width:e.width??0,url:e.url??"",height:e.height??0}}function eZ(e){return e?.map(e=>({id:e.itemId??"",additional_images:function(e){let t=[];return e.forEach(({additionalImages:e,spec:i})=>{t.push(...function({additionalImages:e,spec:t}){let i=[];return e?.forEach(e=>{e.canonicalImage&&i.push({canonical_images:{[t]:eN(e.canonicalImage)},image_signature:e.imageSignature??""})}),i}({additionalImages:e,spec:i})??[])}),t}([{additionalImages:e.additionalImageOrig,spec:"orig"},{additionalImages:e.additionalImage736x,spec:"736x"},{additionalImages:e.additionalImage564x,spec:"564x"},{additionalImages:e.additionalImage474x,spec:"474x"},{additionalImages:e.additionalImage236x,spec:"236x"}])??[]}))}function eK(e){let t={};return e.forEach(({image:e,spec:i})=>{e&&(t[i]=eN(e))}),t}let ez=(0,u.Z)({useGraphQLAdapter:function({pinId:e}){var t,i,a,n,r;let l=(0,d.useLazyLoadQuery)(eM,{pinId:e}),s=l.v3GetPinQuery?.data;if(!s)return null;let o={id:s.entityId??"",dominant_color:s.dominantColor??"",image_signature:s.imageSignature??"",visual_objects:(t=s.visualObjects,t?.map(e=>({detection:e.detection??!1,h:e.h??0,index:e.index??0,is_stela:e.isStela??!1,label:e.label??"",label_id:e.labelId??"",label_x:e.labelX??0,label_y:e.labelY??0,max_annotation_num_documents:e.maxAnnotationNumDocuments??0,score:e.score??0,show_on_closeup:e.showOnCloseup??!1,w:e.x??0,x:e.w??0,y:e.y??0}))??[]),images:eK([{image:s.imageOrig,spec:"orig"},{image:s.image736x,spec:"736x"},{image:s.image564x,spec:"564x"},{image:s.image474x,spec:"474x"},{image:s.image236x,spec:"236x"}])??{},rich_metadata:(i=s.richMetadata,{products:eZ(i?.products)??[]}),rich_summary:(a=s.richSummary,{products:eZ(a?.products)??[]}),carousel_data:(n=s.carouselData,{carousel_slots:(r=n?.carouselSlots,r?.map(e=>({image_signature:e.imageSignature??"",images:eK([{image:e.imageOrig,spec:"orig"},{image:e.image736x,spec:"736x"},{image:e.image564x,spec:"564x"},{image:e.image474x,spec:"474x"},{image:e.image236x,spec:"236x"}])??{}}))??[]),index:n?.index??0}),type:"pin"};return{pin:o}},useLegacyAdapter:function({pinId:e}){let{data:t}=(0,g.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0,is_mobile_fork:!0}}),i=(0,eL.S6)()(e),a=t??i;return a?{pin:a}:null}});function eH(){let{checkExperiment:e}=(0,h.F)(),t=(0,p.ZP)(),i=(0,r.$B)(),{pinId:a}=(0,_.Z)(i.params.id||"");return(0,N.jsx)(ez,{input:e("auth_mweb_graphql_flashlight_pinResource").anyEnabled||e("unauth_mweb_graphql_flashlight_pinResource").anyEnabled?{enabled:!0,data:{pinId:a},suspense:{fallback:(0,N.jsx)(c.$j,{accessibilityLabel:t.bt("Loading Pin data", "Loading Pin data", "mobileFlashlightPage.loadingPinData", undefined, true),show:!0})}}:{enabled:!1,data:{pinId:a}},children:({data:e})=>!!e&&(0,N.jsx)(m.Z,{constraints:["VisualSearchFeedLoaded"],surface:"flashlight",children:(0,N.jsx)(eO,{pinKey:null!=e.pin?{type:"deprecated",data:e.pin}:null})})})}var eU=i(272984),eB=i(594379),eG=i(215425),e$=i(23195);let eV=function(){let e=(0,s.HG)(),t=(0,o.Z)(),i=(0,r.TH)(),{surfaceType:a}=(0,l.mB)(i.search);return e?t.isAuth?["stela","stl"].includes(a)?(0,N.jsx)(eG.Z,{}):(0,N.jsx)(eB.ZP,{}):(0,N.jsx)(eU.Z,{}):i.pathname.includes("/products/")?(0,N.jsx)(e$.Z,{}):(0,N.jsx)(eH,{})}},585913:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_bottom_left-d4d98c77.svg"},913574:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_bottom_right-ccae4564.svg"},49808:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_top_left-68937c82.svg"},957435:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_top_right-4d7ae997.svg"},204942:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var a=i(383997);function n(e,t,i){return(t=(0,a.Z)(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},601413:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var a=i(204942);function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach(function(t){(0,a.Z)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}},383997:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var a=i(671002);function n(e){var t=function(e,t){if("object"!=(0,a.Z)(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=(0,a.Z)(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,a.Z)(t)?t:String(t)}},671002:(e,t,i)=>{"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i.d(t,{Z:()=>a})}},e=>{var t=t=>e(e.s=t);e.O(0,[97270,83119,16550,26067,17492,48327,40432,16117,13254,8575,99961,90123,23019,28090,42506,60779,43203,16142,15071,72732,52117,31069,31600],()=>t(269458)),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/pin/[id]/visual-search.en_GB-5f211dafe0aa176e.mjs.map